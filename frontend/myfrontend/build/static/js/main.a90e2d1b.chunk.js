(this.webpackJsonpmyfrontend=this.webpackJsonpmyfrontend||[]).push([[0],{355:function(e,t,a){},356:function(e,t,a){},391:function(e,t){},422:function(e,t){},424:function(e,t){},438:function(e,t){},440:function(e,t){},468:function(e,t){},470:function(e,t){},471:function(e,t){},476:function(e,t){},478:function(e,t){},497:function(e,t){},509:function(e,t){},512:function(e,t){},552:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(0),c=a.n(s),r=a(19),i=a.n(r),l=(a(355),a(3)),o=a(8),d=(a(356),a(17)),u=a(37),j=a(147),m=a.n(j),b=function(e){return JSON.parse(localStorage.getItem(e))},g=function(e){localStorage.removeItem(e)},h=function(e,t){var a,n;a="token",n=e,m.a.set(a,n,{expires:1}),function(e,t){localStorage.setItem(e,JSON.stringify(t))}("user",t)},O=function(){if(e="token",m.a.get(e)&&b("user"))return b("user");var e},f=function(e){var t;t="token",m.a.remove(t),g("user"),g("friendId"),g("recName"),g("profileUrl"),g("recLang"),g("messagecount"),g("friendRequests"),e()},x=Object(u.h)((function(e){var t=e.history;t=Object(u.g)();var a=O().firstName,c=O().lastName,r=O()._id,i=O().profileImg,l=function(e){f((function(){t.push("/login")}))};return Object(n.jsx)("header",{children:Object(n.jsx)("div",{children:Object(n.jsxs)("nav",{id:"nav",className:"navbar navbar-expand-lg navbar-light mt-0",children:[Object(n.jsxs)("div",{className:"navbar-brand",children:[Object(n.jsxs)(d.b,{to:{pathname:"/update-my-profile-setup/".concat(r)},style:{textDecoration:"none"},children:[Object(n.jsx)("img",{src:i,alt:"Profile",style:{height:"50px",width:"50px",borderRadius:"50%",display:"inline"},onclick:function(){return t.push("/update-my-profile-setup/"+r)}})," "]}),Object(n.jsx)("span",{className:"header_name",children:a+" "+c})]}),Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:Object(n.jsx)("ul",{className:"\r navbar-nav\r ml-auto\r mt-2\r mt-lg-0",children:O()&&0===O().role&&Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(d.b,{to:"/notFound",className:"nav-link "})}),Object(n.jsx)("li",{className:"nav-item",style:{marginRight:"1rem"},children:Object(n.jsxs)(d.b,{to:{pathname:"/dashboard/"+r},className:"nav-link",children:[Object(n.jsx)("i",{className:"fa fa-home","aria-hidden":"true",children:" "}),"  Dashboard"]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)("button",{className:"btn text-decoration-none btn-link   pl-0 nav-link",style:{textDecoration:"none"},onClick:l,children:[Object(n.jsx)("i",{className:"fas fa-sign-out-alt","aria-hidden":"true"})," Logout"]})})]})})})]})})})})),p=a(602),v=a(598),y=a(44),N=a.n(y),w=a(20),S=(a(161),a(53)),C=a(66),k=a(65),M=a(40),I=a.n(M);I.a.defaults.baseURL="http://localhost:5000/api/",I.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token");var R=function e(){Object(S.a)(this,e),this.get=function(e){return new Promise((function(t,a){I.a.get(e).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))},this.getMessage=function(e,t){return new Promise((function(a,n){I.a.get(e,{params:{email:t}}).then((function(e){a(e.data)})).catch((function(e){n(e)}))}))},this.post=function(e,t){return new Promise((function(a,n){I.a.post(e,t).then((function(e){a(e.data)})).catch((function(e){console.log("Errrr"),n(e)}))}))},this.put=function(e,t){return new Promise((function(a,n){I.a.put(e,t).then((function(e){a(e.data)})).catch((function(e){n(e)}))}))},this.delete=function(e){return new Promise((function(t,a){I.a.delete(e).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))}},P=new(function(e){Object(C.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).sendRequest=function(t){return e.post("friends/send-friend-request",t)},e.cancelRequest=function(t){return e.post("friends/cancel-friend-request",t)},e.acceptRequest=function(t){return e.post("friends/accept-friend-request",t)},e.rejectRequest=function(t){return e.post("friends/reject-friend-request",t)},e.deleteFriend=function(t){return e.post("friends/delete-friend",t)},e.getFriendRequest=function(t){return e.get("friends/my-friend-requests/"+t)},e.getSentFriendRequest=function(t){return e.get("friends/sent-friend-requests/"+t)},e.getAllFriends=function(t){return e.get("friends/my-friends-list/"+t)},e.getFriendRequestsCount=function(t){return e.get("friends/my-friend-requests-count/"+t)},e}return a}(R)),T=new(function(e){Object(C.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getMessages=function(){return e.get("chatapi")},e.createMessage=function(t){return e.post("chatapi",t)},e.getMessagesbyEmail=function(t,a){return e.get("chatapi/msgbyemail/"+t+" "+a)},e.getMessagesbyUserId=function(t){return e.get("chatapi/msgbyuserid/"+t)},e.getChatRecipients=function(t){return e.get("chatapi/chatrecipients/"+t)},e.getLastMsg=function(t,a){return e.get("chatapi/lastmsg/"+t+" "+a)},e.deleteMessage=function(t){return e.delete("chatapi/"+t)},e.changeMessageType=function(t,a){return e.put("chatapi/"+a,t)},e.offlinemessages=function(t){return e.get("chatapi/offlinemessages/"+t)},e}return a}(R)),E=Object(s.createContext)();function A(e){var t=e.id,a=e.children,c=Object(s.useState)(0),r=Object(o.a)(c,2),i=r[0],l=r[1],d=Object(s.useState)(0),u=Object(o.a)(d,2),j=u[0],m=u[1],b=Object(s.useState)(),g=Object(o.a)(b,2),h=g[0],f=g[1],x=Object(s.useRef)();Object(s.useEffect)((function(){var e=N()("http://localhost:5000");return f(e),function(){return e.close()}}),[]),Object(s.useEffect)((function(){x.current="/"+t,console.log(x)}),[]);var p=function(){T.offlinemessages(O().email).then((function(e){m(e.count),console.log("Message Count is",j),localStorage.setItem("messagecount",JSON.stringify(e.count))})).catch((function(e){return console.log(e)}))};Object(s.useEffect)((function(){return p}),[]);var y=function(){P.getFriendRequest(O()._id).then((function(e){l(e.length),localStorage.setItem("friendRequests",JSON.stringify(e.length))})).catch((function(e){console.log(e)}))};Object(s.useEffect)((function(){return y}),[i]);var S={clientSocket:h,setSocket:f,messageEvent:function(){h?h.on("newMessage",(function(e){v.a,Object(w.d)(e.RecipientName+":"+e.payload.messageBody,{onOpen:function(){return console.log("Called when I open")},position:w.d.POSITION.TOP_LEFT,toastId:"007",transition:w.a}),console.log("new message",e),p()})):console.log("no socket")},roomJoin:function(e){e="/"+e,h&&h.emit("NotificationRoom",{myNotificationRoom:e},(function(e){var t=e.error,a=e.room;t?console.log("error joining room",t):console.log("joined room with id",a)}))},friendReq:function(){h?h.on("newRequest",(function(e){w.d.info(e.sender+" has sent you a friend request!",{position:w.d.POSITION.TOP_LEFT,autoClose:7e3,transition:w.a})})):console.log("no socket")},getRequest:function(){h?(h.on("newRequest",(function(e){return y()})),h.on("rejectRequest",(function(e){return y()}))):console.log("no socket")},frndcounter:i,acceptRejectCounter:y,msgCounter:j,msgNotify:p};return Object(n.jsx)(E.Provider,{value:S,children:a})}var _=a(604),L=a(152),D=a(603),F=function(e){var t=e.name;return Object(n.jsx)("div",{children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,sm:2,xm:5,md:4}),Object(n.jsxs)(p.a,{item:!0,xs:10,sm:8,xm:2,md:4,children:[Object(n.jsx)(L.a,{variant:"headline",style:{marginTop:"1.5rem",textAlign:"center",fontSize:"4rem",color:D.a[300],fontFamily:"Brush Script MT, Brush Script Std, cursive"},component:"h1",children:t}),Object(n.jsx)("hr",{style:{marginBottom:"1rem"}})]}),Object(n.jsx)(p.a,{item:!0,xs:1,sm:2,xm:5,md:4})]})})},q=function(e){e.uuId;var t=O()._id,a=Object(s.useRef)(),c=Object(u.g)();a.current=JSON.parse(localStorage.getItem("user")).email;var r=Object(s.useContext)(E),i=r.clientSocket,l=r.setSocket,o=r.messageEvent,d=r.roomJoin,j=r.friendReq,m=r.getRequest,b=r.frndcounter,g=r.msgCounter,h=r.msgNotify,f=r.acceptRejectCounter;Object(s.useEffect)((function(){return h}),[]),Object(s.useEffect)((function(){return f}),[]);var y=Object(s.useRef)();return console.log(g),window.onload=function(){j(),f(),h(),o(),m(),d(t),y=N()("http://127.0.0.1:5000"),l((function(e){return(e=y).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:a.current})})),e}))},Object(s.useEffect)((function(){void 0!==i?(console.log(i),i.emit("adduser",{id:i.id,name:a.current})):console.log("no socket")}),[],[i]),Object(s.useEffect)((function(){o()}),[]),Object(s.useEffect)((function(){d(t)}),[]),Object(n.jsxs)("div",{style:{height:"100vh"},className:"back_divs dashboardDiv",children:[Object(n.jsx)(x,{}),Object(n.jsx)(F,{name:"Dashboard"}),Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:2}),Object(n.jsxs)(p.a,{item:!0,xs:10,sm:6,md:8,children:[Object(n.jsxs)("div",{className:"mySettings",children:[Object(n.jsx)("i",{class:"fas fa-user-cog mySettingsicon"}),Object(n.jsx)(v.a,{className:"loginbtn myDashboardBtn",variant:"contained",fullWidth:!0,size:"large",onClick:function(e){return c.push("/my-account-settings/"+t)},children:"Account Settings"})]}),b>=1?Object(n.jsxs)("div",{className:"myContacts",children:[Object(n.jsx)("i",{class:"fas fa-address-book myContacticon"}),Object(n.jsxs)(v.a,{className:"loginbtn myDashboardBtn",variant:"contained",size:"large",fullWidth:!0,onClick:function(e){return c.push("/my-contact-list/"+t)},children:["Contacts",Object(n.jsx)(_.a,{badgeContent:b,className:"msgCounter",color:"Secondary"})]})]}):Object(n.jsxs)("div",{className:"myContacts",children:[Object(n.jsx)("i",{class:"fas fa-address-book myContacticon"}),Object(n.jsx)(v.a,{className:"loginbtn myDashboardBtn",variant:"contained",fullWidth:!0,size:"large",onClick:function(e){return c.push("/my-contact-list/"+t)},children:"Contacts"})]}),g>=1?Object(n.jsxs)("div",{className:"myChats",children:[Object(n.jsx)("i",{className:"fas fa-comments myChaticon"}),Object(n.jsxs)(v.a,{className:"loginbtn myDashboardBtn",variant:"contained",size:"large",fullWidth:!0,onClick:function(e){return c.push("/mychats/"+t)},children:["Chats",Object(n.jsx)(_.a,{badgeContent:g,className:"msgCounter",color:"Secondary"})]})]}):Object(n.jsxs)("div",{className:"myChats",children:[Object(n.jsx)("i",{className:"fas fa-comments myChaticon"}),Object(n.jsx)(v.a,{className:"loginbtn myDashboardBtn",variant:"contained",fullWidth:!0,size:"large",onClick:function(e){return c.push("/mychats/"+t)},children:"Chats"})]})]}),Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:2})]})]})},W=a(35),B=a(38),z=a(554),J=a(626),U=a(614),H=a(612),G=a(613),Y=a(611),K=a(610),V=a(555),X=a(633),Z=a(617),Q=a(628),$=a(98),ee=a.n($),te=a(145),ae=a.n(te),ne=a(197),se=a.n(ne),ce=a(99),re=a.n(ce),ie=a(148),le=a(618),oe=a(97),de=a.n(oe),ue=a(45),je=a.n(ue),me=a(143),be=a.n(me),ge=a(605),he=a(606),Oe=Object(ge.a)({root:{width:"100%"}});function fe(){var e=Oe(),t=c.a.useState(0),a=Object(o.a)(t,2),s=a[0],r=a[1],i=c.a.useState(10),l=Object(o.a)(i,2),d=l[0],u=l[1],j=c.a.useRef((function(){}));return c.a.useEffect((function(){j.current=function(){if(s>100)r(0),u(10);else{var e=10*Math.random(),t=10*Math.random();r(s+e),u(s+e+t)}}})),c.a.useEffect((function(){var e=setInterval((function(){j.current()}),500);return function(){clearInterval(e)}}),[]),Object(n.jsx)("div",{className:e.root,children:Object(n.jsx)(he.a,{variant:"buffer",value:s,valueBuffer:d})})}var xe=a(151),pe=a(607),ve=a(318),ye=a.n(ve),Ne=a(319),we=a.n(Ne),Se=a(96),Ce=a.n(Se),ke=a(320),Me=a.n(ke),Ie=a(321),Re=a.n(Ie),Pe=a(632),Te=a(609),Ee={success:ye.a,warning:Ce.a,error:we.a,info:Me.a},Ae=Object(ge.a)((function(e){return{success:{backgroundColor:xe.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:pe.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}})),_e=function(e){var t=e.type,a=e.message,s=e.autoClose,r=Ae(),i=c.a.useState(!0),l=Object(o.a)(i,2),d=l[0],u=l[1],j=function(e,t){"clickaway"!==t&&u(!1)},m=Ee[t];return Object(n.jsx)(Pe.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:d,autoHideDuration:s,onClose:j,children:Object(n.jsx)(Te.a,{className:Object(B.a)(r[t]),"aria-describedby":"client-snackbar",message:Object(n.jsxs)("span",{id:"client-snackbar",className:r.message,children:[Object(n.jsx)(m,{className:Object(B.a)(r.icon,r.iconVariant)}),a]}),action:[Object(n.jsx)(K.a,{"aria-label":"close",color:"inherit",onClick:j,children:Object(n.jsx)(Re.a,{className:r.icon})},"close")]})})},Le=a(615),De=a(616),Fe=a(39),qe=a.n(Fe),We=a(59);I.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token");var Be=function(){var e=Object(We.a)(qe.a.mark((function e(t){var a;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{headers:{"Content-Type":"application/json"}},e.next=3,I.a.post("http://localhost:5000/api/users/signup",t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(We.a)(qe.a.mark((function e(t){var a;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{headers:{"Content-Type":"application/json"}},e.next=3,I.a.post("http://localhost:5000/api/users/login",t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(e){var t=e.name;return Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,sm:2,xm:5,md:4}),Object(n.jsx)(p.a,{item:!0,xs:10,sm:8,xm:2,md:6,children:Object(n.jsxs)(L.a,{variant:"headline",style:{marginTop:"1rem",position:"relative",fontSize:"5rem",color:D.a[300],marginBottom:"1rem",fontFamily:"Brush Script MT, Brush Script Std, cursive"},component:"h1",children:[Object(n.jsx)("img",{className:"loginImg",src:"/images/logo.png"}),t]})}),Object(n.jsx)(p.a,{item:!0,xs:1,sm:2,xm:5,md:2})]})},Ue=Object(ge.a)((function(e){return{textfield:{marginTop:e.spacing(2.5)},margin:{marginTop:e.spacing(2.5)}}})),He=function(){var e=Ue(),t=Object(u.g)();Object(s.useEffect)((function(){(O()&&1===O().role||O()&&0===O().role)&&t.push("/dashboard")}),[t]);var a=Object(s.useState)({firstName:"",lastName:"",email:"",gender:"",password:"",confirmPassword:"",errorMessage:"",successMsg:"",showPassword:!1,showPassword1:!1,loading:!1}),c=Object(o.a)(a,2),r=c[0],i=c[1],j=r.firstName,m=r.lastName,b=r.email,g=r.gender,h=r.password,f=r.confirmPassword,x=r.errorMessage,y=r.successMsg,N=r.loading,w=function(e){return function(t){var a;i(Object(l.a)(Object(l.a)({},r),{},(a={},Object(W.a)(a,e,t.target.value),Object(W.a)(a,"errorMessage",""),Object(W.a)(a,"successMsg",""),a)))}},S=function(){i(Object(l.a)(Object(l.a)({},r),{},{showPassword:!r.showPassword}))},C=function(){i(Object(l.a)(Object(l.a)({},r),{},{showPassword1:!r.showPassword1}))},k=function(e){e.preventDefault()},M=function(e){var t;i(Object(l.a)(Object(l.a)({},r),{},(t={},Object(W.a)(t,e.target.name,e.target.value),Object(W.a)(t,"errorMessage",""),Object(W.a)(t,"successMsg",""),t)))},I=function(e){if(e.preventDefault(),je()(j)||je()(m)||je()(b)||je()(h)||je()(f)||je()(g))i(Object(l.a)(Object(l.a)({},r),{},{errorMessage:"All fields are required"}));else if(de()(b))if(be()(h,f)){var t={firstName:r.firstName,lastName:r.lastName,email:r.email,password:r.password,gender:r.gender};i(Object(l.a)(Object(l.a)({},r),{},{loading:!0})),Be(t).then((function(e){i(Object(l.a)(Object(l.a)({},r),{},{firstName:"",lastName:"",email:"",password:"",confirmPassword:"",gender:"",errorMessage:!1,successMsg:e.data.successMessage,loading:!1}))})).catch((function(e){console.log(e),i(Object(l.a)(Object(l.a)({},r),{},{loading:!1,errorMessage:e.response.data.errorMessage}))}))}else i(Object(l.a)(Object(l.a)({},r),{},{errorMessage:"Password do not matched"}));else i(Object(l.a)(Object(l.a)({},r),{},{errorMessage:"Invalid Email"}))};return Object(n.jsxs)("div",{className:"signup_div",children:[N&&Object(n.jsx)(fe,{}),x&&Object(n.jsx)(_e,{type:"error",message:x,autoClose:4e3}),y&&Object(n.jsx)(_e,{type:"success",message:y,autoClose:4e3}),Object(n.jsx)(Je,{className:"title",name:"TalkSee"}),Object(n.jsx)("div",{className:"signup-container",children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(p.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(z.a,{className:"Login-container",style:{padding:"30px 30px"},children:[Object(n.jsxs)(p.a,{container:!0,style:{textAlign:"center"},children:[Object(n.jsx)(p.a,{item:!0,xs:6,children:Object(n.jsx)(d.b,{className:"header",to:"/login",children:"Sign In"})}),Object(n.jsx)(p.a,{item:!0,xs:6,children:Object(n.jsx)(d.b,{className:"active-header",to:"/signup",children:"Sign Up"})})]}),Object(n.jsx)(J.a,{className:e.textfield,id:"filled-start-adornment",value:r.firstName,label:Object(n.jsxs)("div",{children:[Object(n.jsx)(L.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" firstName "}),Object(n.jsx)(L.a,{variant:"headline",style:{color:"red"},children:"*"})]}),name:"firstName",fullWidth:!0,onChange:M,InputProps:{startAdornment:Object(n.jsx)(U.a,{position:"start",children:Object(n.jsx)(se.a,{style:{color:ie.a[600]}})})}}),Object(n.jsx)(J.a,{className:e.textfield,id:"filled-start-adornment1",value:r.lastName,label:Object(n.jsxs)("div",{children:[Object(n.jsx)(L.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" lastName "}),Object(n.jsx)(L.a,{variant:"headline",style:{color:"red"},children:"*"})]}),name:"lastName",fullWidth:!0,onChange:M,InputProps:{startAdornment:Object(n.jsx)(U.a,{position:"start",children:Object(n.jsx)(se.a,{style:{color:ie.a[600]}})})}}),Object(n.jsx)(J.a,{className:e.textfield,label:Object(n.jsxs)("div",{children:[Object(n.jsx)(L.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Email Address "}),Object(n.jsx)(L.a,{variant:"headline",style:{color:"red"},children:"*"})]}),id:"filled-start-adornment1",name:"email",value:r.email,fullWidth:!0,onChange:M,InputProps:{startAdornment:Object(n.jsx)(U.a,{position:"start",children:Object(n.jsx)(ee.a,{style:{color:ie.a[600]}})})}}),Object(n.jsxs)(H.a,{className:Object(B.a)(e.margin,e.textField),fullWidth:!0,children:[Object(n.jsxs)(G.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(L.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Password"}),Object(n.jsx)(L.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(Y.a,{id:"standard-adornment-password",type:r.showPassword?"text":"password",name:"password",value:r.password,onChange:w("password"),startAdornment:Object(n.jsx)(U.a,{position:"start",children:Object(n.jsx)(ae.a,{style:{color:ie.a[600]}})}),endAdornment:Object(n.jsx)(U.a,{position:"end",children:Object(n.jsx)(K.a,{"aria-label":"toggle password visibility",onClick:S,onMouseDown:k,children:r.showPassword?Object(n.jsx)(Le.a,{}):Object(n.jsx)(De.a,{})})})})]}),Object(n.jsxs)(H.a,{className:Object(B.a)(e.margin,e.textField),fullWidth:!0,children:[Object(n.jsxs)(G.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(L.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Confirm Password"}),Object(n.jsx)(L.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(Y.a,{id:"standard-adornment-confirmPassword",type:r.showPassword1?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:w("confirmPassword"),startAdornment:Object(n.jsx)(U.a,{position:"start",children:Object(n.jsx)(re.a,{style:{color:ie.a[600]}})}),endAdornment:Object(n.jsx)(U.a,{position:"end",children:Object(n.jsx)(K.a,{"aria-label":"toggle password visibility",onClick:C,onMouseDown:k,children:r.showPassword1?Object(n.jsx)(Le.a,{}):Object(n.jsx)(De.a,{})})})})]}),Object(n.jsxs)(H.a,{component:"fieldset",className:e.margin,children:[Object(n.jsxs)(V.a,{component:"legend",children:[Object(n.jsx)(L.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic",fontSize:"0.9rem",marginLeft:"0.4rem"},children:" Gender"}),Object(n.jsx)(L.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsxs)(X.a,{"aria-label":"gender",name:"gender1",style:{display:"initial",marginLeft:"4rem"},value:r.gender,onChange:w("gender"),children:[Object(n.jsx)(Z.a,{value:"female",control:Object(n.jsx)(Q.a,{style:{color:le.a[900]}}),label:"Female"}),Object(n.jsx)(Z.a,{value:"male",control:Object(n.jsx)(Q.a,{style:{color:le.a[900]}}),label:"Male"}),Object(n.jsx)(Z.a,{value:"other",control:Object(n.jsx)(Q.a,{style:{color:le.a[900]}}),label:"Other"})]})]}),Object(n.jsx)(v.a,{style:{color:ie.a[50],backgroundColor:le.a[600],fontWeight:"bold",borderRadius:"1rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:I,children:"Next"})]})}),Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4})]})})]})},Ge=function(e,t){switch(t.type){case"updatePermission":return{state:t.value};default:return e}},Ye=Object(s.createContext)(),Ke=function(e){var t=Object(s.useReducer)(Ge,"1",(function(){var e=localStorage.getItem("deletion");return e?JSON.parse(e):""})),a=Object(o.a)(t,2),c=a[0],r=a[1];return Object(s.useEffect)((function(){localStorage.setItem("deletion",JSON.stringify(c))}),[c]),Object(n.jsx)(Ye.Provider,{value:{deletemsg:c,dispatch:r},children:e.children})},Ve=Object(ge.a)((function(e){return{textField:{marginTop:e.spacing(2)},margin:{marginBottom:e.spacing(2)}}})),Xe=function(e){var t=e.onIdSubmit,a=e.setId,r=Object(u.g)(),i=Object(s.useContext)(E),j=(i.setSocket,i.roomJoin,i.messageEvent,i.friendReq),m=i.msgNotify,b=i.acceptRejectCounter,g=Ve(),f=Object(s.useContext)(Ye).dispatch,x=(c.a.useRef(),Object(s.useState)({email:"",password:"",errorMessage:"",showPassword:!1,loading:!1})),y=Object(o.a)(x,2),N=y[0],w=y[1],S=N.email,C=N.password,k=N.errorMessage,M=N.loading,I=function(){w(Object(l.a)(Object(l.a)({},N),{},{showPassword:!N.showPassword}))},R=function(e){e.preventDefault()},P=function(e){var t;w(Object(l.a)(Object(l.a)({},N),{},(t={},Object(W.a)(t,e.target.name,e.target.value),Object(W.a)(t,"errorMessage",""),t)))},T=function(e){if(e.preventDefault(),je()(S)||je()(C))w(Object(l.a)(Object(l.a)({},N),{},{errorMessage:"Both fields are required"}));else if(de()(S)){w(Object(l.a)(Object(l.a)({},N),{},{loading:!0}));var n=N.email,s=N.password;ze({email:n,password:s}).then((function(e){h(e.data.token,e.data.user),O()&&O().role,r.push("/dashboard/"+O()._id),w(Object(l.a)(Object(l.a)({},N),{},{loading:!1})),a(O()._id),""==JSON.parse(localStorage.getItem("deletion"))&&f({type:"updatePermission",value:!1}),m(),b(),j()})).catch((function(e){w(Object(l.a)(Object(l.a)({},N),{},{password:"",loading:!1,errorMessage:e.response.data.errorMessage}))})),t(n),console.log("email",n)}else w(Object(l.a)(Object(l.a)({},N),{},{errorMessage:"Invalid Email"}))};return Object(n.jsxs)("div",{className:"login_div",children:[M&&Object(n.jsx)(fe,{}),Object(n.jsx)(Je,{className:"title",name:"TalkSee"}),function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(p.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(z.a,{className:"Login-container",style:{padding:"30px 50px"},children:[Object(n.jsxs)(p.a,{container:!0,style:{textAlign:"center"},children:[Object(n.jsx)(p.a,{item:!0,xs:6,children:Object(n.jsx)(d.b,{className:"active-header",to:"/login",children:"Sign In"})}),Object(n.jsx)(p.a,{item:!0,xs:6,children:Object(n.jsx)(d.b,{className:"header",to:"/signup",children:"Sign Up"})})]}),Object(n.jsx)(J.a,{className:g.textField,style:{marginTop:"2rem"},label:Object(n.jsxs)("div",{children:[Object(n.jsx)(L.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Email Address "}),Object(n.jsx)(L.a,{variant:"headline",style:{color:"red"},children:"*"})]}),id:"email-field",name:"email",value:N.email,fullWidth:!0,onChange:P,InputProps:{startAdornment:Object(n.jsx)(U.a,{position:"start",children:Object(n.jsx)(ee.a,{style:{color:ie.a[600]}})})}}),Object(n.jsxs)(H.a,{className:Object(B.a)(g.margin,g.textField),fullWidth:!0,children:[Object(n.jsxs)(G.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(L.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Password"}),Object(n.jsx)(L.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(Y.a,{id:"standard-adornment-password",type:N.showPassword?"text":"password",name:"password",value:N.password,onChange:(e="password",function(t){var a;w(Object(l.a)(Object(l.a)({},N),{},(a={},Object(W.a)(a,e,t.target.value),Object(W.a)(a,"errorMessage",""),a)))}),startAdornment:Object(n.jsx)(U.a,{position:"start",children:Object(n.jsx)(re.a,{style:{color:ie.a[600]}})}),endAdornment:Object(n.jsx)(U.a,{position:"end",children:Object(n.jsx)(K.a,{"aria-label":"toggle password visibility",onClick:I,onMouseDown:R,children:N.showPassword?Object(n.jsx)(Le.a,{}):Object(n.jsx)(De.a,{})})})})]}),Object(n.jsx)(v.a,{style:{color:ie.a[50],backgroundColor:le.a[600],fontWeight:"bold",borderRadius:"1rem",marginBottom:"1.2rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:T,children:"Sign in"}),Object(n.jsx)(d.b,{to:"/forgot-password",style:{textDecoration:"none",marginLeft:"1rem auto"},children:"Forgot Password?"})]})}),Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4})]})});var e}(),k&&Object(n.jsx)(_e,{type:"error",message:k,autoClose:4e3})]})},Ze=new(function(e){Object(C.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).accountActivation=function(t){return e.post("users/activation",t)},e.forgotPassword=function(t){return e.put("users/forgot-password",t)},e.resetPassword=function(t){return e.put("users/reset-password",t)},e.profileSetup=function(t){return e.post("users/profile-setup",t)},e.updateProfileSetup=function(t,a){return e.put("users/update-profile-setup/"+t,a)},e.getMyAccount=function(t){return e.get("users/my-account/"+t)},e.deleteMyAccount=function(t){return e.delete("users/delete-my-account/"+t)},e}return a}(R)),Qe=a(198),$e=a.n(Qe),et=a(150),tt=a(322),at=a.n(tt),nt=a(323),st=a.n(nt),ct=function(e){var t=e.match,a=t.params.token,c=Object(s.useState)({firstName:"",lastName:"",token:"",errorMessage:"",successMsg:""}),r=Object(o.a)(c,2),i=r[0],d=r[1],j=i.firstName,m=i.lastName,b=(i.token,i.errorMessage),g=i.successMsg,h=Object(u.g)();Object(s.useEffect)((function(){var e=t.params.token,a=$e.a.decode(e).firstName,n=$e.a.decode(e).lastName;e&&(d(Object(l.a)(Object(l.a)({},i),{},{firstName:a,lastName:n,token:e})),Ze.accountActivation({token:e}).then((function(e){d(Object(l.a)(Object(l.a)({},i),{},{errorMessage:!1,successMsg:e.successMessage,firstName:e.firstName,lastName:e.lastName}))})).catch((function(e){d(Object(l.a)(Object(l.a)({},i),{},{successMsg:!1,errorMessage:e.response.data.errorMessage,firstName:e.response.data.firstName,lastName:e.response.data.lastName}))})))}),[t.params]);return Object(n.jsxs)("div",{children:[Object(n.jsx)(F,{name:"Activation"}),b&&Object(n.jsx)("div",{children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsxs)(p.a,{item:!0,xs:1,sm:3,md:4,children:[Object(n.jsx)("p",{children:Object(n.jsxs)("strong",{children:["Hi ",j+" "+m]})}),Object(n.jsxs)("div",{children:["  ",Object(n.jsx)(st.a,{style:{color:et.a[600]}}),Object(n.jsxs)("span",{style:{fontSize:"1.3rem"},children:[" ",Object(n.jsx)("strong",{children:b})," "]})]}),Object(n.jsx)(v.a,{style:{color:ie.a[50],backgroundColor:le.a[600],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},variant:"contained",className:"loginbtn",onClick:function(e){return h.push("/signup")},children:"Try  Again"})]}),Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4})]})}),g&&Object(n.jsx)("div",{children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsxs)(p.a,{item:!0,xs:1,sm:3,md:4,children:[Object(n.jsx)("p",{children:Object(n.jsxs)("strong",{children:["Hi ",j+" "+m]})}),Object(n.jsxs)("div",{children:["  ",Object(n.jsx)(at.a,{style:{color:xe.a[600],paddingTop:"0.3rem"}}),Object(n.jsx)("span",{style:{fontSize:"1.3rem"},children:" Your account has been successfully verified. Click below to create your profile"})]}),Object(n.jsx)(v.a,{style:{color:ie.a[50],backgroundColor:le.a[600],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},variant:"contained",className:"loginbtn",onClick:function(e){return h.push("/profile-setup/"+a)},children:"Create Profile"})]}),Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4})]})})]})},rt=function(){return Object(n.jsx)("div",{style:{marginTop:"10rem"},children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsxs)(p.a,{item:!0,xs:10,sm:6,md:4,children:[Object(n.jsx)("h1",{children:" Error 404"}),Object(n.jsx)("h5",{style:{marginLeft:"2rem"},children:"Page Not Found"})]}),Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4})]})})},it=a(149),lt=a(82),ot=a.n(lt),dt=function(){var e=Object(s.useState)({email:"",errorMessage:"",successMsg:"",loading:!1}),t=Object(o.a)(e,2),a=t[0],c=t[1],r=a.email,i=a.successMsg,d=a.errorMessage,u=a.loading,j=function(e){var t;c(Object(l.a)(Object(l.a)({},a),{},(t={},Object(W.a)(t,e.target.name,e.target.value),Object(W.a)(t,"errorMessage",""),Object(W.a)(t,"successMsg",""),t)))},m=function(e){if(e.preventDefault(),je()(r))c(Object(l.a)(Object(l.a)({},a),{},{errorMessage:"Field is required"}));else if(de()(r)){var t=a.email;c(Object(l.a)(Object(l.a)({},a),{},{loading:!0})),Ze.forgotPassword({email:t}).then((function(e){c(Object(l.a)(Object(l.a)({},a),{},{email:"",errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){c(Object(l.a)(Object(l.a)({},a),{},{loading:!1,email:"",successMsg:!1,errorMessage:e.response.data.errorMessage}))}))}else c(Object(l.a)(Object(l.a)({},a),{},{errorMessage:"Invalid Email  syntax"}))};return Object(n.jsxs)("div",{children:[u&&Object(n.jsx)(fe,{}),Object(n.jsx)(F,{name:"Forgot Password"}),d&&Object(n.jsx)(_e,{type:"error",message:d,autoClose:4e3}),i&&Object(n.jsx)(_e,{type:"success",message:i,autoClose:4e3}),Object(n.jsx)("div",{children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(p.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(z.a,{style:{padding:"30px 50px"},children:[Object(n.jsxs)(v.a,{className:"loginbtn",href:"/login",color:"primary",style:{marginBottom:"2rem",paddingLeft:"0rem",color:it.a[800]},children:[Object(n.jsx)(ot.a,{style:{fontWeight:"bold",marginRight:"0.3rem"}})," Go Back"]}),Object(n.jsx)(J.a,{label:Object(n.jsxs)("div",{children:[Object(n.jsx)(L.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Email Address "}),Object(n.jsx)(L.a,{variant:"headline",style:{color:"red"},children:"*"})]}),id:"filled-start-adornment1",variant:"outlined",name:"email",value:a.email,fullWidth:!0,onChange:j,InputProps:{startAdornment:Object(n.jsx)(U.a,{position:"start",children:Object(n.jsx)(ee.a,{style:{color:ie.a[600]}})})}}),Object(n.jsx)(v.a,{style:{color:ie.a[50],backgroundColor:le.a[600],fontWeight:"bold",borderRadius:"12rem",marginTop:"1.5rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:m,children:"Submit"})]})}),Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4})]})})]})},ut=Object(ge.a)((function(e){return{textfield:{margin:e.spacing(1)},margin:{marginTop:"1.2rem"}}})),jt=function(e){var t=e.match,a=ut(),c=Object(u.g)(),r=Object(s.useState)({token:"",password:"",confirmPassword:"",errorMessage:"",successMsg:"",showPassword:!1,showPassword1:!1,loading:!1}),i=Object(o.a)(r,2),d=i[0],j=i[1],m=d.token,b=d.password,g=d.confirmPassword,h=d.errorMessage,O=d.successMsg,f=d.loading;Object(s.useEffect)((function(){var e=t.params.token;e&&j(Object(l.a)(Object(l.a)({},d),{},{token:e}))}),[]);var x=function(e){e.preventDefault()},y=function(e){return function(t){var a;j(Object(l.a)(Object(l.a)({},d),{},(a={},Object(W.a)(a,e,t.target.value),Object(W.a)(a,"errorMessage",""),Object(W.a)(a,"successMsg",""),a)))}},N=function(){j(Object(l.a)(Object(l.a)({},d),{},{showPassword:!d.showPassword}))},w=function(){j(Object(l.a)(Object(l.a)({},d),{},{showPassword1:!d.showPassword1}))},S=function(e){e.preventDefault(),je()(b)||je()(g)?j(Object(l.a)(Object(l.a)({},d),{},{errorMessage:"All fields are required"})):be()(b,g)?(j(Object(l.a)(Object(l.a)({},d),{},{loading:!0})),Ze.resetPassword({newPassword:b,resetPasswordLink:m}).then((function(e){j(Object(l.a)(Object(l.a)({},d),{},{password:"",confirmPassword:"",errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){j(Object(l.a)(Object(l.a)({},d),{},{password:"",confirmPassword:"",loading:!1,errorMessage:e.response.data.errorMessage}))}))):j(Object(l.a)(Object(l.a)({},d),{},{errorMessage:"Passwords do not match"}))};return Object(n.jsxs)("div",{children:[f&&Object(n.jsx)(fe,{}),h&&Object(n.jsx)(_e,{type:"error",message:h,autoClose:4e3}),O&&Object(n.jsx)(_e,{type:"success",message:O,autoClose:4e3}),Object(n.jsx)(F,{name:"Reset Password"}),Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(p.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(z.a,{style:{padding:"30px 50px"},children:[Object(n.jsxs)(v.a,{className:"loginbtn",href:"https://mail.google.com/mail/u/0/#inbox",color:"primary",style:{marginBottom:"2rem",paddingLeft:"0rem",color:it.a[800]},children:[Object(n.jsx)(ot.a,{style:{fontWeight:"bold",marginRight:"0.3rem"}})," Go Back"]}),Object(n.jsxs)(H.a,{className:Object(B.a)(a.textField),fullWidth:!0,children:[Object(n.jsxs)(G.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(L.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" New Password"}),Object(n.jsx)(L.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(Y.a,{id:"standard-adornment-password",type:d.showPassword?"text":"password",name:"password",value:d.password,onChange:y("password"),startAdornment:Object(n.jsx)(U.a,{position:"start",children:Object(n.jsx)(ae.a,{style:{color:ie.a[600]}})}),endAdornment:Object(n.jsx)(U.a,{position:"end",children:Object(n.jsx)(K.a,{"aria-label":"toggle password visibility",onClick:N,onMouseDown:x,children:d.showPassword?Object(n.jsx)(Le.a,{}):Object(n.jsx)(De.a,{})})})})]}),Object(n.jsxs)(H.a,{className:Object(B.a)(a.margin,a.textField),fullWidth:!0,children:[Object(n.jsxs)(G.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(L.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Confirm Password"}),Object(n.jsx)(L.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(Y.a,{id:"standard-adornment-confirmPassword",type:d.showPassword1?"text":"password",name:"confirmPassword",value:d.confirmPassword,onChange:y("confirmPassword"),startAdornment:Object(n.jsx)(U.a,{position:"start",children:Object(n.jsx)(re.a,{style:{color:ie.a[600]}})}),endAdornment:Object(n.jsx)(U.a,{position:"end",children:Object(n.jsx)(K.a,{"aria-label":"toggle password visibility",onClick:w,onMouseDown:x,children:d.showPassword1?Object(n.jsx)(Le.a,{}):Object(n.jsx)(De.a,{})})})})]}),Object(n.jsx)(v.a,{style:{color:ie.a[50],backgroundColor:le.a[600],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:S,children:"Reset Password"}),O&&Object(n.jsx)(v.a,{style:{backgroundColor:ie.a[500],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},className:"loginbtn",variant:"outline",fullWidth:!0,onClick:function(e){return c.push("/login")},children:"Login"})]})}),Object(n.jsx)(p.a,{item:!0,xs:1,sm:3,md:4})]})]})},mt=a(115),bt=a(113),gt=a.n(bt),ht=a(114),Ot=a.n(ht),ft=Object(ge.a)({textfield:{marginTop:"2rem"},Submitbtn:{marginTop:"0.6rem"}}),xt=function(e){var t=e.match,a=ft(),r=Object(u.g)(),i=c.a.useRef(null),d=c.a.useState(!1),j=Object(o.a)(d,2),m=j[0],b=j[1],g=[{label:"Afrikaans",value:"af"},{label:"Albanian",value:"sq"},{label:"Amharic",value:"am"},{label:"Arabic",value:"ar"},{label:"Armenian",value:"hy"},{label:"Azerbaijani",value:"az"},{label:"Basque",value:"eu"},{label:"Belarusian",value:"be"},{label:"Bengali",value:"bn"},{label:"Bosnian",value:"bs"},{label:"Bulgarian",value:"bg"},{label:"Catalan",value:"ca"},{label:"Cebuano",value:"ceb"},{label:"Chichewa",value:"ny"},{label:"Chinese",value:"zh-cn"},{label:"Corsican",value:"co"},{label:"Croatian",value:"hr"},{label:"Czech",value:"cs"},{label:"Danish",value:"da"},{label:"Dutch",value:"nl"},{label:"English",value:"en"},{label:"Esperanto",value:"eo"},{label:"Estonian",value:"et"},{label:"Filipino",value:"tl"},{label:"Finnish",value:"fi"},{label:"French",value:"fr"},{label:"Danish",value:"da"},{label:"Frisian",value:"fy"},{label:"Galician",value:"gl"},{label:"Georgian",value:"ka"},{label:"German",value:"de"},{label:"Greek",value:"el"},{label:"Gujarati",value:"gu"},{label:"Haitian creole",value:"ht"},{label:"Hausa",value:"ha"},{label:"Hawaiian",value:"haw"},{label:"Hebrew",value:"iw"},{label:"Hindi",value:"hi"},{label:"Hmong",value:"hmn"},{label:"Hungarian",value:"hu"},{label:"Icelandic",value:"is"},{label:"Igbo",value:"ig"},{label:"Indonesian",value:"id"},{label:"Irish",value:"ga"},{label:"Italian",value:"it"},{label:"Japanese",value:"ja"},{label:"Javanese",value:"jw"},{label:"Kannada",value:"kn"},{label:"Kazakh",value:"kk"},{label:"Khmer",value:"km"},{label:"Korean",value:"ko"},{label:"Kurdish",value:"ku"},{label:"Kyrgyz",value:"ky"},{label:"Lao",value:"lo"},{label:"Latin",value:"la"},{label:"Latvian",value:"lv"},{label:"Lithuanian",value:"lt"},{label:"Luxembourgish",value:"lb"},{label:"Macedonian",value:"mk"},{label:"Malagasy",value:"mg"},{label:"Malay",value:"ms"},{label:"Malayalam",value:"ml"},{label:"Maltese",value:"mt"},{label:"Maori",value:"mi"},{label:"Marathi",value:"mr"},{label:"Mongolian",value:"mn"},{label:"Myanmar (burmese)",value:"my"},{label:"Nepali",value:"ne"},{label:"Norwegian",value:"no"},{label:"Odia",value:"or"},{label:"Pashto",value:"ps"},{label:"Persian",value:"fa"},{label:"Polish",value:"pl"},{label:"Portuguese",value:"pt"},{label:"Punjabi",value:"pa"},{label:"Romanian",value:"ro"},{label:"Russian",value:"ru"},{label:"Samoan",value:"sm"},{label:"Scots gaelic",value:"gd"},{label:"Serbian",value:"sr"},{label:"Sesotho",value:"st"},{label:"Shona",value:"sn"},{label:"Sindhi",value:"sd"},{label:"Sinhala",value:"si"},{label:"Slovak",value:"sk"},{label:"Slovenian",value:"sl"},{label:"Somali",value:"so"},{label:"Spanish",value:"es"},{label:"Sundanese",value:"su"},{label:"Swahili",value:"sw"},{label:"Swedish",value:"sv"},{label:"Tajik",value:"tg"},{label:"Tamil",value:"ta"},{label:"Telugu",value:"te"},{label:"Thai",value:"th"},{label:"Turkish",value:"tr"},{label:"Ukrainian",value:"uk"},{label:"Urdu",value:"ur"},{label:"Uyghur",value:"ug"},{label:"Uzbek",value:"uz"},{label:"Vietnamese",value:"vi"},{label:"Welsh",value:"cy"},{label:"Xhosa",value:"xh"},{label:"Yiddish",value:"yi"},{label:"Yoruba",value:"yo"},{label:"Zulu",value:"zu"}],h=Object(s.useState)({img:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",language:"",token:"",errorMessage:"",successMsg:"",infoMessage:"",loading:!1}),O=Object(o.a)(h,2),f=O[0],x=O[1],p=f.img,y=f.language,N=f.token,w=f.successMsg,S=f.errorMessage,C=f.infoMessage,k=f.loading;Object(s.useEffect)((function(){var e=t.params.token;e&&x(Object(l.a)(Object(l.a)({},f),{},{token:e}))}),[]);var M=function(e){return new Promise((function(t){gt.a.imageFileResizer(e,300,300,"JPEG",100,0,(function(e){t(e)}),"base64")}))},R=c.a.useCallback((function(){try{var e=i.current.getScreenshot();x(Object(l.a)(Object(l.a)({},f),{},{infoMessage:"Picture Captured"}));var t=new FormData;t.append("file",e),I.a.post("http://127.0.0.1:5000/webcam-face-detection",t).then(function(){var a=Object(We.a)(qe.a.mark((function a(n){return qe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:x(Object(l.a)(Object(l.a)({},f),{},{errorMessage:"",successMsg:n.data.successMessage})),x(Object(l.a)(Object(l.a)({},f),{},{infoMessage:"Loading...."})),t.append("file",e),t.append("upload_preset","TalkSee"),fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){return x(Object(l.a)(Object(l.a)({},f),{},{img:e.url}))})).catch((function(e){return console.error("Error:",e)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}catch(a){x(Object(l.a)(Object(l.a)({},f),{},{errorMessage:"error in uploading photo"}))}}),[i]),P=function(){var e=Object(We.a)(qe.a.mark((function e(t){var a,n;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.files[0],(n=new FormData).append("file",a),I.a.post("http://127.0.0.1:5000/",n).then(function(){var e=Object(We.a)(qe.a.mark((function e(t){var s,c,r;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(Object(l.a)(Object(l.a)({},f),{},{errorMessage:"",successMsg:"response.data.successMessage"})),e.next=3,M(a);case 3:return s=e.sent,x(Object(l.a)(Object(l.a)({},f),{},{infoMessage:"Loading...."})),n.append("file",s),n.append("upload_preset","TalkSee"),e.next=9,fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"POST",body:n});case 9:return c=e.sent,e.next=12,c.json();case 12:r=e.sent,x(Object(l.a)(Object(l.a)({},f),{},{img:r.secure_url}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){x(Object(l.a)(Object(l.a)({},f),{},{errorMessage:e.response.data.errorMessage}))}))}catch(s){x(Object(l.a)(Object(l.a)({},f),{},{errorMessage:"error in uploading photo"}))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){Ze.profileSetup({profileImg:p,langPreference:y,token:N}).then((function(e){x(Object(l.a)(Object(l.a)({},f),{},{img:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",language:"",errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){x(Object(l.a)(Object(l.a)({},f),{},{errorMessage:e.response.data.errorMessage}))}))};return Object(n.jsxs)("div",{children:[k&&Object(n.jsx)(fe,{}),Object(n.jsx)(F,{name:"Profile Setup"}),S&&Object(n.jsx)(_e,{type:"error",message:S,autoClose:3e3}),C&&Object(n.jsx)(_e,{type:"info",message:C,autoClose:8e3}),w&&Object(n.jsx)(_e,{type:"success",message:w,autoClose:2500}),Object(n.jsxs)("div",{className:"profile-page",children:[Object(n.jsxs)("div",{className:"profile-container",children:[Object(n.jsx)("div",{className:"img-holder",children:Object(n.jsx)("img",{src:p,className:"profile-img"})}),Object(n.jsx)("input",{type:"file",accept:"image/*",name:"image-upload",id:"input",onChange:P}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("label",{className:"image-upload",htmlFor:"input",children:[Object(n.jsx)("i",{className:"material-icons",children:"add_photo_alternate"}),"Choose Profile Photo"]})}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("button",{className:"take-photo loginbtn","data-toggle":"modal","data-target":"#exampleModalCenter",onClick:function(){return b(!1)},children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Take Photo"]})}),Object(n.jsx)(mt.a,{style:{width:210,padding:"0.4rem"},placeholder:"Select Language ---",value:g.find((function(e){return e.label===y})),className:a.textfield,options:g,onChange:function(e){console.log(e),x(Object(l.a)(Object(l.a)({},f),{},{language:e.value}))}}),Object(n.jsx)(v.a,{style:{color:ie.a[50],backgroundColor:le.a[600],fontWeight:"bold",borderRadius:"0.5rem",marginTop:"1.5rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:T,children:"Set Profile"}),w&&Object(n.jsx)(v.a,{style:{backgroundColor:ie.a[500],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},className:"loginbtn",variant:"outline",fullWidth:!0,onClick:function(e){return r.push("/login")},children:"Login"})]}),Object(n.jsx)("div",{className:"modal fade",id:"exampleModalCenter",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsxs)("div",{className:"modal-title",children:[Object(n.jsx)("h3",{id:"exampleModalLongTitle",children:"Take Photo"}),Object(n.jsx)("p",{style:{color:"red"},children:Object(n.jsx)("i",{children:"Your picture's quality will be low"})})]}),Object(n.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsx)("div",{className:"webcam-container",children:Object(n.jsx)(Ot.a,{audio:!1,height:200,width:460,ref:i,screenshotFormat:"image/jpeg"})})}),m?Object(n.jsx)("div",{className:"modal-footer",children:Object(n.jsx)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",children:"Close"})}):Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsxs)("button",{className:"take-photo loginbtn",onClick:R,children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Capture photo"]})," "]})]})})})]})]})},pt=a(630),vt=a(619),yt=function(e){var t=e.contact,a="/"+t._id,c=(Object(u.g)(),JSON.parse(localStorage.getItem("user"))),r=Object(s.useState)(!c.sentRequests.includes(t._id)),i=Object(o.a)(r,2),l=i[0],d=i[1],j=Object(s.useContext)(E).clientSocket,m=O()._id,b=O().firstName+" "+O().lastName,g=O().profileImg,h=O().email,f=O().gender,x=O().langPreference;return Object(n.jsx)("div",{children:Object(n.jsx)(z.a,{style:{padding:"10px 20px",marginBottom:"1rem"},children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsxs)(p.a,{item:!0,xs:3,md:1,children:["  ",Object(n.jsx)("img",{src:t.profileImg,style:{height:"60px",width:"60px",borderRadius:"20%",display:"inline"},alt:"img"})," "]}),Object(n.jsx)(p.a,{item:!0,xs:9,md:9,children:Object(n.jsxs)("div",{style:{display:"inline"},children:[Object(n.jsx)("p",{className:"user_names",children:t.firstName+" "+t.lastName}),Object(n.jsx)(L.a,{style:{color:"gray",fontStyle:"italic",fontSize:"0.9rem"},children:t.email})]})}),Object(n.jsx)(pt.a,{only:["md","lg"],children:Object(n.jsx)(p.a,{item:!0,xs:3})}),Object(n.jsx)(p.a,{item:!0,xs:9,md:2,children:l?Object(n.jsx)(v.a,{className:"loginbtn",style:{marginTop:"0.7rem",backgroundColor:vt.a[600],color:"white"},variant:"contained",onClick:function(){console.log("contact Id",t._id),P.sendRequest({friendId:t._id,myId:m,myName:b,myProfileImg:g,myEmail:h,myGender:f,myLangPreference:x}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),d(!1)})).catch((function(e){console.log(e)})),j.emit("friendRequest",{myName:b,roomId:a},(function(e){e?console.log(e):console.log("emitted event")}))},children:"Add friend"}):Object(n.jsx)(v.a,{className:"loginbtn",style:{marginTop:"0.7rem",backgroundColor:ie.a[500],color:"white"},variant:"contained",onClick:function(){P.cancelRequest({friendId:t._id,myId:m}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),d(!0)})).catch((function(e){console.log(e)})),j.emit("rejectfriendRequest",{myName:b,roomId:a},(function(e){e?console.log(e):console.log("emitted event")}))},children:"Requested"})})]})})})},Nt=new(function(e){Object(C.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getAllContact=function(){return e.get("contacts/getContact")},e.getSingleContact=function(t){return e.get("contacts/get-contact/"+t)},e}return a}(R)),wt=a(70),St=a.n(wt),Ct=Object(u.h)((function(e){var t=e.history;t=Object(u.g)();var a=O()._id,c=O().profileImg,r=O().firstName,i=O().lastName,l=Object(s.useContext)(E),o=(l.clientSocket,l.setSocket,l.messageEvent,l.roomJoin),j=(l.friendReq,l.getRequest),m=l.frndcounter,b=l.msgCounter;return Object(s.useEffect)((function(){j()}),[m]),Object(s.useEffect)((function(){o(a)}),[]),Object(n.jsx)("div",{class:"wrapper",children:Object(n.jsxs)("div",{class:"sidebar",children:[Object(n.jsx)("div",{id:"profile_div",children:Object(n.jsx)("img",{src:c,alt:"Profile",style:{height:"90px",width:"90px",borderRadius:"50%",cursor:"pointer"},onClick:function(){return t.push("/update-my-profile-setup/"+a)}})}),Object(n.jsx)("h4",{children:r+" "+i}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:b>=1?Object(n.jsxs)(d.b,{to:{pathname:"/mychats/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-comments",children:Object(n.jsx)("span",{className:"friendCounter",children:b})})," My Chats"]}):Object(n.jsxs)(d.b,{to:{pathname:"/mychats/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-comments"})," My Chats"]})}),Object(n.jsx)("li",{children:m>=1?Object(n.jsxs)(d.b,{to:{pathname:"/my-contact-list/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-address-book",children:Object(n.jsx)("span",{className:"friendCounter",children:m})})," Contacts"]}):Object(n.jsxs)(d.b,{to:{pathname:"/my-contact-list/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-address-book"})," My Contacts"]})}),Object(n.jsx)("li",{children:Object(n.jsxs)(d.b,{to:{pathname:"/my-account-settings/".concat(a)},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-user-cog"})," Account Settings"]})})]}),Object(n.jsx)("div",{class:"social_media",children:Object(n.jsxs)("button",{className:"btn text-decoration-none btn-link",onClick:function(e){f((function(){t.push("/login")}))},children:[Object(n.jsx)("i",{className:"fas fa-sign-out-alt"})," Logout"]})})]})})})),kt=function(e){var t=e.match,a=O()._id,r=O().email,i=(Object(u.g)(),Object(s.useState)(!1)),l=Object(o.a)(i,2),d=l[0],j=l[1],m=Object(s.useState)(""),b=Object(o.a)(m,2),g=b[0],h=b[1],f=c.a.useState([]),v=Object(o.a)(f,2),y=v[0],w=v[1],S=Object(s.useRef)(),C=Object(s.useRef)();S.current="/"+t.params.id;var k=Object(s.useContext)(E),M=k.setSocket,I=k.roomJoin,R=k.messageEvent,T=k.friendReq;window.onload=function(){T(),R();var e=JSON.parse(localStorage.getItem("user"))._id;I(e),C=N()("http://127.0.0.1:5000"),M((function(e){return(e=C).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:r})})),e}))};return Object(s.useEffect)((function(){P.getSentFriendRequest(a).then((function(e){localStorage.setItem("user",JSON.stringify(e))})).catch((function(e){console.log(e)})),Nt.getSingleContact(a).then((function(e){w(e),j(!0)})).catch((function(e){console.log(e)}))}),[]),Object(s.useEffect)((function(){}),[]),Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(pt.a,{only:["xs","sm"],children:Object(n.jsx)(p.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Ct,{})})}),Object(n.jsx)(pt.a,{only:["md","lg"],children:Object(n.jsx)(p.a,{item:!0,xs:12,children:Object(n.jsx)(x,{})})}),Object(n.jsxs)(p.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)(F,{name:"Add Friend"}),d?Object(n.jsx)("div",{children:0===y.length?Object(n.jsx)("div",{style:{textAlign:"center",fontSize:"1.4rem",padding:"6rem",fontWeight:"bold"},children:"No TalkSee User Found\ud83d\ude1e"}):Object(n.jsx)("div",{children:Object(n.jsxs)(p.a,{container:!0,style:{marginTop:"0.9rem"},children:[Object(n.jsx)(p.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsxs)(p.a,{item:!0,xs:10,md:10,children:[Object(n.jsxs)(p.a,{container:!0,style:{marginBottom:"1rem"},children:[Object(n.jsx)(p.a,{item:!0,xs:0,md:8,children:" "}),Object(n.jsx)(p.a,{item:!0,xs:12,md:4,children:Object(n.jsx)(J.a,{value:g,onChange:function(e){return h(e.currentTarget.value)},placeholder:"Search by typing name",InputProps:{startAdornment:Object(n.jsx)(U.a,{position:"end",children:Object(n.jsx)(St.a,{style:{color:"black",marginRight:"0.4rem",float:"right"}})})}})})]}),y.filter((function(e){return""===g||e.firstName.toLowerCase().startsWith(g.toLowerCase())||e.lastName.toLowerCase().startsWith(g.toLowerCase())?e:void 0})).map((function(e,t){return e._id===a?Object(n.jsx)("div",{}):Object(n.jsx)(yt,{contact:e,roomId:S.current},t)}))]}),Object(n.jsx)(p.a,{item:!0,xs:1,md:1})]})})}):Object(n.jsxs)("div",{class:"d-flex justify-content-center",children:[Object(n.jsx)("strong",{style:{marginRight:"1rem"},children:"Loading..."}),Object(n.jsx)("div",{class:"spinner-border",role:"status"})]})]})]})})},Mt=function(e){var t=e.friendreq,a=e.onAcceptReject,s=O()._id,c=O().firstName+" "+O().lastName,r=O().profileImg,i=O().email,l=O().gender,o=O().langPreference;return Object(n.jsx)("div",{children:Object(n.jsx)(z.a,{style:{padding:"20px 10px",marginBottom:"1rem"},children:Object(n.jsxs)(p.a,{container:!0,style:{display:"flex"},children:[Object(n.jsxs)(p.a,{item:!0,xs:12,sm:12,md:9,children:[Object(n.jsx)("img",{src:t.profileImg,style:{marginRight:"0.5rem",height:"60px",width:"60px",borderRadius:"50%",display:"inline",padding:"0.2rem"},alt:"img"}),Object(n.jsx)("p",{className:"user_names",children:t.name})]}),Object(n.jsxs)(p.a,{item:!0,xs:12,sm:12,md:3,children:[Object(n.jsx)(v.a,{className:"loginbtn",style:{backgroundColor:vt.a[700],color:"white",margin:"0.4rem"},variant:"contained",size:"medium",onClick:function(){P.acceptRequest({friendId:t.id,friendName:t.name,friendProfileImg:t.profileImg,chatId:t.email+"/"+i,friendEmail:t.email,friendGender:t.gender,friendLangPreference:t.langPreference,myId:s,myName:c,myProfileImg:r,myEmail:i,myGender:l,myLangPreference:o}).then((function(e){a(),localStorage.setItem("user",JSON.stringify(e)),console.log(e)})).catch((function(e){console.log(e)}))},children:"Accept"}),Object(n.jsx)(v.a,{className:"loginbtn",style:{backgroundColor:ie.a[600],color:"white"},variant:"contained",onClick:function(){P.rejectRequest({friendId:t.id,myId:s}).then((function(e){a(),localStorage.setItem("user",JSON.stringify(e))})).catch((function(e){console.log(e)}))},children:"Reject"})]})]})})})},It=function(e){var t=e.match,a=O()._id,r=Object(s.useState)(!1),i=Object(o.a)(r,2),l=i[0],d=i[1],j=c.a.useState([]),m=Object(o.a)(j,2),b=m[0],g=m[1],h=Object(s.useState)(""),f=Object(o.a)(h,2),v=f[0],y=f[1],w=Object(s.useRef)(),S=O().email,C=Object(s.useContext)(E),k=C.setSocket,M=C.roomJoin,I=C.messageEvent,R=C.friendReq,T=C.getRequest,A=C.acceptRejectCounter;Object(s.useRef)().current="/"+t.params.id;Object(u.g)();window.onload=function(){R(),I(),T();var e=JSON.parse(localStorage.getItem("user"))._id;M(e),w=N()("http://127.0.0.1:5000"),k((function(e){return(e=w).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:S.current})})),e}))};var _=function(){P.getFriendRequest(a).then((function(e){g(e),d(!0),A()})).catch((function(e){console.log(e)}))};return Object(s.useEffect)(_,[]),Object(s.useEffect)((function(){}),[]),Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(pt.a,{only:["xs","sm"],children:Object(n.jsx)(p.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Ct,{})})}),Object(n.jsx)(pt.a,{only:["md","lg"],children:Object(n.jsx)(p.a,{item:!0,xs:12,children:Object(n.jsx)(x,{})})}),Object(n.jsxs)(p.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)(F,{name:"Friend Requests"}),l?Object(n.jsxs)("div",{children:[" ",0===b.length?Object(n.jsx)("div",{style:{textAlign:"center",fontSize:"1.4rem",padding:"6rem",fontWeight:"bold"},children:"You have no friend request\ud83d\ude1e"}):Object(n.jsx)("div",{children:Object(n.jsxs)(p.a,{container:!0,style:{marginTop:"0.9rem"},children:[Object(n.jsx)(p.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsxs)(p.a,{item:!0,xs:10,md:10,children:[Object(n.jsxs)(p.a,{container:!0,style:{marginBottom:"1rem"},children:[Object(n.jsx)(p.a,{item:!0,xs:0,md:7,children:" "}),Object(n.jsx)(p.a,{item:!0,xs:12,md:5,children:Object(n.jsx)(J.a,{value:v,onChange:function(e){return y(e.currentTarget.value)},placeholder:"Search by typing name",InputProps:{startAdornment:Object(n.jsx)(U.a,{position:"end",children:Object(n.jsx)(St.a,{style:{color:"black",marginRight:"0.4rem",float:"right"}})})}})})]}),b.filter((function(e){return""==v||e.name.toLowerCase().startsWith(v.toLowerCase())?e:void 0})).map((function(e,t){return Object(n.jsx)(Mt,{friendreq:e,onAcceptReject:_},t)}))]}),Object(n.jsx)(p.a,{item:!0,xs:1,md:10})]})})]}):Object(n.jsxs)("div",{class:"d-flex justify-content-center",children:[Object(n.jsx)("strong",{style:{marginRight:"1rem"},children:"Loading..."}),Object(n.jsx)("div",{class:"spinner-border",role:"status"})]})]})]})})},Rt=a(620),Pt=a(631),Tt=a(624),Et=a(622),At=a(623),_t=a(621),Lt=function(e){var t=e.friend,a=e.onRemove,s=(e.chatRec,c.a.useState(!1)),r=Object(o.a)(s,2),i=r[0],l=r[1],d=c.a.useState(),j=Object(o.a)(d,2),m=j[0],b=j[1],g=O()._id,h=t.email,f=function(){l(!1)},x=Object(u.g)();return Object(n.jsx)(z.a,{style:{padding:"20px 10px",marginBottom:"1rem"},children:Object(n.jsxs)(p.a,{container:!0,style:{display:"flex"},children:[Object(n.jsxs)(p.a,{item:!0,xs:12,sm:12,md:9,children:[Object(n.jsx)("img",{src:t.profileImg,style:{marginRight:"0.5rem",height:"60px",width:"60px",borderRadius:"20%",display:"inline",padding:"0.2rem"},alt:"img"}),Object(n.jsx)("p",{className:"user_names",children:t.name})]}),Object(n.jsxs)(p.a,{item:!0,xs:12,sm:12,md:3,children:[Object(n.jsx)(v.a,{className:"loginbtn",style:{backgroundColor:Rt.a[700],color:"white",margin:"0.4rem"},variant:"contained",size:"medium",onClick:function(){return e=t,console.log("Fr",e),console.log("pth","/chat/"+h+"/ "+e.id),localStorage.setItem("friendId",e.id),localStorage.setItem("recName",e.name),localStorage.setItem("recLang",e.langPreference),localStorage.setItem("profileUrl",e.profileImg),void x.push("/chat/"+h+" "+e.id);var e},children:"Chat"}),Object(n.jsx)(v.a,{className:"loginbtn",onClick:function(){return e=t,l(!0),b(e),void console.log(e);var e},style:{backgroundColor:et.a[400],color:"white"},variant:"contained",children:"Remove"})]}),i?Object(n.jsxs)(Pt.a,{open:i,onClose:f,"aria-labelledby":"form-dialog-title",children:[Object(n.jsxs)(_t.a,{id:"form-dialog-title",children:[Object(n.jsx)(Ce.a,{style:{color:"red",marginRight:"0.3rem",paddingBottom:"0.3rem"}}),Object(n.jsx)("p",{style:{fontWeight:"bold",display:"inline"},children:"Remove Friend Warning"})]}),Object(n.jsxs)(Et.a,{children:[Object(n.jsxs)(At.a,{children:[Object(n.jsx)("strong",{children:t.name}),"  will no longer be your friend. Are you sure you want to continue?"]}),Object(n.jsx)("hr",{})]}),Object(n.jsxs)(Tt.a,{style:{padding:"0rem 1rem 1rem 1rem"},children:[Object(n.jsx)(v.a,{onClick:f,style:{backgroundColor:"gray",color:"white"},children:"Cancel"}),Object(n.jsx)(v.a,{onClick:function(){return function(e){P.deleteFriend({friendId:e.id,myId:g}).then((function(e){l(!1),a(),localStorage.setItem("user",JSON.stringify(e))})).catch((function(e){console.log(e)}))}(m)},style:{backgroundColor:"#0e7be9",color:"white"},children:"Yes,Continue"})]})]}):null]})})},Dt=new(function(e){Object(C.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getUsers=function(){return e.get("users")},e.getUserByEmail=function(t){return e.post("users/userbyemail",t)},e.getUserNameByEmail=function(t){return e.get("users/usernamebyemail/"+t)},e}return a}(R)),Ft=Object(s.createContext)();function qt(e){var t=e.userId,a=e.children,c=Object(s.useState)([]),r=Object(o.a)(c,2),i=r[0],l=r[1],d=[],u=[],j=[],m=[],b=[],g=[];Object(s.useEffect)((function(){void 0!==t&&h(t,void 0),console.log("undefined")}),[t]);var h=function(e){return d=[],m=[],u=[],j=[],g=[],b=[],T.getChatRecipients(e).then((function(t){t.length>0?(t.map((function(e){return d.push(e)})),console.log("rec data",d),d=Array.from(new Set(d)),console.log("rec data updated",d),l((function(e){return e.Rname=d,e})),i.Rname.map((function(t){T.getLastMsg(e,t).then((function(e){u.push(e.lastMsg),j.push(e.type)})).catch((function(e){return console.log(e)})),Dt.getUserByEmail(t).then((function(e){b.push(e[0]._id),g.push(e[0].profileImg),m.push(e[0].firstName+" "+e[0].lastName),l((function(e){return e.lastMsg=u,e.msgType=j,e.recId=b,e.imgUrl=g,e.name=m,console.log(i),e}))})).catch((function(e){return console.log(e)}))}))):console.log("no data")})).catch((function(e){return console.log(e)})),i},O={chatRecipients:i,getRecData:h,setRecipients:l};return Object(n.jsx)(Ft.Provider,{value:O,children:a})}var Wt=function(e){var t=O()._id,a=Object(s.useState)(!1),r=Object(o.a)(a,2),i=r[0],l=r[1],d=c.a.useState([]),j=Object(o.a)(d,2),m=j[0],b=j[1],g=(Object(u.g)(),Object(s.useState)("")),h=Object(o.a)(g,2),f=h[0],v=h[1],y=Object(s.useRef)(),w=Object(s.useContext)(E),S=w.setSocket,C=w.roomJoin,k=w.messageEvent,M=w.friendReq,I=Object(s.useRef)();I.current=JSON.parse(localStorage.getItem("user")).email,window.onload=function(){M(),k();var e=JSON.parse(localStorage.getItem("user"))._id;C(e),y=N()("http://127.0.0.1:5000"),S((function(e){return(e=y).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:I.current})})),e}))};var R=function(){P.getAllFriends(t).then((function(e){b(e),l(!0)})).catch((function(e){console.log(e)}))};return Object(s.useEffect)((function(){R()}),[]),Object(s.useEffect)((function(){}),[]),Object(s.useEffect)((function(){}),[]),Object(s.useEffect)((function(){}),[]),Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(pt.a,{only:["xs","sm"],children:Object(n.jsx)(p.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Ct,{})})}),Object(n.jsx)(pt.a,{only:["md","lg"],children:Object(n.jsx)(p.a,{item:!0,xs:12,children:Object(n.jsx)(x,{})})}),Object(n.jsxs)(p.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)(F,{name:"My Friends"}),i?Object(n.jsxs)("div",{children:[" ",0===m.length?Object(n.jsx)("div",{style:{textAlign:"center",fontSize:"1.4rem",padding:"6rem",fontWeight:"bold"},children:"You have no TalkSee Friend\ud83d\ude1e"}):Object(n.jsx)("div",{children:Object(n.jsxs)(p.a,{container:!0,style:{marginTop:"0.9rem",display:"flex"},children:[Object(n.jsx)(p.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsxs)(p.a,{item:!0,xs:10,md:10,children:[Object(n.jsxs)(p.a,{container:!0,style:{marginBottom:"1rem"},children:[Object(n.jsx)(p.a,{item:!0,xs:0,md:7,children:" "}),Object(n.jsx)(p.a,{item:!0,xs:12,md:5,children:Object(n.jsx)(J.a,{value:f,onChange:function(e){return v(e.currentTarget.value)},placeholder:"Search by typing name",InputProps:{startAdornment:Object(n.jsx)(U.a,{position:"end",children:Object(n.jsx)(St.a,{style:{color:"black",marginRight:"0.4rem",float:"right"}})})}})})]}),m.filter((function(e){return""==f||e.name.toLowerCase().startsWith(f.toLowerCase())?e:void 0})).map((function(e,t){return Object(n.jsx)(Lt,{friend:e,onRemove:R},t)}))]}),Object(n.jsx)(p.a,{item:!0,xs:1,md:1})]})})]}):Object(n.jsxs)("div",{class:"d-flex justify-content-center",children:[Object(n.jsx)("strong",{style:{marginRight:"1rem"},children:"Loading..."}),Object(n.jsx)("div",{class:"spinner-border",role:"status"})]})]})]})})},Bt=Object(ge.a)({textfield:{marginTop:"2rem"},Submitbtn:{marginTop:"0.6rem"}}),zt=function(){var e=Bt(),t=O()._id,a=JSON.parse(localStorage.getItem("user")).email,r=Object(s.useContext)(E),i=r.setSocket,d=r.roomJoin,u=r.messageEvent,j=r.friendReq,m=Object(s.useRef)(),b=c.a.useRef(null),g=c.a.useState(!1),h=Object(o.a)(g,2),f=h[0],y=h[1],w=[{label:"Afrikaans",value:"af"},{label:"Albanian",value:"sq"},{label:"Amharic",value:"am"},{label:"Arabic",value:"ar"},{label:"Armenian",value:"hy"},{label:"Azerbaijani",value:"az"},{label:"Basque",value:"eu"},{label:"Belarusian",value:"be"},{label:"Bengali",value:"bn"},{label:"Bosnian",value:"bs"},{label:"Bulgarian",value:"bg"},{label:"Catalan",value:"ca"},{label:"Cebuano",value:"ceb"},{label:"Chichewa",value:"ny"},{label:"Chinese",value:"zh-cn"},{label:"Corsican",value:"co"},{label:"Croatian",value:"hr"},{label:"Czech",value:"cs"},{label:"Danish",value:"da"},{label:"Dutch",value:"nl"},{label:"English",value:"en"},{label:"Esperanto",value:"eo"},{label:"Estonian",value:"et"},{label:"Filipino",value:"tl"},{label:"Finnish",value:"fi"},{label:"French",value:"fr"},{label:"Danish",value:"da"},{label:"Frisian",value:"fy"},{label:"Galician",value:"gl"},{label:"Georgian",value:"ka"},{label:"German",value:"de"},{label:"Greek",value:"el"},{label:"Gujarati",value:"gu"},{label:"Haitian creole",value:"ht"},{label:"Hausa",value:"ha"},{label:"Hawaiian",value:"haw"},{label:"Hebrew",value:"iw"},{label:"Hindi",value:"hi"},{label:"Hmong",value:"hmn"},{label:"Hungarian",value:"hu"},{label:"Icelandic",value:"is"},{label:"Igbo",value:"ig"},{label:"Indonesian",value:"id"},{label:"Irish",value:"ga"},{label:"Italian",value:"it"},{label:"Japanese",value:"ja"},{label:"Javanese",value:"jw"},{label:"Kannada",value:"kn"},{label:"Kazakh",value:"kk"},{label:"Khmer",value:"km"},{label:"Korean",value:"ko"},{label:"Kurdish",value:"ku"},{label:"Kyrgyz",value:"ky"},{label:"Lao",value:"lo"},{label:"Latin",value:"la"},{label:"Latvian",value:"lv"},{label:"Lithuanian",value:"lt"},{label:"Luxembourgish",value:"lb"},{label:"Macedonian",value:"mk"},{label:"Malagasy",value:"mg"},{label:"Malay",value:"ms"},{label:"Malayalam",value:"ml"},{label:"Maltese",value:"mt"},{label:"Maori",value:"mi"},{label:"Marathi",value:"mr"},{label:"Mongolian",value:"mn"},{label:"Myanmar (burmese)",value:"my"},{label:"Nepali",value:"ne"},{label:"Norwegian",value:"no"},{label:"Odia",value:"or"},{label:"Pashto",value:"ps"},{label:"Persian",value:"fa"},{label:"Polish",value:"pl"},{label:"Portuguese",value:"pt"},{label:"Punjabi",value:"pa"},{label:"Romanian",value:"ro"},{label:"Russian",value:"ru"},{label:"Samoan",value:"sm"},{label:"Scots gaelic",value:"gd"},{label:"Serbian",value:"sr"},{label:"Sesotho",value:"st"},{label:"Shona",value:"sn"},{label:"Sindhi",value:"sd"},{label:"Sinhala",value:"si"},{label:"Slovak",value:"sk"},{label:"Slovenian",value:"sl"},{label:"Somali",value:"so"},{label:"Spanish",value:"es"},{label:"Sundanese",value:"su"},{label:"Swahili",value:"sw"},{label:"Swedish",value:"sv"},{label:"Tajik",value:"tg"},{label:"Tamil",value:"ta"},{label:"Telugu",value:"te"},{label:"Thai",value:"th"},{label:"Turkish",value:"tr"},{label:"Ukrainian",value:"uk"},{label:"Urdu",value:"ur"},{label:"Uyghur",value:"ug"},{label:"Uzbek",value:"uz"},{label:"Vietnamese",value:"vi"},{label:"Welsh",value:"cy"},{label:"Xhosa",value:"xh"},{label:"Yiddish",value:"yi"},{label:"Yoruba",value:"yo"},{label:"Zulu",value:"zu"}],S=Object(s.useState)({img:"",language:"",errorMessage:"",successMsg:"",infoMessage:"",loading:!1}),C=Object(o.a)(S,2),k=C[0],M=C[1],R=k.img,P=k.language,T=k.successMsg,A=k.errorMessage,_=k.infoMessage,L=k.loading;window.onload=function(){j(),u();var e=JSON.parse(localStorage.getItem("user"))._id;d(e),m=N()("http://127.0.0.1:5000"),i((function(e){return(e=m).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:a})})),e}))},Object(s.useEffect)((function(){Ze.getMyAccount(t).then((function(e){M(Object(l.a)(Object(l.a)({},k),{},{img:e.profileImg,language:e.langPreference}))})).catch((function(e){M(Object(l.a)(Object(l.a)({},k),{},{errorMessage:e.response.data.errorMessage}))}))}),[]);var D=function(e){return new Promise((function(t){gt.a.imageFileResizer(e,300,300,"JPEG",100,0,(function(e){t(e)}),"base64")}))},q=c.a.useCallback((function(){try{var e=b.current.getScreenshot();M(Object(l.a)(Object(l.a)({},k),{},{infoMessage:"Picture Captured"})),y(!0);var t=new FormData;t.append("file",e),I.a.post("http://127.0.0.1:5000/webcam-face-detection",t).then(function(){var a=Object(We.a)(qe.a.mark((function a(n){return qe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:M(Object(l.a)(Object(l.a)({},k),{},{errorMessage:"",successMsg:n.data.successMessage})),M(Object(l.a)(Object(l.a)({},k),{},{infoMessage:"Loading.... "})),t.append("file",e),t.append("upload_preset","TalkSee"),fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"PUT",body:t}).then((function(e){return e.json()})).then((function(e){return M(Object(l.a)(Object(l.a)({},k),{},{img:e.url}))})).catch((function(e){return console.error("Error:",e)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}catch(a){M(Object(l.a)(Object(l.a)({},k),{},{errorMessage:"error in uploading photo"}))}}),[b]),W=function(){var e=Object(We.a)(qe.a.mark((function e(t){var a,n;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.files[0],(n=new FormData).append("file",a),I.a.post("http://127.0.0.1:5000/",n).then(function(){var e=Object(We.a)(qe.a.mark((function e(t){var s,c,r;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(Object(l.a)(Object(l.a)({},k),{},{errorMessage:"",successMsg:t.data.successMessage})),e.next=3,D(a);case 3:return s=e.sent,M(Object(l.a)(Object(l.a)({},k),{},{infoMessage:"Loading...."})),n.append("file",s),n.append("upload_preset","TalkSee"),e.next=9,fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"PUT",body:n});case 9:return c=e.sent,e.next=12,c.json();case 12:r=e.sent,M(Object(l.a)(Object(l.a)({},k),{},{img:r.secure_url}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){M(Object(l.a)(Object(l.a)({},k),{},{errorMessage:e.response.data.errorMessage}))}))}catch(s){M(Object(l.a)(Object(l.a)({},k),{},{errorMessage:"error in uploading photo"}))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){Ze.updateProfileSetup(t,{profileImg:R,langPreference:P}).then((function(e){localStorage.setItem("user",JSON.stringify(e.userData)),M(Object(l.a)(Object(l.a)({},k),{},{errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){M(Object(l.a)(Object(l.a)({},k),{},{errorMessage:e.response.data.errorMessage}))}))};return Object(n.jsxs)("div",{style:{height:"100vh"},className:"back_divs",children:[L&&Object(n.jsx)(fe,{}),Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(pt.a,{only:["xs","sm"],children:Object(n.jsx)(p.a,{item:!0,md:2,children:Object(n.jsx)(Ct,{})})}),Object(n.jsx)(pt.a,{only:["md","lg"],children:Object(n.jsx)(p.a,{item:!0,xs:12,sm:12,children:Object(n.jsx)(x,{})})}),Object(n.jsxs)(p.a,{item:!0,xs:12,sm:12,md:10,children:[Object(n.jsx)(F,{name:"Update Profile "}),A&&Object(n.jsx)(_e,{type:"error",message:A,autoClose:3e3}),_&&Object(n.jsx)(_e,{type:"info",message:_,autoClose:8e3}),T&&Object(n.jsx)(_e,{type:"success",message:T,autoClose:2500}),Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,sm:4,md:4}),Object(n.jsx)(p.a,{item:!0,xs:10,sm:4,md:4,children:Object(n.jsxs)("div",{className:"profile-page",children:[Object(n.jsxs)("div",{className:"profile-container",children:[Object(n.jsx)("div",{className:"img-holder",children:Object(n.jsx)("img",{src:R,className:"profile-img"})}),Object(n.jsx)("input",{type:"file",accept:"image/*",name:"image-upload",id:"input",onChange:W}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("label",{className:"image-upload",htmlFor:"input",children:[Object(n.jsx)("i",{className:"material-icons",children:"add_photo_alternate"}),"Choose Profile Photo"]})}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("button",{className:"take-photo loginbtn","data-toggle":"modal","data-target":"#exampleModalCenter",onClick:function(){return y(!1)},children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Take Photo"]})}),Object(n.jsx)(mt.a,{style:{width:210,padding:"0.4rem"},placeholder:"Select Language ---",value:w.find((function(e){return e.value===P})),className:e.textfield,options:w,onChange:function(e){M(Object(l.a)(Object(l.a)({},k),{},{language:e.value}))}}),Object(n.jsx)(v.a,{style:{color:ie.a[50],backgroundColor:le.a[600],fontWeight:"bold",fontSize:"1rem",borderRadius:"0.5rem",marginTop:"1rem",marginBottom:"0.8rem",padding:"0.5rem",textTransform:"capitalize"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:B,children:"Update Profile"})]}),Object(n.jsx)("div",{className:"modal fade",id:"exampleModalCenter",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsxs)("div",{className:"modal-title",children:[Object(n.jsx)("h3",{id:"exampleModalLongTitle",children:"Take Photo"}),Object(n.jsx)("p",{style:{color:"red"},children:Object(n.jsx)("i",{children:"Your picture's quality will be low"})})]}),Object(n.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsx)("div",{className:"webcam-container",children:Object(n.jsx)(Ot.a,{audio:!1,height:200,width:460,ref:b,screenshotFormat:"image/jpeg"})})}),f?Object(n.jsx)("div",{className:"modal-footer",children:Object(n.jsx)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",children:"Close"})}):Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsxs)("button",{className:"take-photo loginbtn",onClick:q,children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Capture photo"]})," "]})]})})})]})}),Object(n.jsx)(p.a,{item:!0,xs:1,sm:4,md:3})]})]})]})]})},Jt=a(23),Ut=(a(93),a(199)),Ht=(a(314),function(e){var t=JSON.parse(localStorage.getItem("deletion")),a=Object(s.useState)(!0),c=Object(o.a)(a,2),r=(c[0],c[1],Object(s.useContext)(Ye).dispatch),i=Object(s.useState)(t.state),l=Object(o.a)(i,2),d=l[0],u=l[1],j=function(){e.setShow(!1)};return Object(n.jsxs)(Pt.a,{open:e.open,onClose:j,"aria-labelledby":"form-dialog-title",children:[Object(n.jsxs)(_t.a,{id:"form-dialog-title",children:[Object(n.jsx)(Ce.a,{style:{color:"red",marginRight:"0.3rem",paddingBottom:"0.3rem"}}),Object(n.jsx)("p",{style:{fontWeight:"bold",display:"inline"},children:"Delete Warning"})]}),Object(n.jsxs)(Et.a,{children:[Object(n.jsx)(At.a,{children:"This message will be permanently deleted. Are you sure you want to continue?"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"checkbox",value:d,defaultChecked:d,onClick:function(e){return function(e){console.log(e.target.checked),u(e.target.checked),r({type:"updatePermission",value:e.target.checked})}(e)}}),Object(n.jsx)("p",{style:{color:"black",fontSize:"16px",display:"inline",marginLeft:"0.7rem"},children:"Do not ask me again?"})]})]}),Object(n.jsxs)(Tt.a,{children:[Object(n.jsx)(v.a,{onClick:j,style:{backgroundColor:"gray",color:"white"},children:"No"}),Object(n.jsx)(v.a,{onClick:function(){return t=e.msgId,console.log("mid in deleteMsg",t),void T.deleteMessage(t).then((function(t){console.log("response: ",t),e.setShow(!1),e.getData()})).catch((function(e){return console.log(e)}));var t},style:{backgroundColor:"#0e7be9",color:"white"},children:"Yes"})]})]})});function Gt(e){var t=JSON.parse(localStorage.getItem("deletion")),a=c.a.useState(!1),r=Object(o.a)(a,2),i=(r[0],r[1],c.a.useState(!1)),l=Object(o.a)(i,2),d=l[0],u=l[1],j=Object(s.useState)(),m=Object(o.a)(j,2),b=m[0],g=m[1],h=null,O=function(a){!0===t.state?(console.log("mid in settingmsg1",a),u(!1),T.deleteMessage(a).then((function(t){console.log("response: ",t),e.getData()})).catch((function(e){return console.log(e)}))):(u(!0),console.log("mid in settingmsg2",a),g(a))};return e.message.to===e.user?(console.log(e.message.msgId),h=Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"incoming_msg_img"}),Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:6,md:4,children:Object(n.jsx)("div",{style:{margin:"12px 15px 4px 8px",overflow:"hidden"},children:Object(n.jsx)(Ut.Player,{children:Object(n.jsx)("source",{src:e.message.messageVideo})})})}),Object(n.jsxs)(p.a,{item:!0,xs:6,md:8,children:["  ",e.isDel?Object(n.jsx)(v.a,{className:"Allbtn",style:{textTransform:"capitalize",marginTop:"0.8rem",color:"#EC5454",fontSize:"1.2rem"},children:Object(n.jsx)("i",{class:"fas fa-trash-alt",onClick:function(){return O(e.message.msgId)}})}):null]})]}),Object(n.jsx)("div",{class:"chat-message is-received",children:Object(n.jsxs)("div",{class:"message-block",children:[Object(n.jsx)("div",{class:"message-text",children:Object(n.jsx)("span",{children:e.message.messageBody})}),Object(n.jsxs)("span",{className:"received_time_date",children:[" ",e.message.time]})]})})]})):e.message.from===e.user?(console.log(e.message.msgId),h=Object(n.jsxs)("div",{children:[Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsxs)(p.a,{item:!0,xs:6,md:8,children:["  ",e.isDel?Object(n.jsx)(v.a,{className:"Allbtn",style:{textTransform:"capitalize",float:"right",marginTop:"0.8rem",color:"#EC5454",fontSize:"1.2rem"},children:Object(n.jsx)("i",{class:"fas fa-trash-alt",onClick:function(){return O(e.message.msgId)}})}):null]}),Object(n.jsx)(p.a,{item:!0,xs:6,md:4,children:Object(n.jsx)("div",{style:{margin:"12px 15px 4px 8px",overflow:"hidden"},children:Object(n.jsx)(Ut.Player,{children:Object(n.jsx)("source",{src:e.message.messageVideo})})})})]}),Object(n.jsx)("div",{class:"chat-message is-sent",children:Object(n.jsxs)("div",{class:"message-block",children:[Object(n.jsxs)("div",{class:"message-text",children:[" ",e.message.messageBody]}),Object(n.jsxs)("span",{class:"sent_time_date",children:[" ",e.message.time]})]})})]})):console.log("nothing"),Object(n.jsxs)("div",{children:[h,d?Object(n.jsx)(Ht,{open:d,setShow:u,msgId:b,getData:e.getData}):null]})}var Yt=a(558),Kt=a(325),Vt=a.n(Kt),Xt=Object(ge.a)((function(e){return{inputInput:{paddingLeft:"calc(1em + ".concat(e.spacing(1),"px)"),transition:e.transitions.create("width"),float:"left",color:"black",borderRadius:"2rem",backgroundColor:"white",width:"100%",padding:"0.4rem",border:"1.4px solid #c4c4c4"}}}));function Zt(e){var t=Object(s.useState)(""),a=Object(o.a)(t,2),r=a[0],i=a[1],l=Xt();return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsxs)(p.a,{container:!0,style:{display:"flex",paddingTop:"0.5rem"},children:[Object(n.jsx)(p.a,{item:!0,xs:10,sm:11,md:11,children:Object(n.jsx)(Yt.a,{placeholder:"Type a message here",className:l.inputInput,inputProps:{"aria-label":"type"},value:r,onChange:function(e){return i(e.target.value)}})}),Object(n.jsxs)(p.a,{item:!0,xs:2,sm:1,md:1,children:["  ",Object(n.jsxs)(v.a,{variant:"contained",size:"small",className:"Allbtn",style:{backgroundColor:"rgb(0, 172, 193)",color:"white",float:"left",padding:"0.5rem",margin:"0.2rem",borderRadius:"0.3rem"},onClick:function(){e.sendMessage(r),i("")},children:[Object(n.jsx)(Vt.a,{style:{marginRight:"0.4rem",fontSize:"0.8rem"}}),"Send"]})]})]})})}var Qt=a(625),$t=a(331),ea=a(634),ta=a(327),aa=a.n(ta),na=a(328),sa=a.n(na),ca=a(201),ra=a.n(ca),ia=a(326),la=a(329),oa=a.n(la);function da(e){var t=c.a.useState(null),a=Object(o.a)(t,2),r=a[0],i=a[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],m=d[1],b=Object(u.g)(),g=O()._id,h=Boolean(r),f=Object(s.useState)(!0),x=Object(o.a)(f,2),v=x[0],y=x[1],N=Object(s.useState)(!1),w=Object(o.a)(N,2),S=w[0],C=w[1],k=function(t){"Delete"===t?(e.setDel(!0),y(!1)):"Search"===t&&m(!j)};Object(s.useEffect)((function(){e.recipientInfo.url}));var M=null;return v&&(M=Object(n.jsxs)("div",{style:{display:"inline",float:"right",marginTop:"0.6rem"},children:[Object(n.jsx)(K.a,{className:"Allbtn","aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget),C(!0)},children:Object(n.jsx)(aa.a,{})}),S?Object(n.jsxs)($t.a,{id:"long-menu",anchorEl:r,keepMounted:!0,open:h,onClose:function(e){i(null)},PaperProps:{style:{marginTop:"40px",maxHeight:216,width:"20ch"}},children:[Object(n.jsx)(ea.a,{className:"Menu_div",onClick:function(){return k("Search")},children:Object(n.jsxs)("div",{children:[Object(n.jsx)(St.a,{fontSize:"small",style:{width:"2rem"}}),Object(n.jsx)("p",{style:{display:"inline"},children:"Search"})]})}),Object(n.jsx)(ea.a,{className:"Menu_div",onClick:function(){return k("Delete")},children:Object(n.jsxs)("div",{children:[Object(n.jsx)(sa.a,{fontSize:"small",style:{width:"2rem",paddingBottom:"0.1rem"}}),Object(n.jsx)("p",{style:{display:"inline"},children:"Delete"})]})})]}):null]})),e.isDel&&(M=Object(n.jsx)("div",{style:{color:"gray",cursor:"pointer",float:"right",marginTop:"1rem",marginRight:"1rem"},"data-tip":"Close delete Menu","data-for":"delete",children:Object(n.jsx)(ra.a,{onClick:function(){console.log(e.isDel),e.setDel(!1),C(!1),y(!0)}})})),j&&(M=Object(n.jsx)(J.a,{style:{float:"right",marginRight:"1rem",marginTop:"0.8rem",backgroundColor:"white",borderRadius:"1rem"},value:e.searchTerm,onChange:function(t){e.searchHandler(t.currentTarget.value)},placeholder:"Search Message",size:"medium",InputProps:{startAdornment:Object(n.jsx)(U.a,{position:"end",children:Object(n.jsx)(St.a,{style:{color:ie.a[600],marginRight:"0.2rem",float:"right"}})}),endAdornment:Object(n.jsx)(ra.a,{style:{color:"gray",cursor:"pointer",marginRight:"0.4rem"},onClick:function(){console.log(e.isDel),e.setTerm(""),m(!1),C(!1),y(!0)}}),disableUnderline:!0}})),Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)("div",{style:{height:"100vh"},className:"chat_div",children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(pt.a,{only:["sm","xs"],children:Object(n.jsx)(p.a,{item:!0,md:2,children:Object(n.jsx)(Ct,{})})}),Object(n.jsxs)(p.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)(ia.a,{id:"delete"}),Object(n.jsxs)(p.a,{container:!0,spacing:0,style:{display:"flex",marginTop:"1rem"},children:[Object(n.jsx)(p.a,{xs:0,md:1}),Object(n.jsxs)(p.a,{item:!0,xs:12,md:10,children:[Object(n.jsxs)("div",{className:"profilediv",children:[Object(n.jsx)(pt.a,{only:["md","lg"],children:Object(n.jsx)(oa.a,{style:{marginRight:"0.1rem",marginLeft:"0.1rem",cursor:"pointer"},onClick:function(e){return b.push("/mychats/"+g)}})}),Object(n.jsx)("img",{className:"profile",src:e.recipientInfo.url,alt:"dp"}),Object(n.jsx)("span",{style:{display:"inline",fontWeight:"bold",fontSize:"21px"},children:e.recipientInfo.name}),M]}),Object(n.jsxs)("div",{className:"content_body ",children:[e.element,e.loading?Object(n.jsx)("div",{className:"load",children:Object(n.jsx)(Qt.a,{color:"secondary"})}):null]}),!0===e.isFriend?Object(n.jsx)(Zt,{sendMessage:e.sendMessage}):Object(n.jsx)(_e,{type:"error",message:"This person is not your friend anymore. Add them again to start a chat.",autoClose:5e3})]}),Object(n.jsx)(p.a,{xs:0,md:1})]})]})]})})})}var ua=a(629);function ja(e){var t=Object(s.useState)([{from:"",to:"",messages:[]}]),a=Object(o.a)(t,2),r=a[0],i=a[1],d=Object(s.useState)({messages:[""]}),u=Object(o.a)(d,2),j=u[0],m=u[1],b=Object(s.useState)(""),g=Object(o.a)(b,2),h=g[0],O=g[1],f=Object(s.useState)(!1),x=Object(o.a)(f,2),p=x[0],v=x[1],y=Object(s.useState)(!0),N=Object(o.a)(y,2),S=N[0],C=N[1],k=Object(s.useRef)([]),M=Object(s.useRef)(),I=Object(s.useRef)(),R=Object(s.useRef)({uId:"",uImg:"",uName:""}),A=Object(s.useRef)(""),_=Object(s.useRef)({name:"",lang:"",url:""}),L=Object(s.useRef)(""),D=Object(s.useRef)(),F=Object(s.useRef)(),q=e.match.params.id.split(" "),W=Object(s.useContext)(E).clientSocket,B=Object(s.useState)(!1),z=Object(o.a)(B,2),J=z[0],U=z[1],H=c.a.useState(!1),G=Object(o.a)(H,2),Y=G[0],K=G[1],V=JSON.parse(localStorage.getItem("user"));Object(s.useEffect)((function(){var e;null===(e=I.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[r]),_.current.name=localStorage.getItem("recName"),_.current.lang=localStorage.getItem("recLang"),_.current.url=localStorage.getItem("profileUrl"),D.current="mychats/"+localStorage.getItem("friendId"),F.current="/"+q[1],A.current=q[0],R.current.uId=V.email,R.current.uName=V.firstName+" "+V.lastName,R.current.uImg=V.profileImg;var X=function(){console.log("in get Data",R),T.getMessagesbyEmail(R.current.uId,A.current).then((function(e){e&&(console.log("This data",e),k.current=e,i({messages:k.current}),K(!0))})).catch((function(e){return w.d.error("Database Connection Error",{position:w.d.POSITION.TOP_LEFT,autoClose:3e3,transition:w.c})}))};Object(s.useEffect)((function(){var e=0;P.getAllFriends(V._id).then((function(t){M.current=t,M.current.forEach((function(t){t.email===A.current&&(e+=1)})),e<1&&C(!1)})).catch((function(e){return w.d.error("Database Connection Error",{position:w.d.POSITION.TOP_LEFT,autoClose:3e3,transition:w.c})}))})),Object(s.useEffect)((function(){X()}),[]);Object(s.useEffect)((function(){if(void 0!==W)return W.emit("roomJoin",{from:R.current.uId,to:A.current},(function(e){var t=e.error,a=e.room;t?console.log("error joining room",t):(L.current=a,console.log("joined room with id",a))})),W.on("messageReceived",(function(e){i((function(t){if(t.messages){var a=Object(Jt.a)(t.messages);return a=[].concat(Object(Jt.a)(a),[e]),Object(l.a)(Object(l.a)({},t),{},{messages:a})}return{messages:[e]}}))})),function(){W.off("messageReceived"),console.log("in cleanup")}}),[]);var Z=null;return Object(s.useEffect)((function(){if(r.messages){var e=r.messages.filter((function(e){return e.messageBody.toLowerCase().includes(h.toLowerCase())}));m({messages:e})}else console.log("no chat")}),[h]),void 0===r.messages?Z=Object(n.jsxs)("div",{class:"d-flex justify-content-center",children:[Object(n.jsx)("strong",{style:{marginRight:"1rem"},children:"Loading..."}),Object(n.jsx)("div",{class:"spinner-border",role:"status"})]}):0==r.messages.length?Z=Object(n.jsx)("div",{style:{textAlign:"center",fontSize:"1.3rem",height:"100%",backgroundImage:"linear-gradient(to right, #CECECE, #ebebeb)"},children:Object(n.jsxs)("p",{style:{position:"relative",top:"40%"},children:["Say Hi\ud83d\udc4b, to ",Object(n.jsx)("strong",{children:_.current.name})]})}):(Z=""!==h&&void 0!==j.messages?j.messages.map((function(e){return Object(n.jsx)(Gt,{message:e,user:R.current.uId,isDel:J,term:h})})):r.messages.map((function(e){return Object(n.jsx)("div",{ref:I,children:Object(n.jsx)(Gt,{message:e,user:R.current.uId,isDel:J,getData:X,id:q[1],rec:A.current})})})),0===j.messages.length&&(Z=Object(n.jsx)("h5",{style:{textAlign:"center"},children:"No match found!"}))),Object(n.jsx)(da,{recipientInfo:_.current,element:Z,loading:p,sendMessage:function(e){if(""==e)w.d.error("Please Type something",{position:w.d.POSITION.TOP_LEFT});else{var t=Object(ua.a)();v(!0);_.current.lang,R.current.uImg;v(!1);var a={from:R.current.uId,to:A.current,userName:R.current.uName,room:L.current,messageBody:e,messageVideo:"returndata",time:(new Date).toLocaleString(),type:"offline",msgId:t};W.emit("messageSend",a,(function(e){e?w.d.error("Error in sending message! Please try again",{position:w.d.POSITION.TOP_LEFT,autoClose:3e3,transition:w.c}):(T.createMessage(a).then((function(e){return console.log(e,t)})).catch((function(e){return w.d.error("Database Connection Error! Please try again",{position:w.d.POSITION.TOP_LEFT,autoClose:3e3,transition:w.c})})),r.messages?i({messages:[].concat(Object(Jt.a)(r.messages),[a])}):i({messages:[a]}))})),W.emit("messageSend1",{message:a,roomId:F.current,name:R.current.uName},(function(e){e?console.log(e):console.log("testing")})),W.emit("myChats",{roomId:D.current,message:a,userImg:V.profileImg},(function(e){e?console.log(e):console.log("testing")}))}},isDel:J,setDel:U,isFriend:S,isChat:Y,getData:X,searchTerm:h,setTerm:O,searchHandler:function(e){O((function(t){return e}))}})}var ma=a(119),ba=Object(ge.a)((function(e){return{subheader:{display:"flex",alignItems:"center",cursor:"pointer"},globe:{backgroundColor:e.palette.primary.dark},subheaderText:{color:e.palette.primary.dark},listText:{fontSize:"1.5rem",fontFamily:"Roboto",marginLeft:"0.5rem",marginTop:"2rem",fontWeight:"bold",display:"inline"},listText1:{fontSize:"1.3rem",fontFamily:"Roboto",color:"#808284",width:"80%",marginLeft:"0.5rem",display:"block",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis"},listTime:{fontSize:"0.8rem",fontFamily:"Roboto",color:"gray",marginLeft:"0.5rem",display:"inline"},listBtn:{backgroundColor:"rgb(0, 172, 193)",color:"white",fontSize:"1rem"},mygrid:{marginTop:"50px",marginLeft:"350px",width:"650px"},mygrid1:{padding:"20px"},img:{width:"4rem",height:"4rem",borderRadius:"60px"}}})),ga=function(e){var t=ba(),a=Object(u.g)(),c=null,r=JSON.parse(localStorage.getItem("user")),i=Object(s.useRef)([]),l=Object(s.useContext)(E).msgNotify;console.log("props",e.lastMsg);var o=function(e,t){T.getMessagesbyEmail(r.email,e.email).then((function(e){i.current=e,i.current.map((function(e){"offline"===e.type&&e.from!==r.email&&T.changeMessageType({type:"read"},e._id).then((function(e){console.log("The response is here",e),l()})).catch((function(e){return console.log(e)})),console.log("user matched")}))})),localStorage.setItem("friendId",e.id),localStorage.setItem("recName",e.name),localStorage.setItem("recLang",e.lang),localStorage.setItem("profileUrl",e.img),a.push("/chat/"+e.email+" "+e.id)};return Object(n.jsx)("div",{children:e.recipients.map((function(a,s){return Object(n.jsx)(z.a,{style:{padding:"12px 10px",marginBottom:"1rem"},children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:1,children:Object(n.jsx)("img",{src:a.img,alt:"img",style:{height:"50px",width:"50px",borderRadius:"30%",display:"inline"}})}),Object(n.jsxs)(p.a,{item:!0,xs:11,children:[Object(n.jsx)(L.a,{className:t.listText,children:a.name}),e.lastMsg.emails.forEach((function(s,i){s===a.email&&("read"===e.lastMsg.types[i]?c=Object(n.jsxs)("div",{children:[Object(n.jsx)(L.a,{className:t.listText1,onClick:function(){return o(a,e.lastMsg.types[i],e.lastMsg.msgId[i])},children:e.lastMsg.msgs[i]}),Object(n.jsx)(L.a,{className:t.listTime,children:Object(ma.a)(e.lastMsg.time[i])})]}):"unread"===e.lastMsg.types[i]?c=Object(n.jsxs)("div",{children:[Object(n.jsx)(L.a,{style:{fontWeight:"bold",color:"black"},className:t.listText1,onClick:function(){return o(a,e.lastMsg.types[i],e.lastMsg.msgId[i])},children:e.lastMsg.msgs[i]}),Object(n.jsx)(L.a,{className:t.listTime,children:Object(ma.a)(e.lastMsg.time[i])})]}):"offline"===e.lastMsg.types[i]&&e.lastMsg.senders[i]!==r.email?c=Object(n.jsxs)("div",{children:[Object(n.jsx)(L.a,{style:{fontWeight:"bold",color:"black"},className:t.listText1,onClick:function(){return o(a,e.lastMsg.types[i])},children:e.lastMsg.msgs[i]}),Object(n.jsx)(L.a,{className:t.listTime,children:Object(ma.a)(e.lastMsg.time[i])})]}):(console.log("in nothing",e.lastMsg.types[i]),console.log("in nothing1",e.lastMsg.senders[i]),c=Object(n.jsxs)("div",{children:[Object(n.jsx)(L.a,{className:t.listText1,onClick:function(){return o(a,e.lastMsg.types[i])},children:e.lastMsg.msgs[i]}),Object(n.jsx)(L.a,{className:t.listTime,children:Object(ma.a)(e.lastMsg.time[i])})]})))})),c]})]})})}))})},ha=Object(ge.a)((function(e){return{mygrid:{marginTop:"50px",marginLeft:"350px",width:"650px"}}})),Oa=function(e){ha(),Object(u.g)();var t=Object(s.useContext)(E).clientSocket,a=Object(s.useState)(!1),c=Object(o.a)(a,2),r=c[0],i=c[1],d=JSON.parse(localStorage.getItem("user")).email,j=Object(s.useContext)(E),m=j.setSocket,b=j.roomJoin,g=j.messageEvent,h=j.friendReq,O=Object(s.useRef)([]),f=Object(s.useState)({uData:[]}),v=Object(o.a)(f,2),y=v[0],w=v[1],S=Object(s.useState)({msgs:[],msgId:[],emails:[],types:[],senders:[],time:[]}),C=Object(o.a)(S,2),k=C[0],M=C[1],I=Object(s.useState)(),R=Object(o.a)(I,2),P=R[0],A=R[1],_=Object(s.useRef)(),L=Object(s.useRef)(0);Object(s.useRef)(0);_.current="mychats/"+e.match.params.id;var D=[],q=Object(s.useRef)();window.onload=function(){h(),g();var e=JSON.parse(localStorage.getItem("user"))._id;b(e),q=N()("http://127.0.0.1:5000"),m((function(e){return(e=q).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:d})})),e}))};Object(s.useEffect)((function(){L.current=0,t&&t.emit("myChatsRoom",{myChatsRoom:_.current},(function(e){var t=e.error,a=e.room;t?console.log("error joining room",t):console.log("joined room with id",a)})),function(e){O.current=[],k.msgs=[],k.msgId=[],k.emails=[],k.types=[],k.senders=[],k.time=[],T.getChatRecipients(e).then((function(t){t.length>0?(O.current=t.sort(),O.current=Array.from(new Set(O.current)),console.log("emails after sorting",O.current),Dt.getUserByEmail({userArray:O.current}).then((function(e){D=e,w((function(e){return e.uData=D,e}))})),O.current.forEach((function(t,a){T.getLastMsg(e,t).then((function(e){e&&M((function(a){if(a.msgs.length>=1&&a.emails.length>=1&&a.types.length>=1&&a.msgId.length>=1&&a.senders.length>=1){var n=Object(Jt.a)(a.msgs),s=Object(Jt.a)(a.emails),c=Object(Jt.a)(a.types),r=Object(Jt.a)(a.msgId),i=Object(Jt.a)(a.senders),o=Object(Jt.a)(a.time);return n=[].concat(Object(Jt.a)(n),[e.lastMsg]),s=[].concat(Object(Jt.a)(s),[t]),c=[].concat(Object(Jt.a)(c),[e.type]),r=[].concat(Object(Jt.a)(r),[e.msgId]),i=[].concat(Object(Jt.a)(i),[e.sender]),o=[].concat(Object(Jt.a)(o),[e.time]),Object(l.a)(Object(l.a)({},a),{},{msgs:n,msgId:r,emails:s,types:c,senders:i,time:o})}console.log("first: ",e.lastMsg,t);var d={msgs:[e.lastMsg],msgId:[e.msgId],emails:[t],types:[e.type],senders:[e.sender],time:[e.time]};return console.log("MY MSG: ",d),d})),i(!0)})).catch((function(e){return console.log(e)}))}))):console.log("no data")})).catch((function(e){return console.log(e)}))}(d)}),[]),Object(s.useEffect)((function(){t&&t.on("newRecipient",(function(e){A((function(t){return e}))}))}),[]),Object(s.useEffect)((function(){var e;(console.log("IN PAYLOAD"),P)&&(console.log("payload",P),0!==y.uData.length&&0!==k.msgs.length?(console.log("check:",y),L.current=0,y.uData.forEach((function(t,a){P.message.from===t.email?(e=a,console.log("index: ",e),L.current=L.current+1,console.log("count: ",L.current)):console.log("false")})),0!==L.current?(console.log("before setRecArray",k.msgs),console.log("in setRecArray",L.current),W(e,P.message)):0===L.current?(B(P.message),console.log("in setNewArray",L.current)):console.log("nothing ",L.current)):console.log("usersData 1",k))}),[P]);var W=function(e,t){console.log("Last msg array and index",k.msgs,e);var a=[];a=Object(Jt.a)(k.msgs);var n=Object(Jt.a)(k.types),s=Object(Jt.a)(k.time);console.log("items before change",a),a[e]=t.messageBody,n[e]=t.type,s[e]=t.time,console.log("items",a),M((function(e){return Object(l.a)(Object(l.a)({},e),{},{msgs:a,types:n,time:s})}))},B=function(e){console.log("in new chattt",e.type),Dt.getUserByEmail({userEmail:e.from}).then((function(t){console.log("data",t),w((function(a){var n={email:e.from,gender:t[0].gender,id:t[0]._id,name:t[0].firstName+" "+t[0].lastName,img:t[0].profileImg},s=Object(Jt.a)(a.uData);return s=[].concat(Object(Jt.a)(s),[n]),console.log("u",s),Object(l.a)(Object(l.a)({},a),{},{uData:s})}))})),0!==y.uData.length?(console.log("not first recipient"),M({msgs:[].concat(Object(Jt.a)(k.msgs),[e.messageBody]),emails:[].concat(Object(Jt.a)(k.emails),[e.from]),types:[].concat(Object(Jt.a)(k.types),[e.type]),senders:[].concat(Object(Jt.a)(k.senders),[e.from]),time:[].concat(Object(Jt.a)(k.time),[e.time])})):(console.log("first recipient"),M({msgs:[e.messageBody],emails:[e.from],types:[e.type],senders:[e.from],time:[e.time]}))};return Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(pt.a,{only:["xs","sm"],children:Object(n.jsx)(p.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Ct,{})})}),Object(n.jsx)(pt.a,{only:["md","lg"],children:Object(n.jsx)(p.a,{item:!0,xs:12,children:Object(n.jsx)(x,{})})}),Object(n.jsxs)(p.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)(F,{name:"My Chats"}),r?Object(n.jsx)("div",{children:0!==y.uData.length&&0!==k.msgs.length?Object(n.jsx)("div",{children:Object(n.jsxs)(p.a,{container:!0,style:{marginTop:"0.9rem"},children:[Object(n.jsx)(p.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsx)(p.a,{item:!0,xs:10,md:10,children:Object(n.jsx)(ga,{recipients:y.uData,lastMsg:k})}),Object(n.jsx)(p.a,{item:!0,xs:1,md:1,children:" "})]})}):Object(n.jsx)("h5",{style:{textAlign:"center"},children:"No Chats Yet!"})}):Object(n.jsxs)("div",{class:"d-flex justify-content-center",children:[Object(n.jsx)("strong",{style:{marginRight:"1rem"},children:"Loading..."}),Object(n.jsx)("div",{class:"spinner-border",role:"status"})]})]})]})})},fa=Object(s.createContext)(),xa=function(e){var t=e.userId,a=(e.setMsg,e.children),c="";Object(s.useEffect)((function(){r(t)}),[t]);var r=function(e){T.offlinemessages(e).then((function(e){e.count>0&&(console.log("count",e.count),c="You have "+e.count+" new messages!",e.info.sender[0]!==t?(console.log("sender",e.info.sender),console.log("user",t),w.d.info(c,{position:w.d.POSITION.TOP_LEFT,transition:w.c})):console.log("is sender"))})).catch((function(e){return console.log(e)}))};return Object(n.jsx)(fa.Provider,{value:{getUnreadMsgs:r},children:a})},pa=(a(551),Object(ge.a)({textfield:{marginTop:"2rem"},Submitbtn:{marginTop:"0.6rem"}}),function(e){var t=e.match;console.log(t.params.id);var a=t.params.id,c="/"+a,r=O()._id,i=O().firstName+" "+O().lastName,l=JSON.parse(localStorage.getItem("user")),d=Object(s.useState)(!l.sentRequests.includes(a)),u=Object(o.a)(d,2),j=u[0],m=u[1],b=O().profileImg,g=O().email,h=O().gender,f=O().langPreference,x=Object(s.useContext)(E).clientSocket;return Object(n.jsx)("div",{children:j?Object(n.jsx)(v.a,{className:"loginbtn",style:{display:"inline-block",position:"relative",float:"right",marginTop:"1rem",backgroundColor:vt.a[600],color:"white"},variant:"contained",onClick:function(){console.log("contact Id",a),P.sendRequest({friendId:a,myId:r,myName:i,myProfileImg:b,myEmail:g,myGender:h,myLangPreference:f}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),m(!1)})).catch((function(e){console.log(e)})),x.emit("friendRequest",{myName:i,roomId:c},(function(e){e?console.log(e):console.log("emitted event")}))},children:"Add friend"}):Object(n.jsx)(v.a,{className:"loginbtn",style:{display:"inline-block",position:"relative",float:"right",marginTop:"1rem",backgroundColor:ie.a[500],color:"white"},variant:"contained",onClick:function(){P.cancelRequest({friendId:a,myId:r}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),m(!0)})).catch((function(e){console.log(e)}))},children:"Requested"})})}),va=a(332),ya=function(e){var t=e.component,a=Object(va.a)(e,["component"]);return Object(n.jsx)(u.b,Object(l.a)(Object(l.a)({},a),{},{render:function(e){return O()&&0===O().role?Object(n.jsx)(t,Object(l.a)({},e)):Object(n.jsx)(u.a,{to:"/login"})}}))},Na=a(202),wa=a.n(Na),Sa=a(194),Ca=a.n(Sa),ka=a(330),Ma=a.n(ka),Ia=function(){var e=Object(u.g)(),t=Object(s.useContext)(E).frndcounter,a=O()._id;return Object(n.jsx)("div",{div:!0,style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(pt.a,{only:["xs","sm"],children:Object(n.jsx)(p.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Ct,{})})}),Object(n.jsx)(pt.a,{only:["md","lg"],children:Object(n.jsx)(p.a,{item:!0,xs:12,children:Object(n.jsx)(x,{})})}),Object(n.jsxs)(p.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)(F,{name:"My Contacts"}),Object(n.jsxs)(p.a,{container:!0,style:{marginTop:"1.5rem"},children:[Object(n.jsx)(p.a,{item:!0,xs:1,md:3}),Object(n.jsxs)(p.a,{item:!0,xs:10,md:6,children:[Object(n.jsxs)(v.a,{className:"loginbtn myFriendsBtn",variant:"contained",fullWidth:!0,onClick:function(t){return e.push("/all-my-friends/"+a)},children:[Object(n.jsx)(Ma.a,{className:"contactManagementIcon",color:"white"})," My Friends"]}),t>=1?Object(n.jsxs)(v.a,{className:"loginbtn friendRequestBtn",variant:"contained",fullWidth:!0,onClick:function(t){return e.push("/all-friend-requests/"+a)},children:[Object(n.jsx)(wa.a,{className:"contactManagementIcon",onClick:function(t){return e.push("/all-friend-requests/"+a)}}),Object(n.jsx)(_.a,{badgeContent:t,color:"secondary",style:{margin:" -28px 0.8rem 0 -3px"}}),"My Friend Requests"]}):Object(n.jsxs)(v.a,{className:"loginbtn friendRequestBtn",variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(t){return e.push("/all-friend-requests/"+a)},children:[Object(n.jsx)(wa.a,{className:"contactManagementIcon",onClick:function(t){return e.push("/all-friend-requests/"+a)}}),"My Friend Requests"]}),Object(n.jsxs)(v.a,{className:"loginbtn addFriendBtn",variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(t){return e.push("/all-contacts/"+a)},children:[Object(n.jsx)(Ca.a,{className:"contactManagementIcon",color:"white"})," Add New friend"]})]})]}),Object(n.jsx)(p.a,{item:!0,xs:1,md:3})]})]})})},Ra=function(){var e=Object(s.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(s.useState)(),i=Object(o.a)(r,2),j=i[0],m=i[1];return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(qt,{userId:a,children:Object(n.jsx)(xa,{userId:a,children:Object(n.jsx)(A,{id:j,children:Object(n.jsxs)(Ke,{children:[Object(n.jsx)(w.b,{}),Object(n.jsx)(d.a,{children:Object(n.jsxs)(u.d,{children:[Object(n.jsx)(u.b,{path:"/",exact:!0,children:Object(n.jsx)(Xe,{onIdSubmit:c,setId:m})}),Object(n.jsx)(u.b,{exact:!0,path:"/signup",component:He}),Object(n.jsx)(u.b,{exact:!0,path:"/login",children:Object(n.jsx)(Xe,{onIdSubmit:c,setId:m})}),Object(n.jsx)(u.b,{exact:!0,path:"/user/activate/:token",component:ct}),Object(n.jsx)(ya,{exact:!0,path:"/dashboard/:id",component:q}),Object(n.jsx)(u.b,{exact:!0,path:"/reset-password/:token",component:jt}),Object(n.jsx)(u.b,{exact:!0,path:"/forgot-password",component:dt}),Object(n.jsx)(u.b,{exact:!0,path:"/profile-setup/:token",component:xt}),Object(n.jsx)(ya,{exact:!0,path:"/update-my-profile-setup/:id",component:zt}),Object(n.jsx)(ya,{exact:!0,path:"/all-contacts/:id",component:kt}),Object(n.jsx)(ya,{exact:!0,path:"/all-friend-requests/:id",component:It}),Object(n.jsx)(ya,{exact:!0,path:"/all-my-friends/:id",component:Wt}),Object(n.jsx)(ya,{exact:!0,path:"/profile/:id/:id",component:pa}),Object(n.jsx)(ya,{exact:!0,path:"/my-contact-list/:id",component:Ia}),Object(n.jsx)(u.b,{exact:!0,path:"/notfound",component:rt}),Object(n.jsx)(ya,{path:"/chat/:id",render:function(e){return Object(s.createElement)(ja,Object(l.a)(Object(l.a)({},e),{},{key:e.location.key}))},exact:!0,component:ja}),Object(n.jsx)(ya,{path:"/mychats/:id",render:function(e){return Object(s.createElement)(Oa,Object(l.a)(Object(l.a)({},e),{},{key:e.location.key}))},exact:!0,component:Oa}),Object(n.jsx)(u.a,{to:"/notfound"})]})})]})})})})})},Pa=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,635)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};i.a.render(Object(n.jsx)(Ra,{}),document.getElementById("root")),Pa()},93:function(e,t,a){}},[[552,1,2]]]);
//# sourceMappingURL=main.a90e2d1b.chunk.js.map