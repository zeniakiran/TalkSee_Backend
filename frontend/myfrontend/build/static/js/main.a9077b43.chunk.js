(this.webpackJsonpmyfrontend=this.webpackJsonpmyfrontend||[]).push([[0],{370:function(e,t,a){},371:function(e,t,a){},402:function(e,t){},421:function(e,t){},423:function(e,t){},437:function(e,t){},439:function(e,t){},467:function(e,t){},469:function(e,t){},470:function(e,t){},475:function(e,t){},477:function(e,t){},496:function(e,t){},508:function(e,t){},511:function(e,t){},550:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(0),c=a.n(s),r=a(18),o=a.n(r),i=a(38),l=a.n(i),d=(a(370),a(3)),u=a(8),j=(a(371),a(17)),m=a(37),b=a(152),g=a.n(b),h=function(e){return JSON.parse(localStorage.getItem(e))},O=function(e){localStorage.removeItem(e)},f=function(e,t){var a,n;a="token",n=e,g.a.set(a,n,{expires:1}),function(e,t){localStorage.setItem(e,JSON.stringify(t))}("user",t)},x=function(){if(e="token",g.a.get(e)&&h("user"))return h("user");var e},p=function(e){var t;t="token",g.a.remove(t),O("user"),O("friendId"),O("recName"),O("profileUrl"),O("recLang"),O("messagecount"),O("friendRequests"),e()},v=a(39),y=a.n(v),w=a(20),S=a(54),N=a(67),k=a(66);l.a.defaults.baseURL="http://localhost:5000/api/",l.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token");var C=function e(){Object(S.a)(this,e),this.get=function(e){return new Promise((function(t,a){l.a.get(e).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))},this.getMessage=function(e,t){return new Promise((function(a,n){l.a.get(e,{params:{email:t}}).then((function(e){a(e.data)})).catch((function(e){n(e)}))}))},this.post=function(e,t){return new Promise((function(a,n){l.a.post(e,t).then((function(e){a(e.data)})).catch((function(e){console.log("Errrr"),n(e)}))}))},this.put=function(e,t){return new Promise((function(a,n){l.a.put(e,t).then((function(e){a(e.data)})).catch((function(e){n(e)}))}))},this.delete=function(e){return new Promise((function(t,a){l.a.delete(e).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))}},M=new(function(e){Object(N.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).sendRequest=function(t){return e.post("friends/send-friend-request",t)},e.cancelRequest=function(t){return e.post("friends/cancel-friend-request",t)},e.acceptRequest=function(t){return e.post("friends/accept-friend-request",t)},e.rejectRequest=function(t){return e.post("friends/reject-friend-request",t)},e.deleteFriend=function(t){return e.post("friends/delete-friend",t)},e.getFriendRequest=function(t){return e.get("friends/my-friend-requests/"+t)},e.getSentFriendRequest=function(t){return e.get("friends/sent-friend-requests/"+t)},e.getAllFriends=function(t){return e.get("friends/my-friends-list/"+t)},e.getFriendRequestsCount=function(t){return e.get("friends/my-friend-requests-count/"+t)},e}return a}(C)),I=new(function(e){Object(N.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getMessages=function(){return e.get("chatapi")},e.createMessage=function(t){return e.post("chatapi",t)},e.getMessagesbyEmail=function(t,a){return e.get("chatapi/msgbyemail/"+t+" "+a)},e.getMessagesbyUserId=function(t){return e.get("chatapi/msgbyuserid/"+t)},e.getChatRecipients=function(t){return e.get("chatapi/chatrecipients/"+t)},e.getLastMsg=function(t,a){return e.get("chatapi/lastmsg/"+t+" "+a)},e.deleteMessage=function(t){return e.delete("chatapi/"+t)},e.changeMessageType=function(t,a){return e.put("chatapi/"+a,t)},e.offlinemessages=function(t){return e.get("chatapi/offlinemessages/"+t)},e}return a}(C)),R=(a(167),Object(s.createContext)());function P(e){var t=e.id,a=e.email,c=e.isLogin,r=e.children,o=Object(s.useState)({}),i=Object(u.a)(o,2),l=i[0],d=i[1],j=Object(s.useState)(0),m=Object(u.a)(j,2),b=m[0],g=m[1],h=Object(s.useState)(0),O=Object(u.a)(h,2),f=O[0],x=O[1],p=Object(s.useState)(),v=Object(u.a)(p,2),S=v[0],N=v[1],k=Object(s.useRef)();Object(s.useEffect)((function(){var e=y()("http://localhost:5000/");return N(e),function(){return e.close()}}),[]),Object(s.useEffect)((function(){k.current="/"+t,console.log(k)}),[]);var C=function(){I.offlinemessages(a).then((function(e){d((function(t){return{sender:e.info.sender,receiver:e.info.receiver}})),x((function(t){return e.count})),console.log("Message Count is",f),localStorage.setItem("messagecount",JSON.stringify(f))})).catch((function(e){return console.log(e)}))};Object(s.useEffect)((function(){return C}),[]),Object(s.useEffect)((function(){c&&(P(),console.log("new message event mounted"))}),[c]);var P=function(){JSON.parse(localStorage.getItem("messagecount"));console.log(" new msg event "),S?S.on("newMessage",(function(e){Object(w.d)(e.RecipientName+":"+e.payload.messageBody,{onOpen:function(){return console.log("Called when I open")},position:w.d.POSITION.TOP_LEFT,transition:w.a}),console.log("new message",e),x((function(e){return e+=1,localStorage.setItem("messagecount",JSON.stringify(e)),localStorage.setItem("MyC",JSON.stringify(e)),e}))})):console.log("no socket")},T=function(){M.getFriendRequest(t).then((function(e){g(e.length),localStorage.setItem("friendRequests",JSON.stringify(e.length))})).catch((function(e){console.log(e)}))};Object(s.useEffect)((function(){return T}),[b]);var L={clientSocket:S,setSocket:N,messageEvent:P,roomJoin:function(e){e="/"+e,S&&S.emit("NotificationRoom",{myNotificationRoom:e},(function(e){var t=e.error,a=e.room;t?console.log("error joining room",t):console.log("joined room with id",a)}))},friendReq:function(){console.log("friend Req event"),S?S.on("newRequest",(function(e){console.log("payload : ",e),w.d.info(e.sender+" has sent you a friend request!",{position:w.d.POSITION.TOP_LEFT,autoClose:7e3,transition:w.a})})):console.log("no socket")},getRequest:function(){S?(S.on("newRequest",(function(){return T()})),S.on("rejectRequest",(function(e){return T()}))):console.log("no socket")},frndcounter:b,acceptRejectCounter:T,msgCounter:f,msgNotify:C,obj:l};return Object(n.jsx)(R.Provider,{value:L,children:r})}var T=Object(m.h)((function(e){var t=e.history,a=e.setLogin;t=Object(m.g)();var c=x().firstName,r=x().lastName,o=x()._id,i=x().email,l=x().profileImg,d=Object(s.useContext)(R).clientSocket,u=function(e){p((function(){a(!1),void 0!==d?(d.emit("removeuser",{id:d.id,name:i}),d.off("newMessage"),d.off("newrequest"),d.off("messageSend1")):console.log("no socket"),t.push("/login")}))};return Object(n.jsx)("header",{children:Object(n.jsx)("div",{children:Object(n.jsxs)("nav",{id:"nav",className:"navbar navbar-expand-lg navbar-light mt-0",children:[Object(n.jsxs)("div",{className:"navbar-brand",children:[Object(n.jsxs)(j.b,{to:{pathname:"/update-my-profile-setup/".concat(o)},style:{textDecoration:"none"},children:[Object(n.jsx)("img",{src:l,alt:"Profile",style:{height:"50px",width:"50px",borderRadius:"50%",display:"inline"},onclick:function(){return t.push("/update-my-profile-setup/"+o)}})," "]}),Object(n.jsx)("span",{className:"header_name",children:c+" "+r})]}),Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:Object(n.jsx)("ul",{className:"\r navbar-nav\r ml-auto\r mt-2\r mt-lg-0",children:x()&&0===x().role&&Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(j.b,{to:"/notFound",className:"nav-link "})}),Object(n.jsx)("li",{className:"nav-item",style:{marginRight:"1rem"},children:Object(n.jsxs)(j.b,{to:{pathname:"/dashboard/"+o},className:"nav-link",children:[Object(n.jsx)("i",{className:"fa fa-home","aria-hidden":"true"}),"  Dashboard"]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)("button",{className:"btn text-decoration-none btn-link   pl-0 nav-link",style:{textDecoration:"none"},onClick:u,children:[Object(n.jsx)("i",{className:"fas fa-sign-out-alt","aria-hidden":"true"})," Logout"]})})]})})})]})})})})),L=a(601),E=a(606),D=Object(s.createContext)(),_=function(e){var t,a=e.userId,c=e.isLogin,r=e.children,o="",i=Object(s.useState)({}),l=Object(u.a)(i,2),d=l[0],j=l[1],m=Object(s.useState)(0),b=Object(u.a)(m,2),g=b[0],h=b[1];window.onload=function(){t=JSON.parse(localStorage.getItem("user").email),O(t)},Object(s.useEffect)((function(){console.log("is Login",c),c&&O(a)}),[c]),Object(s.useEffect)((function(){f()}),[]);var O=function(e){I.offlinemessages(e).then((function(e){e.count>0&&(console.log("count",e.count),o="You have "+e.count+" new messages!",e.info.sender[0]!==a?(console.log("sender",e.info.sender),console.log("user",a),w.d.info(o,{position:w.d.POSITION.TOP_LEFT,transition:w.c})):console.log("is sender"))})).catch((function(e){return console.log(e)}))},f=function(){I.offlinemessages(t).then((function(e){e.count>0&&(j((function(t){return{sender:e.info.sender,receiver:e.info.receiver}})),console.log("obj",d),h((function(t){return e.count})))})).catch((function(e){return console.log(e)}))};return Object(n.jsx)(D.Provider,{value:{getUnreadMsgs:O,count:g,obj:d,setCounter:h},children:r})},A=a(202),F=a.n(A),q=a(113),W=a.n(q),J=a(145),B=a.n(J),z=a(322),U=a.n(z),H=a(103),G=a.n(H),K=a(146),Y=a.n(K),V=a(607),X=new(function(e){Object(N.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).accountActivation=function(t){return e.post("users/activation",t)},e.forgotPassword=function(t){return e.put("users/forgot-password",t)},e.resetPassword=function(t){return e.put("users/reset-password",t)},e.profileSetup=function(t){return e.post("users/profile-setup",t)},e.updateProfileSetup=function(t,a){return e.put("users/update-profile-setup/"+t,a)},e.getMyAccount=function(t){return e.get("users/my-account/"+t)},e.deleteMyAccount=function(t){return e.delete("users/delete-my-account/"+t)},e}return a}(C)),Z=(a(80),a(158)),Q=a(605),$=function(e){var t=e.name;return Object(n.jsx)("div",{children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,sm:2,xm:5,md:4}),Object(n.jsxs)(L.a,{item:!0,xs:10,sm:8,xm:2,md:4,children:[Object(n.jsx)(Z.a,{variant:"headline",style:{marginTop:"1.5rem",textAlign:"center",fontSize:"4rem",color:Q.a[300],fontFamily:"Brush Script MT, Brush Script Std, cursive"},component:"h1",children:t}),Object(n.jsx)("hr",{style:{marginBottom:"1rem"}})]}),Object(n.jsx)(L.a,{item:!0,xs:1,sm:2,xm:5,md:4})]})})},ee=function(e){var t=e.setLogin,a=e.setUsers,c=x()._id,r=(Object(s.useRef)(0),Object(s.useRef)()),o=Object(m.g)();r.current=JSON.parse(localStorage.getItem("user")).email,console.log(r);var i=Object(s.useContext)(R),l=i.clientSocket,d=i.setSocket,u=i.messageEvent,j=i.roomJoin,b=i.friendReq,g=i.getRequest,h=i.frndcounter,O=i.msgNotify,f=i.msgCounter,p=i.acceptRejectCounter;console.log("counter in dashbord",f);var v=Object(s.useRef)();Object(s.useEffect)((function(){return O}),[]),window.onload=function(){b(),p(),O(),u(),g(),j(c),v=y()("http://localhost:5000/"),d((function(e){return(e=v).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:r.current})})),e}))};return Object(s.useEffect)((function(){void 0!==l?(console.log(l),l.emit("adduser",{id:l.id,name:r.current},(function(e){a(e)}))):console.log("no socket")}),[]),Object(s.useEffect)((function(){}),[]),Object(s.useEffect)((function(){j(c)}),[]),Object(n.jsxs)("div",{style:{height:"100vh"},className:"back_divs",children:[Object(n.jsx)(T,{setLogin:t}),Object(n.jsx)($,{name:"Dashboard"}),Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,md:4}),Object(n.jsxs)(L.a,{item:!0,xs:10,md:4,children:[Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 20px",display:"block",backgroundColor:"#C8906A"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return o.push("/all-contacts/"+c)},children:[Object(n.jsx)(W.a,{className:"chaticon",color:"white"})," Add New friend"]}),Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 40px",marginTop:"2rem",display:"block",backgroundColor:"#C0C86A"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return o.push("/all-my-friends/"+c)},children:[Object(n.jsx)(B.a,{className:"chaticon",color:"white"})," My Friends"]}),f>=1?Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 20px",marginTop:"2rem",display:"block",backgroundColor:"#D582BD"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return o.push("/mychats/"+c)},children:[Object(n.jsx)(V.a,{badgeContent:f,color:"secondary",style:{marginRight:"0.5rem"},children:Object(n.jsx)(F.a,{className:"chaticon",onClick:function(e){return o.push("/mychats/"+c)},color:"white"})}),"My Chats"]}):Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 50px",marginTop:"2rem",display:"block",backgroundColor:"#D582BD"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return o.push("/mychats/"+c)},children:[Object(n.jsx)(F.a,{className:"chaticon",color:"white"}),"  My Chats"]}),h>=1?Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 20px",marginTop:"2rem",display:"block",backgroundColor:"#8298D5"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return o.push("/all-friend-requests/"+c)},children:[Object(n.jsx)(V.a,{badgeContent:h,color:"secondary",style:{marginRight:"0.5rem"},children:Object(n.jsx)(G.a,{className:"chaticon",onClick:function(e){return o.push("/all-friend-requests/"+c)},color:"white"})}),"My Friend Requests"]}):Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 50px",marginTop:"2rem",display:"block",backgroundColor:"#8298D5"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return o.push("/all-friend-requests/"+c)},children:[Object(n.jsx)(G.a,{className:"chaticon",color:"white"}),"  My Friend Requests"]}),Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 27px",marginTop:"2rem",display:"block",backgroundColor:"#69B6CF"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return o.push("/update-my-profile-setup/"+c)},children:[Object(n.jsx)(U.a,{className:"chaticon",color:"white"}),"Update Profile"]}),Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 20px",marginTop:"2rem",display:"block",backgroundColor:"#C3767F"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(){X.deleteMyAccount(c).then((function(e){return o.push("/signup")})).catch((function(e){return console.log(e)}))},children:[Object(n.jsx)(Y.a,{className:"chaticon",color:"white"})," Delete Account"]})]}),Object(n.jsx)(L.a,{item:!0,xs:1,md:4})]})]})},te=a(36),ae=a(40),ne=a(553),se=a(629),ce=a(617),re=a(615),oe=a(616),ie=a(614),le=a(613),de=a(554),ue=a(636),je=a(620),me=a(631),be=function(e){var t=e.name;return Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,sm:2,xm:5,md:4}),Object(n.jsx)(L.a,{item:!0,xs:10,sm:8,xm:2,md:6,children:Object(n.jsxs)(Z.a,{variant:"headline",style:{marginTop:"1rem",position:"relative",fontSize:"5rem",color:Q.a[300],marginBottom:"1rem",fontFamily:"Brush Script MT, Brush Script Std, cursive"},component:"h1",children:[Object(n.jsx)("img",{className:"loginImg",src:"/images/logo.png"}),t]})}),Object(n.jsx)(L.a,{item:!0,xs:1,sm:2,xm:5,md:2})]})},ge=a(98),he=a.n(ge),Oe=a(150),fe=a.n(Oe),xe=a(203),pe=a.n(xe),ve=a(99),ye=a.n(ve),we=a(153),Se=a(621),Ne=a(97),ke=a.n(Ne),Ce=a(46),Me=a.n(Ce),Ie=a(148),Re=a.n(Ie),Pe=a(608),Te=a(609),Le=Object(Pe.a)({root:{width:"100%"}});function Ee(){var e=Le(),t=c.a.useState(0),a=Object(u.a)(t,2),s=a[0],r=a[1],o=c.a.useState(10),i=Object(u.a)(o,2),l=i[0],d=i[1],j=c.a.useRef((function(){}));return c.a.useEffect((function(){j.current=function(){if(s>100)r(0),d(10);else{var e=10*Math.random(),t=10*Math.random();r(s+e),d(s+e+t)}}})),c.a.useEffect((function(){var e=setInterval((function(){j.current()}),500);return function(){clearInterval(e)}}),[]),Object(n.jsx)("div",{className:e.root,children:Object(n.jsx)(Te.a,{variant:"buffer",value:s,valueBuffer:l})})}var De=a(156),_e=a(610),Ae=a(323),Fe=a.n(Ae),qe=a(324),We=a.n(qe),Je=a(147),Be=a.n(Je),ze=a(325),Ue=a.n(ze),He=a(326),Ge=a.n(He),Ke=a(635),Ye=a(612),Ve={success:Fe.a,warning:Be.a,error:We.a,info:Ue.a},Xe=Object(Pe.a)((function(e){return{success:{backgroundColor:De.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:_e.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}})),Ze=function(e){var t=e.type,a=e.message,s=e.autoClose,r=Xe(),o=c.a.useState(!0),i=Object(u.a)(o,2),l=i[0],d=i[1],j=function(e,t){"clickaway"!==t&&d(!1)},m=Ve[t];return Object(n.jsx)(Ke.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:l,autoHideDuration:s,onClose:j,children:Object(n.jsx)(Ye.a,{className:Object(ae.a)(r[t]),"aria-describedby":"client-snackbar",message:Object(n.jsxs)("span",{id:"client-snackbar",className:r.message,children:[Object(n.jsx)(m,{className:Object(ae.a)(r.icon,r.iconVariant)}),a]}),action:[Object(n.jsx)(le.a,{"aria-label":"close",color:"inherit",onClick:j,children:Object(n.jsx)(Ge.a,{className:r.icon})},"close")]})})},Qe=a(618),$e=a(619),et=a(41),tt=a.n(et),at=a(60);l.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token");var nt=function(){var e=Object(at.a)(tt.a.mark((function e(t){var a;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{headers:{"Content-Type":"application/json"}},e.next=3,l.a.post("http://localhost:5000/api/users/signup",t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(at.a)(tt.a.mark((function e(t){var a;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("http://localhost:5000/"),{headers:{"Content-Type":"application/json"}},e.next=4,l.a.post("http://localhost:5000/api/users/login",t);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=Object(Pe.a)((function(e){return{textfield:{marginTop:e.spacing(2.5)},margin:{marginTop:e.spacing(2.5)}}})),rt=function(){var e=ct(),t=Object(m.g)();Object(s.useEffect)((function(){(x()&&1===x().role||x()&&0===x().role)&&t.push("/dashboard")}),[t]);var a=Object(s.useState)({firstName:"",lastName:"",email:"",gender:"",password:"",confirmPassword:"",errorMessage:"",successMsg:"",showPassword:!1,showPassword1:!1,loading:!1}),c=Object(u.a)(a,2),r=c[0],o=c[1],i=r.firstName,l=r.lastName,b=r.email,g=r.gender,h=r.password,O=r.confirmPassword,f=r.errorMessage,p=r.successMsg,v=r.loading,y=function(e){return function(t){var a;o(Object(d.a)(Object(d.a)({},r),{},(a={},Object(te.a)(a,e,t.target.value),Object(te.a)(a,"errorMessage",""),Object(te.a)(a,"successMsg",""),a)))}},w=function(){o(Object(d.a)(Object(d.a)({},r),{},{showPassword:!r.showPassword}))},S=function(){o(Object(d.a)(Object(d.a)({},r),{},{showPassword1:!r.showPassword1}))},N=function(e){e.preventDefault()},k=function(e){var t;o(Object(d.a)(Object(d.a)({},r),{},(t={},Object(te.a)(t,e.target.name,e.target.value),Object(te.a)(t,"errorMessage",""),Object(te.a)(t,"successMsg",""),t)))},C=function(e){if(e.preventDefault(),Me()(i)||Me()(l)||Me()(b)||Me()(h)||Me()(O)||Me()(g))o(Object(d.a)(Object(d.a)({},r),{},{errorMessage:"All fields are required"}));else if(ke()(b))if(Re()(h,O)){var t={firstName:r.firstName,lastName:r.lastName,email:r.email,password:r.password,gender:r.gender};o(Object(d.a)(Object(d.a)({},r),{},{loading:!0})),nt(t).then((function(e){o(Object(d.a)(Object(d.a)({},r),{},{firstName:"",lastName:"",email:"",password:"",confirmPassword:"",gender:"",errorMessage:!1,successMsg:e.data.successMessage,loading:!1}))})).catch((function(e){console.log(e),o(Object(d.a)(Object(d.a)({},r),{},{loading:!1,errorMessage:e.response.data.errorMessage}))}))}else o(Object(d.a)(Object(d.a)({},r),{},{errorMessage:"Password do not matched"}));else o(Object(d.a)(Object(d.a)({},r),{},{errorMessage:"Invalid Email"}))};return Object(n.jsxs)("div",{className:"signup_div",children:[v&&Object(n.jsx)(Ee,{}),f&&Object(n.jsx)(Ze,{type:"error",message:f,autoClose:4e3}),p&&Object(n.jsx)(Ze,{type:"success",message:p,autoClose:4e3}),Object(n.jsx)(be,{className:"title",name:"TalkSee"}),Object(n.jsx)("div",{className:"signup-container",children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(L.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(ne.a,{className:"Login-container",style:{padding:"30px 30px"},children:[Object(n.jsxs)(L.a,{container:!0,style:{textAlign:"center"},children:[Object(n.jsx)(L.a,{item:!0,xs:6,children:Object(n.jsx)(j.b,{className:"header",to:"/login",children:"Sign In"})}),Object(n.jsx)(L.a,{item:!0,xs:6,children:Object(n.jsx)(j.b,{className:"active-header",to:"/signup",children:"Sign Up"})})]}),Object(n.jsx)(se.a,{className:e.textfield,id:"filled-start-adornment",value:r.firstName,label:Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" firstName "}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red"},children:"*"})]}),name:"firstName",fullWidth:!0,onChange:k,InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(pe.a,{style:{color:we.a[600]}})})}}),Object(n.jsx)(se.a,{className:e.textfield,id:"filled-start-adornment1",value:r.lastName,label:Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" lastName "}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red"},children:"*"})]}),name:"lastName",fullWidth:!0,onChange:k,InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(pe.a,{style:{color:we.a[600]}})})}}),Object(n.jsx)(se.a,{className:e.textfield,label:Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Email Address "}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red"},children:"*"})]}),id:"filled-start-adornment1",name:"email",value:r.email,fullWidth:!0,onChange:k,InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(he.a,{style:{color:we.a[600]}})})}}),Object(n.jsxs)(re.a,{className:Object(ae.a)(e.margin,e.textField),fullWidth:!0,children:[Object(n.jsxs)(oe.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Password"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(ie.a,{id:"standard-adornment-password",type:r.showPassword?"text":"password",name:"password",value:r.password,onChange:y("password"),startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(fe.a,{style:{color:we.a[600]}})}),endAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(le.a,{"aria-label":"toggle password visibility",onClick:w,onMouseDown:N,children:r.showPassword?Object(n.jsx)(Qe.a,{}):Object(n.jsx)($e.a,{})})})})]}),Object(n.jsxs)(re.a,{className:Object(ae.a)(e.margin,e.textField),fullWidth:!0,children:[Object(n.jsxs)(oe.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Confirm Password"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(ie.a,{id:"standard-adornment-confirmPassword",type:r.showPassword1?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:y("confirmPassword"),startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(ye.a,{style:{color:we.a[600]}})}),endAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(le.a,{"aria-label":"toggle password visibility",onClick:S,onMouseDown:N,children:r.showPassword1?Object(n.jsx)(Qe.a,{}):Object(n.jsx)($e.a,{})})})})]}),Object(n.jsxs)(re.a,{component:"fieldset",className:e.margin,children:[Object(n.jsxs)(de.a,{component:"legend",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic",fontSize:"0.9rem",marginLeft:"0.4rem"},children:" Gender"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsxs)(ue.a,{"aria-label":"gender",name:"gender1",style:{display:"initial",marginLeft:"4rem"},value:r.gender,onChange:y("gender"),children:[Object(n.jsx)(je.a,{value:"female",control:Object(n.jsx)(me.a,{style:{color:Se.a[900]}}),label:"Female"}),Object(n.jsx)(je.a,{value:"male",control:Object(n.jsx)(me.a,{style:{color:Se.a[900]}}),label:"Male"}),Object(n.jsx)(je.a,{value:"other",control:Object(n.jsx)(me.a,{style:{color:Se.a[900]}}),label:"Other"})]})]}),Object(n.jsx)(E.a,{style:{color:we.a[50],backgroundColor:Se.a[600],fontWeight:"bold",borderRadius:"1rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:C,children:"Next"})]})}),Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4})]})})]})},ot=function(e,t){switch(t.type){case"updatePermission":return{state:t.value};default:return e}},it=Object(s.createContext)(),lt=function(e){var t=Object(s.useReducer)(ot,"1",(function(){var e=localStorage.getItem("deletion");return e?JSON.parse(e):""})),a=Object(u.a)(t,2),c=a[0],r=a[1];return Object(s.useEffect)((function(){localStorage.setItem("deletion",JSON.stringify(c))}),[c]),Object(n.jsx)(it.Provider,{value:{deletemsg:c,dispatch:r},children:e.children})},dt=Object(Pe.a)((function(e){return{textField:{marginTop:e.spacing(2)},margin:{marginBottom:e.spacing(2)}}})),ut=function(e){var t=e.onIdSubmit,a=e.setId,r=(e.isLogin,e.setLogin),o=Object(m.g)(),i=Object(s.useContext)(R),l=(i.setSocket,i.roomJoin,i.messageEvent),b=i.friendReq,g=dt(),h=Object(s.useContext)(it).dispatch;Object(s.useContext)(D).getUnreadMsgs,c.a.useRef();Object(s.useEffect)((function(){x()&&1===x().role?o.push("/admin/dashboard"):x()&&0===x().role&&o.push("/user/dashboard")}),[o]),window.onload=function(){b(),l()};var O=Object(s.useState)({email:"",password:"",errorMessage:"",showPassword:!1,loading:!1}),p=Object(u.a)(O,2),v=p[0],y=p[1],w=v.email,S=v.password,N=v.errorMessage,k=v.loading;Object(s.useEffect)((function(){console.log("helloooo")}),[]);var C=function(){y(Object(d.a)(Object(d.a)({},v),{},{showPassword:!v.showPassword}))},M=function(e){e.preventDefault()},I=function(e){var t;y(Object(d.a)(Object(d.a)({},v),{},(t={},Object(te.a)(t,e.target.name,e.target.value),Object(te.a)(t,"errorMessage",""),t)))},P=function(e){if(e.preventDefault(),Me()(w)||Me()(S))y(Object(d.a)(Object(d.a)({},v),{},{errorMessage:"Both fields are required"}));else if(ke()(w)){y(Object(d.a)(Object(d.a)({},v),{},{loading:!0}));var n=v.email,s=v.password;st({email:n,password:s}).then((function(e){f(e.data.token,e.data.user),console.log(e),x()&&1===x().role||r(!0),o.push("/dashboard/"+x()._id),y(Object(d.a)(Object(d.a)({},v),{},{loading:!1})),a(x()._id),""==JSON.parse(localStorage.getItem("deletion"))&&h({type:"updatePermission",value:!1})})).catch((function(e){y(Object(d.a)(Object(d.a)({},v),{},{password:"",loading:!1,errorMessage:e.response.data.errorMessage}))})),t(n),console.log("email",n)}else y(Object(d.a)(Object(d.a)({},v),{},{errorMessage:"Invalid Email"}))};return Object(n.jsxs)("div",{className:"login_div",children:[k&&Object(n.jsx)(Ee,{}),Object(n.jsx)(be,{className:"title",name:"TalkSee"}),function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(L.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(ne.a,{className:"Login-container",style:{padding:"30px 50px"},children:[Object(n.jsxs)(L.a,{container:!0,style:{textAlign:"center"},children:[Object(n.jsx)(L.a,{item:!0,xs:6,children:Object(n.jsx)(j.b,{className:"active-header",to:"/login",children:"Sign In"})}),Object(n.jsx)(L.a,{item:!0,xs:6,children:Object(n.jsx)(j.b,{className:"header",to:"/signup",children:"Sign Up"})})]}),Object(n.jsx)(se.a,{className:g.textField,style:{marginTop:"2rem"},label:Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Email Address "}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red"},children:"*"})]}),id:"email-field",name:"email",value:v.email,fullWidth:!0,onChange:I,InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(he.a,{style:{color:we.a[600]}})})}}),Object(n.jsxs)(re.a,{className:Object(ae.a)(g.margin,g.textField),fullWidth:!0,children:[Object(n.jsxs)(oe.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Password"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(ie.a,{id:"standard-adornment-password",type:v.showPassword?"text":"password",name:"password",value:v.password,onChange:(e="password",function(t){var a;y(Object(d.a)(Object(d.a)({},v),{},(a={},Object(te.a)(a,e,t.target.value),Object(te.a)(a,"errorMessage",""),a)))}),startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(ye.a,{style:{color:we.a[600]}})}),endAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(le.a,{"aria-label":"toggle password visibility",onClick:C,onMouseDown:M,children:v.showPassword?Object(n.jsx)(Qe.a,{}):Object(n.jsx)($e.a,{})})})})]}),Object(n.jsx)(E.a,{style:{color:we.a[50],backgroundColor:Se.a[600],fontWeight:"bold",borderRadius:"1rem",marginBottom:"1.2rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:P,children:"Sign in"}),Object(n.jsx)(j.b,{to:"/forgot-password",style:{textDecoration:"none",marginLeft:"1rem auto"},children:"Forgot Password?"})]})}),Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4})]})});var e}(),N&&Object(n.jsx)(Ze,{type:"error",message:N,autoClose:4e3})]})},jt=a(204),mt=a.n(jt),bt=a(155),gt=a(327),ht=a.n(gt),Ot=a(328),ft=a.n(Ot),xt=function(e){var t=e.match,a=t.params.token,c=Object(s.useState)({firstName:"",lastName:"",token:"",errorMessage:"",successMsg:""}),r=Object(u.a)(c,2),o=r[0],i=r[1],l=o.firstName,j=o.lastName,b=(o.token,o.errorMessage),g=o.successMsg,h=Object(m.g)();Object(s.useEffect)((function(){var e=t.params.token,a=mt.a.decode(e).firstName,n=mt.a.decode(e).lastName;e&&(i(Object(d.a)(Object(d.a)({},o),{},{firstName:a,lastName:n,token:e})),X.accountActivation({token:e}).then((function(e){i(Object(d.a)(Object(d.a)({},o),{},{errorMessage:!1,successMsg:e.successMessage,firstName:e.firstName,lastName:e.lastName}))})).catch((function(e){i(Object(d.a)(Object(d.a)({},o),{},{successMsg:!1,errorMessage:e.response.data.errorMessage,firstName:e.response.data.firstName,lastName:e.response.data.lastName}))})))}),[t.params]);return Object(n.jsxs)("div",{children:[Object(n.jsx)($,{name:"Activation"}),b&&Object(n.jsx)("div",{children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsxs)(L.a,{item:!0,xs:1,sm:3,md:4,children:[Object(n.jsx)("p",{children:Object(n.jsxs)("strong",{children:["Hi ",l+" "+j]})}),Object(n.jsxs)("div",{children:["  ",Object(n.jsx)(ft.a,{style:{color:bt.a[600]}}),Object(n.jsxs)("span",{style:{fontSize:"1.3rem"},children:[" ",Object(n.jsx)("strong",{children:b})," "]})]}),Object(n.jsx)(E.a,{style:{color:we.a[50],backgroundColor:Se.a[600],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},variant:"contained",className:"loginbtn",onClick:function(e){return h.push("/signup")},children:"Try  Again"})]}),Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4})]})}),g&&Object(n.jsx)("div",{children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsxs)(L.a,{item:!0,xs:1,sm:3,md:4,children:[Object(n.jsx)("p",{children:Object(n.jsxs)("strong",{children:["Hi ",l+" "+j]})}),Object(n.jsxs)("div",{children:["  ",Object(n.jsx)(ht.a,{style:{color:De.a[600],paddingTop:"0.3rem"}}),Object(n.jsx)("span",{style:{fontSize:"1.3rem"},children:" Your account has been successfully verified. Click below to create your profile"})]}),Object(n.jsx)(E.a,{style:{color:we.a[50],backgroundColor:Se.a[600],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},variant:"contained",className:"loginbtn",onClick:function(e){return h.push("/profile-setup/"+a)},children:"Create Profile"})]}),Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4})]})})]})},pt=function(){return Object(n.jsx)("div",{style:{marginTop:"10rem"},children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsxs)(L.a,{item:!0,xs:10,sm:6,md:4,children:[Object(n.jsx)("h1",{children:" Error 404"}),Object(n.jsx)("h5",{style:{marginLeft:"2rem"},children:"Page Not Found"})]}),Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4})]})})},vt=a(154),yt=a(84),wt=a.n(yt),St=function(){var e=Object(s.useState)({email:"",errorMessage:"",successMsg:"",loading:!1}),t=Object(u.a)(e,2),a=t[0],c=t[1],r=a.email,o=a.successMsg,i=a.errorMessage,l=a.loading,j=function(e){var t;c(Object(d.a)(Object(d.a)({},a),{},(t={},Object(te.a)(t,e.target.name,e.target.value),Object(te.a)(t,"errorMessage",""),Object(te.a)(t,"successMsg",""),t)))},m=function(e){if(e.preventDefault(),Me()(r))c(Object(d.a)(Object(d.a)({},a),{},{errorMessage:"Field is required"}));else if(ke()(r)){var t=a.email;c(Object(d.a)(Object(d.a)({},a),{},{loading:!0})),X.forgotPassword({email:t}).then((function(e){c(Object(d.a)(Object(d.a)({},a),{},{email:"",errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){c(Object(d.a)(Object(d.a)({},a),{},{loading:!1,email:"",successMsg:!1,errorMessage:e.response.data.errorMessage}))}))}else c(Object(d.a)(Object(d.a)({},a),{},{errorMessage:"Invalid Email  syntax"}))};return Object(n.jsxs)("div",{children:[l&&Object(n.jsx)(Ee,{}),Object(n.jsx)($,{name:"Forgot Password"}),i&&Object(n.jsx)(Ze,{type:"error",message:i,autoClose:4e3}),o&&Object(n.jsx)(Ze,{type:"success",message:o,autoClose:4e3}),Object(n.jsx)("div",{children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(L.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(ne.a,{style:{padding:"30px 50px"},children:[Object(n.jsxs)(E.a,{className:"loginbtn",href:"/login",color:"primary",style:{marginBottom:"2rem",paddingLeft:"0rem",color:vt.a[800]},children:[Object(n.jsx)(wt.a,{style:{fontWeight:"bold",marginRight:"0.3rem"}})," Go Back"]}),Object(n.jsx)(se.a,{label:Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Email Address "}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red"},children:"*"})]}),id:"filled-start-adornment1",variant:"outlined",name:"email",value:a.email,fullWidth:!0,onChange:j,InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(he.a,{style:{color:we.a[600]}})})}}),Object(n.jsx)(E.a,{style:{color:we.a[50],backgroundColor:Se.a[600],fontWeight:"bold",borderRadius:"12rem",marginTop:"1.5rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:m,children:"Submit"})]})}),Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4})]})})]})},Nt=Object(Pe.a)((function(e){return{textfield:{margin:e.spacing(1)},margin:{marginTop:"1.2rem"}}})),kt=function(e){var t=e.match,a=Nt(),c=Object(m.g)(),r=Object(s.useState)({token:"",password:"",confirmPassword:"",errorMessage:"",successMsg:"",showPassword:!1,showPassword1:!1,loading:!1}),o=Object(u.a)(r,2),i=o[0],l=o[1],j=i.token,b=i.password,g=i.confirmPassword,h=i.errorMessage,O=i.successMsg,f=i.loading;Object(s.useEffect)((function(){var e=t.params.token;e&&l(Object(d.a)(Object(d.a)({},i),{},{token:e}))}),[]);var x=function(e){e.preventDefault()},p=function(e){return function(t){var a;l(Object(d.a)(Object(d.a)({},i),{},(a={},Object(te.a)(a,e,t.target.value),Object(te.a)(a,"errorMessage",""),Object(te.a)(a,"successMsg",""),a)))}},v=function(){l(Object(d.a)(Object(d.a)({},i),{},{showPassword:!i.showPassword}))},y=function(){l(Object(d.a)(Object(d.a)({},i),{},{showPassword1:!i.showPassword1}))},w=function(e){e.preventDefault(),Me()(b)||Me()(g)?l(Object(d.a)(Object(d.a)({},i),{},{errorMessage:"All fields are required"})):Re()(b,g)?(l(Object(d.a)(Object(d.a)({},i),{},{loading:!0})),X.resetPassword({newPassword:b,resetPasswordLink:j}).then((function(e){l(Object(d.a)(Object(d.a)({},i),{},{password:"",confirmPassword:"",errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){l(Object(d.a)(Object(d.a)({},i),{},{password:"",confirmPassword:"",loading:!1,errorMessage:e.response.data.errorMessage}))}))):l(Object(d.a)(Object(d.a)({},i),{},{errorMessage:"Passwords do not match"}))};return Object(n.jsxs)("div",{children:[f&&Object(n.jsx)(Ee,{}),h&&Object(n.jsx)(Ze,{type:"error",message:h,autoClose:4e3}),O&&Object(n.jsx)(Ze,{type:"success",message:O,autoClose:4e3}),Object(n.jsx)($,{name:"Reset Password"}),Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(L.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(ne.a,{style:{padding:"30px 50px"},children:[Object(n.jsxs)(E.a,{className:"loginbtn",href:"https://mail.google.com/mail/u/0/#inbox",color:"primary",style:{marginBottom:"2rem",paddingLeft:"0rem",color:vt.a[800]},children:[Object(n.jsx)(wt.a,{style:{fontWeight:"bold",marginRight:"0.3rem"}})," Go Back"]}),Object(n.jsxs)(re.a,{className:Object(ae.a)(a.textField),fullWidth:!0,children:[Object(n.jsxs)(oe.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" New Password"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(ie.a,{id:"standard-adornment-password",type:i.showPassword?"text":"password",name:"password",value:i.password,onChange:p("password"),startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(fe.a,{style:{color:we.a[600]}})}),endAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(le.a,{"aria-label":"toggle password visibility",onClick:v,onMouseDown:x,children:i.showPassword?Object(n.jsx)(Qe.a,{}):Object(n.jsx)($e.a,{})})})})]}),Object(n.jsxs)(re.a,{className:Object(ae.a)(a.margin,a.textField),fullWidth:!0,children:[Object(n.jsxs)(oe.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Confirm Password"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(ie.a,{id:"standard-adornment-confirmPassword",type:i.showPassword1?"text":"password",name:"confirmPassword",value:i.confirmPassword,onChange:p("confirmPassword"),startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(ye.a,{style:{color:we.a[600]}})}),endAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(le.a,{"aria-label":"toggle password visibility",onClick:y,onMouseDown:x,children:i.showPassword1?Object(n.jsx)(Qe.a,{}):Object(n.jsx)($e.a,{})})})})]}),Object(n.jsx)(E.a,{style:{color:we.a[50],backgroundColor:Se.a[600],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:w,children:"Reset Password"}),O&&Object(n.jsx)(E.a,{style:{backgroundColor:we.a[500],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},className:"loginbtn",variant:"outline",fullWidth:!0,onClick:function(e){return c.push("/login")},children:"Login"})]})}),Object(n.jsx)(L.a,{item:!0,xs:1,sm:3,md:4})]})]})},Ct=a(116),Mt=a(114),It=a.n(Mt),Rt=a(115),Pt=a.n(Rt),Tt=Object(Pe.a)({textfield:{marginTop:"2rem"},Submitbtn:{marginTop:"0.6rem"}}),Lt=function(e){var t=e.match,a=Tt(),r=Object(m.g)(),o=c.a.useRef(null),i=c.a.useState(!1),j=Object(u.a)(i,2),b=j[0],g=j[1],h=[{label:"Afrikaans",value:"af"},{label:"Albanian",value:"sq"},{label:"Amharic",value:"am"},{label:"Arabic",value:"ar"},{label:"Armenian",value:"hy"},{label:"Azerbaijani",value:"az"},{label:"Basque",value:"eu"},{label:"Belarusian",value:"be"},{label:"Bengali",value:"bn"},{label:"Bosnian",value:"bs"},{label:"Bulgarian",value:"bg"},{label:"Catalan",value:"ca"},{label:"Cebuano",value:"ceb"},{label:"Chichewa",value:"ny"},{label:"Chinese",value:"zh-cn"},{label:"Corsican",value:"co"},{label:"Croatian",value:"hr"},{label:"Czech",value:"cs"},{label:"Danish",value:"da"},{label:"Dutch",value:"nl"},{label:"English",value:"en"},{label:"Esperanto",value:"eo"},{label:"Estonian",value:"et"},{label:"Filipino",value:"tl"},{label:"Finnish",value:"fi"},{label:"French",value:"fr"},{label:"Danish",value:"da"},{label:"Frisian",value:"fy"},{label:"Galician",value:"gl"},{label:"Georgian",value:"ka"},{label:"German",value:"de"},{label:"Greek",value:"el"},{label:"Gujarati",value:"gu"},{label:"Haitian creole",value:"ht"},{label:"Hausa",value:"ha"},{label:"Hawaiian",value:"haw"},{label:"Hebrew",value:"iw"},{label:"Hindi",value:"hi"},{label:"Hmong",value:"hmn"},{label:"Hungarian",value:"hu"},{label:"Icelandic",value:"is"},{label:"Igbo",value:"ig"},{label:"Indonesian",value:"id"},{label:"Irish",value:"ga"},{label:"Italian",value:"it"},{label:"Japanese",value:"ja"},{label:"Javanese",value:"jw"},{label:"Kannada",value:"kn"},{label:"Kazakh",value:"kk"},{label:"Khmer",value:"km"},{label:"Korean",value:"ko"},{label:"Kurdish",value:"ku"},{label:"Kyrgyz",value:"ky"},{label:"Lao",value:"lo"},{label:"Latin",value:"la"},{label:"Latvian",value:"lv"},{label:"Lithuanian",value:"lt"},{label:"Luxembourgish",value:"lb"},{label:"Macedonian",value:"mk"},{label:"Malagasy",value:"mg"},{label:"Malay",value:"ms"},{label:"Malayalam",value:"ml"},{label:"Maltese",value:"mt"},{label:"Maori",value:"mi"},{label:"Marathi",value:"mr"},{label:"Mongolian",value:"mn"},{label:"Myanmar (burmese)",value:"my"},{label:"Nepali",value:"ne"},{label:"Norwegian",value:"no"},{label:"Odia",value:"or"},{label:"Pashto",value:"ps"},{label:"Persian",value:"fa"},{label:"Polish",value:"pl"},{label:"Portuguese",value:"pt"},{label:"Punjabi",value:"pa"},{label:"Romanian",value:"ro"},{label:"Russian",value:"ru"},{label:"Samoan",value:"sm"},{label:"Scots gaelic",value:"gd"},{label:"Serbian",value:"sr"},{label:"Sesotho",value:"st"},{label:"Shona",value:"sn"},{label:"Sindhi",value:"sd"},{label:"Sinhala",value:"si"},{label:"Slovak",value:"sk"},{label:"Slovenian",value:"sl"},{label:"Somali",value:"so"},{label:"Spanish",value:"es"},{label:"Sundanese",value:"su"},{label:"Swahili",value:"sw"},{label:"Swedish",value:"sv"},{label:"Tajik",value:"tg"},{label:"Tamil",value:"ta"},{label:"Telugu",value:"te"},{label:"Thai",value:"th"},{label:"Turkish",value:"tr"},{label:"Ukrainian",value:"uk"},{label:"Urdu",value:"ur"},{label:"Uyghur",value:"ug"},{label:"Uzbek",value:"uz"},{label:"Vietnamese",value:"vi"},{label:"Welsh",value:"cy"},{label:"Xhosa",value:"xh"},{label:"Yiddish",value:"yi"},{label:"Yoruba",value:"yo"},{label:"Zulu",value:"zu"}],O=Object(s.useState)({img:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",language:"",token:"",errorMessage:"",successMsg:"",infoMessage:"",loading:!1}),f=Object(u.a)(O,2),x=f[0],p=f[1],v=x.img,y=x.language,w=x.token,S=x.successMsg,N=x.errorMessage,k=x.infoMessage,C=x.loading;Object(s.useEffect)((function(){var e=t.params.token;e&&p(Object(d.a)(Object(d.a)({},x),{},{token:e}))}),[]);var M=function(e){return new Promise((function(t){It.a.imageFileResizer(e,300,300,"JPEG",100,0,(function(e){t(e)}),"base64")}))},I=c.a.useCallback((function(){try{var e=o.current.getScreenshot();p(Object(d.a)(Object(d.a)({},x),{},{infoMessage:"Picture Captured"}));var t=new FormData;t.append("file",e),l.a.post("http://127.0.0.1:5000/webcam-face-detection",t).then(function(){var a=Object(at.a)(tt.a.mark((function a(n){return tt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:"",successMsg:n.data.successMessage})),p(Object(d.a)(Object(d.a)({},x),{},{infoMessage:"Loading...."})),t.append("file",e),t.append("upload_preset","TalkSee"),fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){return p(Object(d.a)(Object(d.a)({},x),{},{img:e.url}))})).catch((function(e){return console.error("Error:",e)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}catch(a){p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:"error in uploading photo"}))}}),[o]),R=function(){var e=Object(at.a)(tt.a.mark((function e(t){var a,n;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.files[0],(n=new FormData).append("file",a),l.a.post("http://127.0.0.1:5000/",n).then(function(){var e=Object(at.a)(tt.a.mark((function e(t){var s,c,r;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:"",successMsg:"response.data.successMessage"})),e.next=3,M(a);case 3:return s=e.sent,p(Object(d.a)(Object(d.a)({},x),{},{infoMessage:"Loading...."})),n.append("file",s),n.append("upload_preset","TalkSee"),e.next=9,fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"POST",body:n});case 9:return c=e.sent,e.next=12,c.json();case 12:r=e.sent,p(Object(d.a)(Object(d.a)({},x),{},{img:r.secure_url}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:e.response.data.errorMessage}))}))}catch(s){p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:"error in uploading photo"}))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){X.profileSetup({profileImg:v,langPreference:y,token:w}).then((function(e){p(Object(d.a)(Object(d.a)({},x),{},{img:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",language:"",errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:e.response.data.errorMessage}))}))};return Object(n.jsxs)("div",{children:[C&&Object(n.jsx)(Ee,{}),Object(n.jsx)($,{name:"Profile Setup"}),N&&Object(n.jsx)(Ze,{type:"error",message:N,autoClose:3e3}),k&&Object(n.jsx)(Ze,{type:"info",message:k,autoClose:8e3}),S&&Object(n.jsx)(Ze,{type:"success",message:S,autoClose:2500}),Object(n.jsxs)("div",{className:"profile-page",children:[Object(n.jsxs)("div",{className:"profile-container",children:[Object(n.jsx)("div",{className:"img-holder",children:Object(n.jsx)("img",{src:v,className:"profile-img"})}),Object(n.jsx)("input",{type:"file",accept:"image/*",name:"image-upload",id:"input",onChange:R}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("label",{className:"image-upload",htmlFor:"input",children:[Object(n.jsx)("i",{className:"material-icons",children:"add_photo_alternate"}),"Choose Profile Photo"]})}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("button",{className:"take-photo loginbtn","data-toggle":"modal","data-target":"#exampleModalCenter",onClick:function(){return g(!1)},children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Take Photo"]})}),Object(n.jsx)(Ct.a,{style:{width:210,padding:"0.4rem"},placeholder:"Select Language ---",value:h.find((function(e){return e.label===y})),className:a.textfield,options:h,onChange:function(e){console.log(e),p(Object(d.a)(Object(d.a)({},x),{},{language:e.value}))}}),Object(n.jsx)(E.a,{style:{color:we.a[50],backgroundColor:Se.a[600],fontWeight:"bold",borderRadius:"0.5rem",marginTop:"1.5rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:P,children:"Set Profile"}),S&&Object(n.jsx)(E.a,{style:{backgroundColor:we.a[500],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},className:"loginbtn",variant:"outline",fullWidth:!0,onClick:function(e){return r.push("/login")},children:"Login"})]}),Object(n.jsx)("div",{className:"modal fade",id:"exampleModalCenter",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h3",{className:"modal-title",id:"exampleModalLongTitle",children:"Take Photo"}),Object(n.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsx)("div",{className:"webcam-container",children:Object(n.jsx)(Pt.a,{audio:!1,height:200,width:460,ref:o,screenshotFormat:"image/jpeg"})})}),b?Object(n.jsx)("div",{className:"modal-footer",children:Object(n.jsx)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",children:"Close"})}):Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsxs)("button",{className:"take-photo loginbtn",onClick:I,children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Capture photo"]})," "]})]})})})]})]})},Et=a(633),Dt=a(622),_t=function(e){var t=e.contact,a="/"+t._id,c=(Object(m.g)(),JSON.parse(localStorage.getItem("user"))),r=Object(s.useState)(!c.sentRequests.includes(t._id)),o=Object(u.a)(r,2),i=o[0],l=o[1],d=Object(s.useContext)(R).clientSocket,j=x()._id,b=x().firstName+" "+x().lastName,g=x().profileImg,h=x().email,O=x().gender,f=x().langPreference;return Object(n.jsx)("div",{children:Object(n.jsx)(ne.a,{style:{padding:"10px 20px",marginBottom:"1rem"},children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsxs)(L.a,{item:!0,xs:3,md:1,children:["  ",Object(n.jsx)("img",{src:t.profileImg,style:{height:"60px",width:"60px",borderRadius:"20%",display:"inline"},alt:"img"})," "]}),Object(n.jsx)(L.a,{item:!0,xs:9,md:9,children:Object(n.jsxs)("div",{style:{display:"inline"},children:[Object(n.jsx)("p",{className:"user_names",children:t.firstName+" "+t.lastName}),Object(n.jsx)(Z.a,{style:{color:"gray",fontStyle:"italic",fontSize:"0.9rem"},children:t.email})]})}),Object(n.jsx)(Et.a,{only:["md","lg"],children:Object(n.jsx)(L.a,{item:!0,xs:3})}),Object(n.jsx)(L.a,{item:!0,xs:9,md:2,children:i?Object(n.jsx)(E.a,{className:"loginbtn",style:{marginTop:"0.7rem",backgroundColor:Dt.a[600],color:"white"},variant:"contained",onClick:function(){console.log("contact Id",t._id),M.sendRequest({friendId:t._id,myId:j,myName:b,myProfileImg:g,myEmail:h,myGender:O,myLangPreference:f}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),l(!1)})).catch((function(e){console.log(e)})),d.emit("friendRequest",{myName:b,roomId:a},(function(e){e?console.log(e):console.log("emitted event")}))},children:"Add friend"}):Object(n.jsx)(E.a,{className:"loginbtn",style:{marginTop:"0.7rem",backgroundColor:we.a[500],color:"white"},variant:"contained",onClick:function(){M.cancelRequest({friendId:t._id,myId:j}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),l(!0)})).catch((function(e){console.log(e)})),d.emit("rejectfriendRequest",{myName:b,roomId:a},(function(e){e?console.log(e):console.log("emitted event")}))},children:"Requested"})})]})})})},At=new(function(e){Object(N.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getAllContact=function(){return e.get("contacts/getContact")},e.getSingleContact=function(t){return e.get("contacts/get-contact/"+t)},e}return a}(C)),Ft=a(71),qt=a.n(Ft),Wt=Object(m.h)((function(e){var t=e.history;t=Object(m.g)();var a=x()._id,c=x().profileImg,r=x().firstName,o=x().lastName,i=Object(s.useContext)(R),l=(i.clientSocket,i.setSocket,i.messageEvent,i.roomJoin),d=(i.friendReq,i.getRequest),u=i.frndcounter,b=i.msgCounter;return Object(s.useEffect)((function(){d()}),[u]),Object(s.useEffect)((function(){l(a)}),[]),Object(n.jsx)("div",{class:"wrapper",children:Object(n.jsxs)("div",{class:"sidebar",children:[Object(n.jsx)("div",{id:"profile_div",children:Object(n.jsx)("img",{src:c,alt:"Profile",style:{height:"90px",width:"90px",borderRadius:"50%",cursor:"pointer"},onClick:function(){return t.push("/update-my-profile-setup/"+a)}})}),Object(n.jsx)("h4",{children:r+" "+o}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:b>=1?Object(n.jsxs)(j.b,{to:{pathname:"/mychats/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-comments",children:Object(n.jsx)("span",{className:"friendCounter",children:b})})," My Chats"]}):Object(n.jsxs)(j.b,{to:{pathname:"/mychats/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-comments"})," My Chats"]})}),Object(n.jsx)("li",{children:Object(n.jsxs)(j.b,{to:{pathname:"/update-my-profile-setup/".concat(a)},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-user-cog"})," Profile Setting"]})}),Object(n.jsx)("li",{children:u>=1?Object(n.jsxs)(j.b,{to:{pathname:"/my-contact-list/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-address-book",children:Object(n.jsx)("span",{className:"friendCounter",children:u})})," Contacts"]}):Object(n.jsxs)(j.b,{to:{pathname:"/my-contact-list/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-address-book"})," Contacts"]})})]}),Object(n.jsx)("div",{class:"social_media",children:Object(n.jsxs)("button",{className:"btn text-decoration-none btn-link",onClick:function(e){p((function(){t.push("/login")}))},children:[Object(n.jsx)("i",{className:"fas fa-sign-out-alt"})," Logout"]})})]})})})),Jt=function(e){var t=x()._id,a=x().email,r=Object(s.useState)(!1),o=Object(u.a)(r,2),i=o[0],l=o[1],d=(Object(m.g)(),Object(s.useState)("")),j=Object(u.a)(d,2),b=j[0],g=j[1],h=c.a.useState([]),O=Object(u.a)(h,2),f=O[0],p=O[1],v=Object(s.useRef)(),w=Object(s.useRef)();v.current="/"+e.match.params.id;var S=Object(s.useContext)(R),N=(S.clientSocket,S.setSocket),k=S.roomJoin,C=S.messageEvent,I=S.friendReq;window.onload=function(){I(),C();var e=JSON.parse(localStorage.getItem("user"))._id;k(e),w=y()("http://localhost:5000/"),N((function(e){return(e=w).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:a})})),e}))};return Object(s.useEffect)((function(){M.getSentFriendRequest(t).then((function(e){localStorage.setItem("user",JSON.stringify(e))})).catch((function(e){console.log(e)})),At.getSingleContact(t).then((function(e){p(e),l(!0)})).catch((function(e){console.log(e)}))}),[]),Object(s.useEffect)((function(){}),[]),Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(Et.a,{only:["xs","sm"],children:Object(n.jsx)(L.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(Et.a,{only:["md","lg"],children:Object(n.jsx)(L.a,{item:!0,xs:12,children:Object(n.jsx)(T,{setLogin:e.setLogin})})}),Object(n.jsxs)(L.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)($,{name:"Add Friend"}),i?Object(n.jsx)("div",{children:0===f.length?Object(n.jsx)("div",{style:{textAlign:"center",fontSize:"1.4rem",padding:"6rem",fontWeight:"bold"},children:"No TalkSee User Found\ud83d\ude1e"}):Object(n.jsx)("div",{children:Object(n.jsxs)(L.a,{container:!0,style:{marginTop:"0.9rem"},children:[Object(n.jsx)(L.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsxs)(L.a,{item:!0,xs:10,md:10,children:[Object(n.jsxs)(L.a,{container:!0,style:{marginBottom:"1rem"},children:[Object(n.jsx)(L.a,{item:!0,xs:0,md:8,children:" "}),Object(n.jsx)(L.a,{item:!0,xs:12,md:4,children:Object(n.jsx)(se.a,{value:b,onChange:function(e){return g(e.currentTarget.value)},placeholder:"Search by typing name",InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(qt.a,{style:{color:"black",marginRight:"0.4rem",float:"right"}})})}})})]}),f.filter((function(e){return""===b||e.firstName.toLowerCase().startsWith(b.toLowerCase())||e.lastName.toLowerCase().startsWith(b.toLowerCase())?e:void 0})).map((function(e,a){return e._id===t?Object(n.jsx)("div",{}):Object(n.jsx)(_t,{contact:e,roomId:v.current},a)}))]}),Object(n.jsx)(L.a,{item:!0,xs:1,md:1})]})})}):Object(n.jsxs)("div",{class:"d-flex justify-content-center",children:[Object(n.jsx)("strong",{style:{marginRight:"1rem"},children:"Loading..."}),Object(n.jsx)("div",{class:"spinner-border",role:"status"})]})]})]})})},Bt=function(e){var t=e.friendreq,a=e.onAcceptReject,s=x()._id,c=x().firstName+" "+x().lastName,r=x().profileImg,o=x().email,i=x().gender,l=x().langPreference;return Object(n.jsx)("div",{children:Object(n.jsx)(ne.a,{style:{padding:"20px 10px",marginBottom:"1rem"},children:Object(n.jsxs)(L.a,{container:!0,style:{display:"flex"},children:[Object(n.jsxs)(L.a,{item:!0,xs:12,sm:12,md:9,children:[Object(n.jsx)("img",{src:t.profileImg,style:{marginRight:"0.5rem",height:"60px",width:"60px",borderRadius:"50%",display:"inline",padding:"0.2rem"},alt:"img"}),Object(n.jsx)("p",{className:"user_names",children:t.name})]}),Object(n.jsxs)(L.a,{item:!0,xs:12,sm:12,md:3,children:[Object(n.jsx)(E.a,{className:"loginbtn",style:{backgroundColor:Dt.a[700],color:"white",margin:"0.4rem"},variant:"contained",size:"medium",onClick:function(){M.acceptRequest({friendId:t.id,friendName:t.name,friendProfileImg:t.profileImg,chatId:t.email+"/"+o,friendEmail:t.email,friendGender:t.gender,friendLangPreference:t.langPreference,myId:s,myName:c,myProfileImg:r,myEmail:o,myGender:i,myLangPreference:l}).then((function(e){a(),localStorage.setItem("user",JSON.stringify(e)),console.log(e)})).catch((function(e){console.log(e)}))},children:"Accept"}),Object(n.jsx)(E.a,{className:"loginbtn",style:{backgroundColor:we.a[600],color:"white"},variant:"contained",onClick:function(){M.rejectRequest({friendId:t.id,myId:s}).then((function(e){a(),localStorage.setItem("user",JSON.stringify(e))})).catch((function(e){console.log(e)}))},children:"Reject"})]})]})})})},zt=function(e){var t=x()._id,a=c.a.useState([]),r=Object(u.a)(a,2),o=r[0],i=r[1],l=Object(s.useState)(""),d=Object(u.a)(l,2),j=d[0],b=d[1],g=Object(s.useState)(!1),h=Object(u.a)(g,2),O=h[0],f=h[1],p=Object(s.useRef)(),v=x().email,w=Object(s.useContext)(R),S=w.setSocket,N=w.roomJoin,k=w.messageEvent,C=w.friendReq,I=w.getRequest,P=w.acceptRejectCounter;Object(s.useRef)().current="/"+e.match.params.id;Object(m.g)();window.onload=function(){C(),k(),I();var e=JSON.parse(localStorage.getItem("user"))._id;N(e),p=y()("http://localhost:5000/"),S((function(e){return(e=p).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:v.current})})),e}))};var E=function(){M.getFriendRequest(t).then((function(e){i(e),f(!0),P()})).catch((function(e){console.log(e)}))};return Object(s.useEffect)(E,[]),Object(s.useEffect)((function(){}),[]),Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(Et.a,{only:["xs","sm"],children:Object(n.jsx)(L.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(Et.a,{only:["md","lg"],children:Object(n.jsx)(L.a,{item:!0,xs:12,children:Object(n.jsx)(T,{setLogin:e.setLogin})})}),Object(n.jsxs)(L.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)($,{name:"Friend Requests"}),O?Object(n.jsxs)("div",{children:[" ",0===o.length?Object(n.jsx)("div",{style:{textAlign:"center",fontSize:"1.4rem",padding:"6rem",fontWeight:"bold"},children:"You have no friend request\ud83d\ude1e"}):Object(n.jsx)("div",{children:Object(n.jsxs)(L.a,{container:!0,style:{marginTop:"0.9rem"},children:[Object(n.jsx)(L.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsxs)(L.a,{item:!0,xs:10,md:10,children:[Object(n.jsxs)(L.a,{container:!0,style:{marginBottom:"1rem"},children:[Object(n.jsx)(L.a,{item:!0,xs:0,md:7,children:" "}),Object(n.jsx)(L.a,{item:!0,xs:12,md:5,children:Object(n.jsx)(se.a,{value:j,onChange:function(e){return b(e.currentTarget.value)},placeholder:"Search by typing name",InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(qt.a,{style:{color:"black",marginRight:"0.4rem",float:"right"}})})}})})]}),o.filter((function(e){return""==j||e.name.toLowerCase().startsWith(j.toLowerCase())?e:void 0})).map((function(e,t){return Object(n.jsx)(Bt,{friendreq:e,onAcceptReject:E},t)}))]}),Object(n.jsx)(L.a,{item:!0,xs:1,md:10})]})})]}):Object(n.jsxs)("div",{class:"d-flex justify-content-center",children:[Object(n.jsx)("strong",{style:{marginRight:"1rem"},children:"Loading..."}),Object(n.jsx)("div",{class:"spinner-border",role:"status"})]})]})]})})},Ut=a(623),Ht=function(e){var t=e.friend,a=e.onRemove,s=e.chatRec;console.log(s);var c=x()._id,r=t.email,o=Object(m.g)();return Object(n.jsx)(ne.a,{style:{padding:"20px 10px",marginBottom:"1rem"},children:Object(n.jsxs)(L.a,{container:!0,style:{display:"flex"},children:[Object(n.jsxs)(L.a,{item:!0,xs:12,sm:12,md:9,children:[Object(n.jsx)("img",{src:t.profileImg,style:{marginRight:"0.5rem",height:"60px",width:"60px",borderRadius:"20%",display:"inline",padding:"0.2rem"},alt:"img"}),Object(n.jsx)("p",{className:"user_names",children:t.name})]}),Object(n.jsxs)(L.a,{item:!0,xs:12,sm:12,md:3,children:[Object(n.jsx)(E.a,{className:"loginbtn",style:{backgroundColor:Ut.a[700],color:"white",margin:"0.4rem"},variant:"contained",size:"medium",onClick:function(){return e=t,console.log("Fr",e),console.log("pth","/chat/"+r+"/ "+e.id),localStorage.setItem("friendId",e.id),localStorage.setItem("recName",e.name),localStorage.setItem("recLang",e.langPreference),localStorage.setItem("profileUrl",e.profileImg),void o.push("/chat/"+r+" "+e.id);var e},children:"Chat"}),Object(n.jsx)(E.a,{className:"loginbtn",style:{backgroundColor:bt.a[400],color:"white"},variant:"contained",onClick:function(){M.deleteFriend({friendId:t.id,myId:c}).then((function(e){a(),localStorage.setItem("user",JSON.stringify(e))})).catch((function(e){console.log(e)}))},children:"Remove"})]})]})})},Gt=new(function(e){Object(N.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getUsers=function(){return e.get("users")},e.getUserByEmail=function(t){return e.post("users/userbyemail",t)},e.getUserNameByEmail=function(t){return e.get("users/usernamebyemail/"+t)},e}return a}(C)),Kt=Object(s.createContext)();function Yt(e){var t=e.userId,a=e.children,c=Object(s.useState)([]),r=Object(u.a)(c,2),o=r[0],i=r[1],l=[],d=[],j=[],m=[],b=[],g=[];Object(s.useEffect)((function(){void 0!==t&&h(t,void 0),console.log("undefined")}),[t]);var h=function(e){return l=[],m=[],d=[],j=[],g=[],b=[],I.getChatRecipients(e).then((function(t){t.length>0?(t.map((function(e){return l.push(e)})),console.log("rec data",l),l=Array.from(new Set(l)),console.log("rec data updated",l),i((function(e){return e.Rname=l,e})),o.Rname.map((function(t){I.getLastMsg(e,t).then((function(e){d.push(e.lastMsg),j.push(e.type)})).catch((function(e){return console.log(e)})),Gt.getUserByEmail(t).then((function(e){b.push(e[0]._id),g.push(e[0].profileImg),m.push(e[0].firstName+" "+e[0].lastName),i((function(e){return e.lastMsg=d,e.msgType=j,e.recId=b,e.imgUrl=g,e.name=m,console.log(o),e}))})).catch((function(e){return console.log(e)}))}))):console.log("no data")})).catch((function(e){return console.log(e)})),o},O={chatRecipients:o,getRecData:h,setRecipients:i};return Object(n.jsx)(Kt.Provider,{value:O,children:a})}var Vt=function(e){var t=x()._id,a=c.a.useState([]),r=Object(u.a)(a,2),o=r[0],i=r[1],l=Object(s.useState)(!1),d=Object(u.a)(l,2),j=d[0],b=d[1],g=(Object(m.g)(),Object(s.useState)("")),h=Object(u.a)(g,2),O=h[0],f=h[1],p=Object(s.useRef)(),v=Object(s.useContext)(R),w=(v.clientSocket,v.setSocket),S=v.roomJoin,N=v.messageEvent,k=v.friendReq,C=Object(s.useRef)();C.current=JSON.parse(localStorage.getItem("user")).email,window.onload=function(){k(),N();var e=JSON.parse(localStorage.getItem("user"))._id;S(e),p=y()("http://localhost:5000/"),w((function(e){return(e=p).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:C.current})})),e}))};var I=function(){M.getAllFriends(t).then((function(e){i(e),b(!0)})).catch((function(e){console.log(e)}))};return Object(s.useEffect)((function(){I()}),[]),Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(Et.a,{only:["xs","sm"],children:Object(n.jsx)(L.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(Et.a,{only:["md","lg"],children:Object(n.jsx)(L.a,{item:!0,xs:12,children:Object(n.jsx)(T,{setLogin:e.setLogin})})}),Object(n.jsxs)(L.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)($,{name:"My Friends"}),j?Object(n.jsxs)("div",{children:[" ",0===o.length?Object(n.jsx)("div",{style:{textAlign:"center",fontSize:"1.4rem",padding:"6rem",fontWeight:"bold"},children:"You have no TalkSee Friend\ud83d\ude1e"}):Object(n.jsx)("div",{children:Object(n.jsxs)(L.a,{container:!0,style:{marginTop:"0.9rem",display:"flex"},children:[Object(n.jsx)(L.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsxs)(L.a,{item:!0,xs:10,md:10,children:[Object(n.jsxs)(L.a,{container:!0,style:{marginBottom:"1rem"},children:[Object(n.jsx)(L.a,{item:!0,xs:0,md:7,children:" "}),Object(n.jsx)(L.a,{item:!0,xs:12,md:5,children:Object(n.jsx)(se.a,{value:O,onChange:function(e){return f(e.currentTarget.value)},placeholder:"Search by typing name",InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(qt.a,{style:{color:"black",marginRight:"0.4rem",float:"right"}})})}})})]}),o.filter((function(e){return""==O||e.name.toLowerCase().startsWith(O.toLowerCase())?e:void 0})).map((function(e,t){return Object(n.jsx)(Ht,{friend:e,onRemove:I},t)}))]}),Object(n.jsx)(L.a,{item:!0,xs:1,md:1})]})})]}):Object(n.jsxs)("div",{class:"d-flex justify-content-center",children:[Object(n.jsx)("strong",{style:{marginRight:"1rem"},children:"Loading..."}),Object(n.jsx)("div",{class:"spinner-border",role:"status"})]})]})]})})},Xt=Object(Pe.a)({textfield:{marginTop:"2rem"},Submitbtn:{marginTop:"0.6rem"}}),Zt=function(e){var t=e.setLogin,a=Xt(),r=x()._id,o=JSON.parse(localStorage.getItem("user")).email,i=Object(s.useContext)(R),j=(i.clientSocket,i.setSocket),m=i.roomJoin,b=i.messageEvent,g=i.friendReq,h=Object(s.useRef)(),O=c.a.useRef(null),f=c.a.useState(!1),p=Object(u.a)(f,2),v=p[0],w=p[1],S=[{label:"Afrikaans",value:"af"},{label:"Albanian",value:"sq"},{label:"Amharic",value:"am"},{label:"Arabic",value:"ar"},{label:"Armenian",value:"hy"},{label:"Azerbaijani",value:"az"},{label:"Basque",value:"eu"},{label:"Belarusian",value:"be"},{label:"Bengali",value:"bn"},{label:"Bosnian",value:"bs"},{label:"Bulgarian",value:"bg"},{label:"Catalan",value:"ca"},{label:"Cebuano",value:"ceb"},{label:"Chichewa",value:"ny"},{label:"Chinese",value:"zh-cn"},{label:"Corsican",value:"co"},{label:"Croatian",value:"hr"},{label:"Czech",value:"cs"},{label:"Danish",value:"da"},{label:"Dutch",value:"nl"},{label:"English",value:"en"},{label:"Esperanto",value:"eo"},{label:"Estonian",value:"et"},{label:"Filipino",value:"tl"},{label:"Finnish",value:"fi"},{label:"French",value:"fr"},{label:"Danish",value:"da"},{label:"Frisian",value:"fy"},{label:"Galician",value:"gl"},{label:"Georgian",value:"ka"},{label:"German",value:"de"},{label:"Greek",value:"el"},{label:"Gujarati",value:"gu"},{label:"Haitian creole",value:"ht"},{label:"Hausa",value:"ha"},{label:"Hawaiian",value:"haw"},{label:"Hebrew",value:"iw"},{label:"Hindi",value:"hi"},{label:"Hmong",value:"hmn"},{label:"Hungarian",value:"hu"},{label:"Icelandic",value:"is"},{label:"Igbo",value:"ig"},{label:"Indonesian",value:"id"},{label:"Irish",value:"ga"},{label:"Italian",value:"it"},{label:"Japanese",value:"ja"},{label:"Javanese",value:"jw"},{label:"Kannada",value:"kn"},{label:"Kazakh",value:"kk"},{label:"Khmer",value:"km"},{label:"Korean",value:"ko"},{label:"Kurdish",value:"ku"},{label:"Kyrgyz",value:"ky"},{label:"Lao",value:"lo"},{label:"Latin",value:"la"},{label:"Latvian",value:"lv"},{label:"Lithuanian",value:"lt"},{label:"Luxembourgish",value:"lb"},{label:"Macedonian",value:"mk"},{label:"Malagasy",value:"mg"},{label:"Malay",value:"ms"},{label:"Malayalam",value:"ml"},{label:"Maltese",value:"mt"},{label:"Maori",value:"mi"},{label:"Marathi",value:"mr"},{label:"Mongolian",value:"mn"},{label:"Myanmar (burmese)",value:"my"},{label:"Nepali",value:"ne"},{label:"Norwegian",value:"no"},{label:"Odia",value:"or"},{label:"Pashto",value:"ps"},{label:"Persian",value:"fa"},{label:"Polish",value:"pl"},{label:"Portuguese",value:"pt"},{label:"Punjabi",value:"pa"},{label:"Romanian",value:"ro"},{label:"Russian",value:"ru"},{label:"Samoan",value:"sm"},{label:"Scots gaelic",value:"gd"},{label:"Serbian",value:"sr"},{label:"Sesotho",value:"st"},{label:"Shona",value:"sn"},{label:"Sindhi",value:"sd"},{label:"Sinhala",value:"si"},{label:"Slovak",value:"sk"},{label:"Slovenian",value:"sl"},{label:"Somali",value:"so"},{label:"Spanish",value:"es"},{label:"Sundanese",value:"su"},{label:"Swahili",value:"sw"},{label:"Swedish",value:"sv"},{label:"Tajik",value:"tg"},{label:"Tamil",value:"ta"},{label:"Telugu",value:"te"},{label:"Thai",value:"th"},{label:"Turkish",value:"tr"},{label:"Ukrainian",value:"uk"},{label:"Urdu",value:"ur"},{label:"Uyghur",value:"ug"},{label:"Uzbek",value:"uz"},{label:"Vietnamese",value:"vi"},{label:"Welsh",value:"cy"},{label:"Xhosa",value:"xh"},{label:"Yiddish",value:"yi"},{label:"Yoruba",value:"yo"},{label:"Zulu",value:"zu"}],N=Object(s.useState)({img:"",language:"",errorMessage:"",successMsg:"",infoMessage:"",loading:!1}),k=Object(u.a)(N,2),C=k[0],M=k[1],I=C.img,P=C.language,D=C.successMsg,_=C.errorMessage,A=C.infoMessage,F=C.loading;window.onload=function(){g(),b();var e=JSON.parse(localStorage.getItem("user"))._id;m(e),h=y()("http://localhost:5000/"),j((function(e){return(e=h).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:o})})),e}))},Object(s.useEffect)((function(){X.getMyAccount(r).then((function(e){M(Object(d.a)(Object(d.a)({},C),{},{img:e.profileImg,language:e.langPreference}))})).catch((function(e){M(Object(d.a)(Object(d.a)({},C),{},{errorMessage:e.response.data.errorMessage}))}))}),[]);var q=function(e){return new Promise((function(t){It.a.imageFileResizer(e,300,300,"JPEG",100,0,(function(e){t(e)}),"base64")}))},W=c.a.useCallback((function(){try{var e=O.current.getScreenshot();M(Object(d.a)(Object(d.a)({},C),{},{infoMessage:"Picture Captured"})),w(!0);var t=new FormData;t.append("file",e),l.a.post("http://127.0.0.1:5000/webcam-face-detection",t).then(function(){var a=Object(at.a)(tt.a.mark((function a(n){return tt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:M(Object(d.a)(Object(d.a)({},C),{},{errorMessage:"",successMsg:n.data.successMessage})),M(Object(d.a)(Object(d.a)({},C),{},{infoMessage:"Loading.... "})),t.append("file",e),t.append("upload_preset","TalkSee"),fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"PUT",body:t}).then((function(e){return e.json()})).then((function(e){return M(Object(d.a)(Object(d.a)({},C),{},{img:e.url}))})).catch((function(e){return console.error("Error:",e)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}catch(a){M(Object(d.a)(Object(d.a)({},C),{},{errorMessage:"error in uploading photo"}))}}),[O]),J=function(){var e=Object(at.a)(tt.a.mark((function e(t){var a,n;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.files[0],(n=new FormData).append("file",a),l.a.post("http://127.0.0.1:5000/",n).then(function(){var e=Object(at.a)(tt.a.mark((function e(t){var s,c,r;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(Object(d.a)(Object(d.a)({},C),{},{errorMessage:"",successMsg:t.data.successMessage})),e.next=3,q(a);case 3:return s=e.sent,M(Object(d.a)(Object(d.a)({},C),{},{infoMessage:"Loading...."})),n.append("file",s),n.append("upload_preset","TalkSee"),e.next=9,fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"PUT",body:n});case 9:return c=e.sent,e.next=12,c.json();case 12:r=e.sent,M(Object(d.a)(Object(d.a)({},C),{},{img:r.secure_url}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){M(Object(d.a)(Object(d.a)({},C),{},{errorMessage:e.response.data.errorMessage}))}))}catch(s){M(Object(d.a)(Object(d.a)({},C),{},{errorMessage:"error in uploading photo"}))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){X.updateProfileSetup(r,{profileImg:I,langPreference:P}).then((function(e){localStorage.setItem("user",JSON.stringify(e.userData)),M(Object(d.a)(Object(d.a)({},C),{},{errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){M(Object(d.a)(Object(d.a)({},C),{},{errorMessage:e.response.data.errorMessage}))}))};return Object(n.jsxs)("div",{style:{height:"100vh"},className:"back_divs",children:[F&&Object(n.jsx)(Ee,{}),Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(Et.a,{only:["xs","sm"],children:Object(n.jsx)(L.a,{item:!0,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(Et.a,{only:["md","lg"],children:Object(n.jsx)(L.a,{item:!0,xs:12,sm:12,children:Object(n.jsx)(T,{setLogin:t})})}),Object(n.jsxs)(L.a,{item:!0,xs:12,sm:12,md:10,children:[Object(n.jsx)($,{name:"Update Profile "}),_&&Object(n.jsx)(Ze,{type:"error",message:_,autoClose:3e3}),A&&Object(n.jsx)(Ze,{type:"info",message:A,autoClose:8e3}),D&&Object(n.jsx)(Ze,{type:"success",message:D,autoClose:2500}),Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,sm:4,md:4}),Object(n.jsx)(L.a,{item:!0,xs:10,sm:4,md:4,children:Object(n.jsxs)("div",{className:"profile-page",children:[Object(n.jsxs)("div",{className:"profile-container",children:[Object(n.jsx)("div",{className:"img-holder",children:Object(n.jsx)("img",{src:I,className:"profile-img"})}),Object(n.jsx)("input",{type:"file",accept:"image/*",name:"image-upload",id:"input",onChange:J}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("label",{className:"image-upload",htmlFor:"input",children:[Object(n.jsx)("i",{className:"material-icons",children:"add_photo_alternate"}),"Choose Profile Photo"]})}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("button",{className:"take-photo loginbtn","data-toggle":"modal","data-target":"#exampleModalCenter",onClick:function(){return w(!1)},children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Take Photo"]})}),Object(n.jsx)(Ct.a,{style:{width:210,padding:"0.4rem"},placeholder:"Select Language ---",value:S.find((function(e){return e.value===P})),className:a.textfield,options:S,onChange:function(e){M(Object(d.a)(Object(d.a)({},C),{},{language:e.value}))}}),Object(n.jsx)(E.a,{style:{color:we.a[50],backgroundColor:Se.a[600],fontWeight:"bold",fontSize:"1rem",borderRadius:"0.5rem",marginTop:"1rem",marginBottom:"0.8rem",padding:"0.5rem",textTransform:"capitalize"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:B,children:"Update Profile"})]}),Object(n.jsx)("div",{className:"modal fade",id:"exampleModalCenter",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h3",{className:"modal-title",id:"exampleModalLongTitle",children:"Take Photo"}),Object(n.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsx)("div",{className:"webcam-container",children:Object(n.jsx)(Pt.a,{audio:!1,height:200,width:460,ref:O,screenshotFormat:"image/jpeg"})})}),v?Object(n.jsx)("div",{className:"modal-footer",children:Object(n.jsx)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",children:"Close"})}):Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsxs)("button",{className:"take-photo loginbtn",onClick:W,children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Capture photo"]})," "]})]})})})]})}),Object(n.jsx)(L.a,{item:!0,xs:1,sm:4,md:3})]})]})]})]})},Qt=a(21),$t=a(205),ea=(a(318),a(634)),ta=a(627),aa=a(625),na=a(626),sa=a(624),ca=function(e){var t=JSON.parse(localStorage.getItem("deletion")),a=Object(s.useState)(!0),c=Object(u.a)(a,2),r=(c[0],c[1],Object(s.useContext)(it).dispatch),o=Object(s.useState)(t.state),i=Object(u.a)(o,2),l=i[0],d=i[1],j=function(){e.setShow(!1)};return Object(n.jsxs)(ea.a,{open:e.open,onClose:j,"aria-labelledby":"form-dialog-title",children:[Object(n.jsxs)(sa.a,{id:"form-dialog-title",children:[Object(n.jsx)(Be.a,{style:{color:"red",marginRight:"0.3rem",paddingBottom:"0.3rem"}}),Object(n.jsx)("p",{style:{fontWeight:"bold",display:"inline"},children:"Delete Warning"})]}),Object(n.jsxs)(aa.a,{children:[Object(n.jsx)(na.a,{children:"This message will be permanently deleted. Are you sure you want to continue?"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"checkbox",value:l,defaultChecked:l,onClick:function(e){return function(e){console.log(e.target.checked),d(e.target.checked),r({type:"updatePermission",value:e.target.checked})}(e)}}),Object(n.jsx)("p",{style:{color:"black",fontSize:"16px",display:"inline",marginLeft:"0.7rem"},children:"Do not ask me again?"})]})]}),Object(n.jsxs)(ta.a,{children:[Object(n.jsx)(E.a,{onClick:j,style:{backgroundColor:"gray",color:"white"},children:"No"}),Object(n.jsx)(E.a,{onClick:function(){return t=e.msgId,console.log("mid in deleteMsg",t),void I.deleteMessage(t).then((function(t){console.log("response: ",t),e.setShow(!1),e.getData()})).catch((function(e){return console.log(e)}));var t},style:{backgroundColor:"#0e7be9",color:"white"},children:"Yes"})]})]})};function ra(e){var t=JSON.parse(localStorage.getItem("deletion")),a=c.a.useState(!1),r=Object(u.a)(a,2),o=(r[0],r[1],c.a.useState(!1)),i=Object(u.a)(o,2),l=i[0],d=i[1],j=Object(s.useState)(),m=Object(u.a)(j,2),b=m[0],g=m[1],h=null,O=function(a){!0===t.state?(console.log("mid in settingmsg1",a),d(!1),I.deleteMessage(a).then((function(t){console.log("response: ",t),e.getData()})).catch((function(e){return console.log(e)}))):(d(!0),console.log("mid in settingmsg2",a),g(a))};return e.message.to===e.user?h=Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"incoming_msg_img"}),Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:6,md:3,children:Object(n.jsx)("div",{style:{marginLeft:"15px",marginTop:"12px",marginBottom:"8px"},children:Object(n.jsx)($t.Player,{children:Object(n.jsx)("source",{src:e.message.messageVideo})})})}),Object(n.jsxs)(L.a,{item:!0,xs:6,md:9,children:["  ",e.isDel?Object(n.jsx)(E.a,{className:"Allbtn",style:{textTransform:"capitalize",marginTop:"0.8rem",color:"#EC5454",fontSize:"1.2rem"},children:Object(n.jsx)("i",{class:"fas fa-trash-alt",onClick:function(){return O(e.message.msgId)}})}):null]})]}),Object(n.jsx)("div",{class:"chat-message is-received",children:Object(n.jsxs)("div",{class:"message-block",children:[Object(n.jsx)("div",{class:"message-text",children:e.message.messageBody}),Object(n.jsxs)("span",{className:"received_time_date",children:[" ",e.message.time]})]})})]}):e.message.from===e.user?h=Object(n.jsxs)("div",{children:[Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsxs)(L.a,{item:!0,xs:6,md:9,children:["  ",e.isDel?Object(n.jsx)(E.a,{className:"Allbtn",style:{textTransform:"capitalize",float:"right",marginTop:"0.8rem",color:"#EC5454",fontSize:"1.2rem"},children:Object(n.jsx)("i",{class:"fas fa-trash-alt",onClick:function(){return O(e.message.msgId)}})}):null]}),Object(n.jsx)(L.a,{item:!0,xs:6,md:3,children:Object(n.jsx)("div",{style:{marginRight:"15px",marginTop:"12px",marginBottom:"8px"},children:Object(n.jsx)($t.Player,{children:Object(n.jsx)("source",{src:e.message.messageVideo})})})})]}),Object(n.jsx)("div",{class:"chat-message is-sent",children:Object(n.jsxs)("div",{class:"message-block",children:[Object(n.jsxs)("div",{class:"message-text",children:[" ",e.message.messageBody]}),Object(n.jsxs)("span",{class:"sent_time_date",children:[" ",e.message.time]})]})})]}):console.log("nothing"),Object(n.jsxs)("div",{children:[h,l?Object(n.jsx)(ca,{open:l,setShow:d,msgId:b,getData:e.getData}):null]})}var oa=a(557),ia=a(330),la=a.n(ia),da=Object(Pe.a)((function(e){return{inputInput:{paddingLeft:"calc(1em + ".concat(e.spacing(1),"px)"),transition:e.transitions.create("width"),float:"left",color:"black",borderRadius:"2rem",backgroundColor:"white",width:"100%",padding:"0.4rem",border:"1.4px solid #c4c4c4"}}}));function ua(e){var t=Object(s.useState)(""),a=Object(u.a)(t,2),r=a[0],o=a[1],i=da();return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsxs)(L.a,{container:!0,style:{display:"flex",paddingTop:"0.5rem"},children:[Object(n.jsx)(L.a,{item:!0,xs:10,sm:11,md:11,children:Object(n.jsx)(oa.a,{placeholder:"Type a message here",className:i.inputInput,inputProps:{"aria-label":"type"},value:r,onChange:function(e){return o(e.target.value)}})}),Object(n.jsxs)(L.a,{item:!0,xs:2,sm:1,md:1,children:["  ",Object(n.jsxs)(E.a,{variant:"contained",size:"small",className:"Allbtn",style:{backgroundColor:"rgb(0, 172, 193)",color:"white",float:"left",padding:"0.5rem",margin:"0.2rem",borderRadius:"0.3rem"},onClick:function(){e.sendMessage(r),o("")},children:[Object(n.jsx)(la.a,{style:{marginRight:"0.4rem",fontSize:"0.8rem"}}),"Send"]})]})]})})}var ja=a(628),ma=a(334),ba=a(637),ga=a(332),ha=a.n(ga),Oa=a(207),fa=a.n(Oa),xa=a(333),pa=a.n(xa),va=a(331);function ya(e){var t=c.a.useState(null),a=Object(u.a)(t,2),r=a[0],o=a[1],i=Object(s.useState)(!1),l=Object(u.a)(i,2),d=l[0],j=l[1],b=Boolean(r),g=Object(s.useState)(!0),h=Object(u.a)(g,2),O=h[0],f=h[1],p=Object(s.useState)(!1),v=Object(u.a)(p,2),y=v[0],w=v[1],S=Object(m.g)(),N=x()._id,k=function(t){"Delete"===t?(e.setDel(!0),f(!1)):"Search"===t&&j(!d)};Object(s.useEffect)((function(){e.recipientInfo.url}));var C=null;return O&&(C=Object(n.jsxs)("div",{style:{display:"inline",float:"right",marginTop:"0.6rem"},children:[Object(n.jsx)(le.a,{className:"Allbtn","aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget),w(!0)},children:Object(n.jsx)(ha.a,{})}),y?Object(n.jsxs)(ma.a,{id:"long-menu",anchorEl:r,keepMounted:!0,open:b,onClose:function(e){o(null)},PaperProps:{style:{marginTop:"40px",maxHeight:216,width:"20ch"}},children:[Object(n.jsx)(ba.a,{className:"Menu_div",onClick:function(){return k("Search")},children:Object(n.jsxs)("div",{children:[Object(n.jsx)(qt.a,{fontSize:"small",style:{width:"2rem"}}),Object(n.jsx)("p",{style:{display:"inline"},children:"Search"})]})}),Object(n.jsx)(ba.a,{className:"Menu_div",onClick:function(){return k("Delete")},children:Object(n.jsxs)("div",{children:[Object(n.jsx)(Y.a,{fontSize:"small",style:{width:"2rem",paddingBottom:"0.1rem"}}),Object(n.jsx)("p",{style:{display:"inline"},children:"Delete"})]})})]}):null]})),e.isDel&&(C=Object(n.jsx)("div",{style:{color:"gray",cursor:"pointer",float:"right",marginTop:"1rem",marginRight:"1rem"},"data-tip":"Close delete Menu","data-for":"delete",children:Object(n.jsx)(fa.a,{onClick:function(){console.log(e.isDel),e.setDel(!1),w(!1),f(!0)}})})),d&&(C=Object(n.jsx)(se.a,{style:{float:"right",marginRight:"1rem",marginTop:"0.8rem",backgroundColor:"white",borderRadius:"1rem"},value:e.searchTerm,onChange:function(t){e.searchHandler(t.currentTarget.value)},placeholder:"Search Message",size:"medium",InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(qt.a,{style:{color:we.a[600],marginRight:"0.2rem",float:"right"}})}),endAdornment:Object(n.jsx)(fa.a,{style:{color:"gray",cursor:"pointer",marginRight:"0.4rem"},onClick:function(){console.log(e.isDel),e.setTerm(""),j(!1),w(!1),f(!0)}}),disableUnderline:!0}})),Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)("div",{style:{height:"100vh"},className:"chat_div",children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(Et.a,{only:["sm","xs"],children:Object(n.jsx)(L.a,{item:!0,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsxs)(L.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)(va.a,{id:"delete"}),Object(n.jsxs)(L.a,{container:!0,spacing:0,style:{display:"flex",marginTop:"1rem"},children:[Object(n.jsx)(L.a,{xs:0,md:1}),Object(n.jsxs)(L.a,{item:!0,xs:12,md:10,children:[Object(n.jsxs)("div",{className:"profilediv",children:[Object(n.jsx)(Et.a,{only:["md","lg"],children:Object(n.jsx)(pa.a,{style:{marginRight:"0.1rem",marginLeft:"0.1rem",cursor:"pointer"},onClick:function(e){return S.push("/mychats/"+N)}})}),Object(n.jsx)("img",{className:"profile",src:e.recipientInfo.url,alt:"dp"}),Object(n.jsx)("span",{style:{display:"inline",fontWeight:"bold",fontSize:"21px"},children:e.recipientInfo.name}),C]}),Object(n.jsxs)("div",{className:"content_body ",children:[e.element,e.loading?Object(n.jsx)("div",{className:"load",children:Object(n.jsx)(ja.a,{color:"secondary"})}):null]}),!0===e.isFriend?Object(n.jsx)(ua,{sendMessage:e.sendMessage}):Object(n.jsx)(Ze,{type:"error",message:"This person is not your friend anymore. Add them again to start a chat.",autoClose:5e3})]}),Object(n.jsx)(L.a,{xs:0,md:1})]})]})]})})})}var wa=a(632);function Sa(e){var t=Object(s.useState)([{from:"",to:"",messages:[]}]),a=Object(u.a)(t,2),r=a[0],o=a[1],i=Object(s.useState)({messages:[""]}),l=Object(u.a)(i,2),j=l[0],m=l[1],b=Object(s.useState)(""),g=Object(u.a)(b,2),h=g[0],O=g[1],f=Object(s.useState)(!1),x=Object(u.a)(f,2),p=x[0],v=x[1],S=Object(s.useState)(!0),N=Object(u.a)(S,2),k=N[0],C=N[1],P=Object(s.useRef)(),T=Object(s.useRef)([]),L=Object(s.useRef)(),E=Object(s.useRef)({uId:"",uImg:"",uName:""}),D=Object(s.useRef)(""),_=Object(s.useRef)({name:"",lang:"",url:""}),A=Object(s.useRef)(""),F=Object(s.useRef)(),q=Object(s.useRef)(),W=e.match.params.id.split(" "),J=Object(s.useContext)(R),B=J.clientSocket,z=J.setSocket,U=J.roomJoin,H=J.messageEvent,G=J.friendReq,K=Object(s.useContext)(R),Y=(K.count,K.setCounter,Object(s.useState)(!1)),V=Object(u.a)(Y,2),X=V[0],Z=V[1],Q=c.a.useState(!1),$=Object(u.a)(Q,2),ee=$[0],te=$[1],ae=Object(s.useRef)(),ne=JSON.parse(localStorage.getItem("user"));Object(s.useEffect)((function(){var e;null===(e=P.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[r]),_.current.name=localStorage.getItem("recName"),_.current.lang=localStorage.getItem("recLang"),_.current.url=localStorage.getItem("profileUrl"),F.current="mychats/"+localStorage.getItem("friendId"),q.current="/"+W[1],D.current=W[0],E.current.uId=ne.email,E.current.uName=ne.firstName+" "+ne.lastName,E.current.uImg=ne.profileImg,window.onload=function(){G(),H();var e=JSON.parse(localStorage.getItem("user"))._id;U(e),ae=y()("http://127.0.0.1:5000"),z((function(e){return(e=ae).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:E.current.uId})})),e}))};var se=function(){console.log("in get Data",E),I.getMessagesbyEmail(E.current.uId,D.current).then((function(e){e&&(console.log("This data",e),T.current=e,o({messages:T.current}),te(!0))})).catch((function(e){return w.d.error("Database Connection Error",{position:w.d.POSITION.TOP_LEFT,autoClose:3e3,transition:w.c})}))};Object(s.useEffect)((function(){var e=0;M.getAllFriends(ne._id).then((function(t){L.current=t,L.current.forEach((function(t){t.email===D.current&&(e+=1)})),e<1&&C(!1)})).catch((function(e){return w.d.error("Database Connection Error",{position:w.d.POSITION.TOP_LEFT,autoClose:3e3,transition:w.c})}))})),Object(s.useEffect)((function(){se()}),[]),Object(s.useEffect)((function(){if(void 0!==B)return B.emit("roomJoin",{from:E.current.uId,to:D.current},(function(e){var t=e.error,a=e.room;t?console.log("error joining room",t):(A.current=a,console.log("joined room with id",a))})),B.on("messageReceived",(function(e){o((function(t){if(t.messages){var a=Object(Qt.a)(t.messages);return a=[].concat(Object(Qt.a)(a),[e]),Object(d.a)(Object(d.a)({},t),{},{messages:a})}return{messages:[e]}}))})),function(){B.off("messageReceived"),console.log("in cleanup")}}),[]);var ce=null;return Object(s.useEffect)((function(){if(r.messages){var e=r.messages.filter((function(e){return e.messageBody.toLowerCase().includes(h.toLowerCase())}));m({messages:e})}else console.log("no chat")}),[h]),void 0===r.messages?ce=Object(n.jsx)("h5",{style:{textAlign:"center"},children:"Loading..."}):(ce=""!==h&&void 0!==j.messages?j.messages.map((function(e){return Object(n.jsx)(ra,{message:e,user:E.current.uId,isDel:X,term:h})})):r.messages.map((function(e){return Object(n.jsx)("div",{ref:P,children:Object(n.jsx)(ra,{message:e,user:E.current.uId,isDel:X,getData:se,id:W[1],rec:D.current})})})),0===j.messages.length&&(console.log("no match"),ce=Object(n.jsx)("h5",{style:{textAlign:"center"},children:"No match found!"}))),Object(n.jsx)(ya,{recipientInfo:_.current,setLogin:e.setLogin,element:ce,loading:p,sendMessage:function(e){var t=Object(wa.a)();if(""==e)w.d.error("Please Type something",{position:w.d.POSITION.TOP_LEFT});else{v(!0);_.current.lang,E.current.uImg;v(!1);var a={from:E.current.uId,to:D.current,userName:E.current.uName,room:A.current,messageBody:e,messageVideo:"returndata",time:(new Date).toLocaleString(),type:"offline",msgId:t};B.emit("messageSend",a,(function(e){e?w.d.error("Error in sending message! Please try again",{position:w.d.POSITION.TOP_LEFT,autoClose:3e3,transition:w.c}):(I.createMessage(a).then((function(e){return console.log(e,t)})).catch((function(e){return w.d.error("Database Connection Error! Please try again",{position:w.d.POSITION.TOP_LEFT,autoClose:3e3,transition:w.c})})),r.messages?o({messages:[].concat(Object(Qt.a)(r.messages),[a])}):o({messages:[a]}))})),B.emit("messageSend1",{message:a,roomId:q.current,name:E.current.uName},(function(e){e?console.log(e):console.log("testing")})),B.emit("myChats",{roomId:F.current,message:a,userImg:ne.profileImg},(function(e){e?console.log(e):console.log("testing")}))}},isDel:X,setDel:Z,isFriend:k,isChat:ee,getData:se,searchTerm:h,setTerm:O,searchHandler:function(e){O((function(t){return e}))}})}var Na=a(157),ka=Object(Pe.a)((function(e){return{subheader:{display:"flex",alignItems:"center",cursor:"pointer"},globe:{backgroundColor:e.palette.primary.dark},subheaderText:{color:e.palette.primary.dark},list:{maxHeight:"calc(100vh - 112px)",overflowY:"auto"},listText:{fontSize:"1.5rem",fontFamily:"Roboto",marginLeft:"0.5rem",marginTop:"2rem",fontWeight:"bold",display:"inline"},listText1:{fontSize:"1.3rem",fontFamily:"Roboto",color:"#808284",width:"80%",marginLeft:"0.5rem",display:"block",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis"},listTime:{fontSize:"0.8rem",fontFamily:"Roboto",color:"gray",marginLeft:"0.5rem",display:"inline"},listBtn:{backgroundColor:"rgb(0, 172, 193)",color:"white",fontSize:"1rem"},mygrid:{marginTop:"50px",marginLeft:"350px",width:"650px"},mygrid1:{padding:"20px"},img:{width:"4rem",height:"4rem",borderRadius:"60px"}}})),Ca=function(e){var t=ka(),a=Object(m.g)(),c=null,r=JSON.parse(localStorage.getItem("user")),o=Object(s.useRef)([]),i=Object(s.useContext)(R).msgNotify,l=function(e,t){I.getMessagesbyEmail(r.email,e.email).then((function(e){o.current=e,o.current.map((function(e){"offline"===e.type&&e.from!==r.email&&I.changeMessageType({type:"read"},e._id).then((function(e){i()})).catch((function(e){return console.log(e)})),console.log("user matched")}))})),localStorage.setItem("friendId",e.id),localStorage.setItem("recName",e.name),localStorage.setItem("recLang",e.lang),localStorage.setItem("profileUrl",e.img),a.push("/chat/"+e.email+" "+e.id)};return Object(n.jsx)("div",{children:e.recipients.map((function(a,s){return console.log("last Msg Obj",e.lastMsg),Object(n.jsx)(ne.a,{style:{padding:"12px 10px",marginBottom:"1rem"},children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(L.a,{item:!0,xs:1,children:Object(n.jsx)("img",{src:a.img,alt:"img",style:{height:"50px",width:"50px",borderRadius:"50%",display:"inline"}})}),Object(n.jsxs)(L.a,{item:!0,xs:11,children:[Object(n.jsx)(Z.a,{className:t.listText,children:a.name}),e.lastMsg.emails.forEach((function(s,o){s===a.email&&("read"===e.lastMsg.types[o]?c=Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{className:t.listText1,onClick:function(){return l(a,e.lastMsg.types[o],e.lastMsg.msgId[o])},children:e.lastMsg.msgs[o]}),Object(n.jsx)(Z.a,{className:t.listTime,children:Object(Na.a)(e.lastMsg.time[o])})]}):"offline"===e.lastMsg.types[o]&&e.lastMsg.senders[o]!==r.email?c=Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{style:{fontWeight:"bold",color:"black"},className:t.listText1,onClick:function(){return l(a,e.lastMsg.types[o])},children:e.lastMsg.msgs[o]}),Object(n.jsx)(Z.a,{className:t.listTime,children:Object(Na.a)(e.lastMsg.time[o])})]}):(console.log("in nothing",e.lastMsg.types[o]),console.log("in nothing1",e.lastMsg.senders[o]),c=Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{className:t.listText1,onClick:function(){return l(a,e.lastMsg.types[o])},children:e.lastMsg.msgs[o]}),Object(n.jsx)(Z.a,{className:t.listTime,children:Object(Na.a)(e.lastMsg.time[o])})]})))})),c]}),Object(n.jsx)("div",{})]})})}))})},Ma=Object(Pe.a)((function(e){return{mygrid:{marginTop:"50px",marginLeft:"350px",width:"650px"}}})),Ia=function(e){Ma(),Object(m.g)();var t=Object(s.useContext)(R).clientSocket,a=JSON.parse(localStorage.getItem("user")).email,c=Object(s.useContext)(R),r=c.setSocket,o=c.roomJoin,i=c.messageEvent,l=c.friendReq,j=Object(s.useRef)([]),b=Object(s.useState)({uData:[]}),g=Object(u.a)(b,2),h=g[0],O=g[1],f=Object(s.useState)({msgs:[],msgId:[],emails:[],types:[],senders:[],time:[]}),x=Object(u.a)(f,2),p=x[0],v=x[1],w=Object(s.useState)(),S=Object(u.a)(w,2),N=S[0],k=S[1],C=Object(s.useRef)(),M=Object(s.useRef)(0);Object(s.useRef)(0);C.current="mychats/"+e.match.params.id;var P=[],E=Object(s.useRef)();window.onload=function(){l(),i();var e=JSON.parse(localStorage.getItem("user"))._id;o(e),E=y()("http://127.0.0.1:5000"),r((function(e){return(e=E).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:a})})),e}))};Object(s.useEffect)((function(){M.current=0,t&&t.emit("myChatsRoom",{myChatsRoom:C.current},(function(e){var t=e.error,a=e.room;t?console.log("error joining room",t):console.log("joined room with id",a)})),function(e){j.current=[],p.msgs=[],p.msgId=[],p.emails=[],p.types=[],p.senders=[],p.time=[],I.getChatRecipients(e).then((function(t){t.length>0?(j.current=t.sort(),j.current=Array.from(new Set(j.current)),Gt.getUserByEmail({userArray:j.current}).then((function(e){P=e,O((function(e){return e.uData=P,e}))})),j.current.forEach((function(t,a){I.getLastMsg(e,t).then((function(e){e&&v((function(a){if(a.msgs.length>=1&&a.emails.length>=1&&a.types.length>=1&&a.msgId.length>=1&&a.senders.length>=1){var n=Object(Qt.a)(a.msgs),s=Object(Qt.a)(a.emails),c=Object(Qt.a)(a.types),r=Object(Qt.a)(a.msgId),o=Object(Qt.a)(a.senders),i=Object(Qt.a)(a.time);return n=[].concat(Object(Qt.a)(n),[e.lastMsg]),s=[].concat(Object(Qt.a)(s),[t]),c=[].concat(Object(Qt.a)(c),[e.type]),r=[].concat(Object(Qt.a)(r),[e.msgId]),o=[].concat(Object(Qt.a)(o),[e.sender]),i=[].concat(Object(Qt.a)(i),[e.time]),Object(d.a)(Object(d.a)({},a),{},{msgs:n,msgId:r,emails:s,types:c,senders:o,time:i})}return{msgs:[e.lastMsg],msgId:[e.msgId],emails:[t],types:[e.type],senders:[e.sender],time:[e.time]}}))})).catch((function(e){return console.log(e)}))}))):console.log("no data")})).catch((function(e){return console.log(e)}))}(a),console.log("usersData 1",e.users)}),[]),Object(s.useEffect)((function(){t&&t.on("newRecipient",(function(e){k((function(t){return e}))}))}),[]),Object(s.useEffect)((function(){var e;N&&(0!==h.uData.length&&0!==p.msgs.length?(M.current=0,h.uData.forEach((function(t,a){N.message.from===t.email?(e=a,M.current=M.current+1):console.log("false")})),0!==M.current?D(e,N.message):0===M.current?_(N.message):console.log("nothing ",M.current)):console.log("usersData 1",p))}),[N]);var D=function(e,t){var a=[];a=Object(Qt.a)(p.msgs);var n=Object(Qt.a)(p.emails),s=Object(Qt.a)(p.types),c=Object(Qt.a)(p.time),r=Object(Qt.a)(p.senders);a[e]=t.messageBody,s[e]=t.type,c[e]=t.time,r[e]=t.from,n[e]=t.from,n=n.sort(),v((function(e){return Object(d.a)(Object(d.a)({},e),{},{msgs:a,emails:n,types:s,time:c,senders:r})}))},_=function(e){console.log("in new chattt",e.type),Gt.getUserByEmail({userEmail:e.from}).then((function(t){O((function(a){var n={email:e.from,gender:t[0].gender,id:t[0]._id,name:t[0].firstName+" "+t[0].lastName,img:t[0].profileImg},s=Object(Qt.a)(a.uData);return s=[].concat(Object(Qt.a)(s),[n]),console.log("u",s),Object(d.a)(Object(d.a)({},a),{},{uData:s})}))})),0!==h.uData.length?(console.log("not first recipient"),v({msgs:[].concat(Object(Qt.a)(p.msgs),[e.messageBody]),emails:[].concat(Object(Qt.a)(p.emails),[e.from]),types:[].concat(Object(Qt.a)(p.types),[e.type]),senders:[].concat(Object(Qt.a)(p.senders),[e.from]),time:[].concat(Object(Qt.a)(p.time),[e.time])})):(console.log("first recipient"),v({msgs:[e.messageBody],emails:[e.from],types:[e.type],senders:[e.from],time:[e.time]}))};return Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(Et.a,{only:["xs","sm"],children:Object(n.jsx)(L.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(Et.a,{only:["md","lg"],children:Object(n.jsx)(L.a,{item:!0,xs:12,children:Object(n.jsx)(T,{})})}),Object(n.jsxs)(L.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)($,{name:"My Chats"}),0!==h.uData.length&&0!==p.msgs.length?Object(n.jsx)("div",{children:Object(n.jsxs)(L.a,{container:!0,style:{marginTop:"0.9rem"},children:[Object(n.jsx)(L.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsx)(L.a,{item:!0,xs:10,md:10,children:Object(n.jsx)(Ca,{recipients:h.uData,lastMsg:p})}),Object(n.jsx)(L.a,{item:!0,xs:1,md:1,children:" "})]})}):Object(n.jsx)("h5",{style:{textAlign:"center"},children:"No Chats Yet!"})]})]})})},Ra=(a(549),Object(Pe.a)({textfield:{marginTop:"2rem"},Submitbtn:{marginTop:"0.6rem"}}),function(e){var t=e.match;console.log(t.params.id);var a=t.params.id,c="/"+a,r=x()._id,o=x().firstName+" "+x().lastName,i=JSON.parse(localStorage.getItem("user")),l=Object(s.useState)(!i.sentRequests.includes(a)),d=Object(u.a)(l,2),j=d[0],m=d[1],b=x().profileImg,g=x().email,h=x().gender,O=x().langPreference,f=Object(s.useContext)(R).clientSocket;return Object(n.jsx)("div",{children:j?Object(n.jsx)(E.a,{className:"loginbtn",style:{display:"inline-block",position:"relative",float:"right",marginTop:"1rem",backgroundColor:Dt.a[600],color:"white"},variant:"contained",onClick:function(){console.log("contact Id",a),M.sendRequest({friendId:a,myId:r,myName:o,myProfileImg:b,myEmail:g,myGender:h,myLangPreference:O}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),m(!1)})).catch((function(e){console.log(e)})),f.emit("friendRequest",{myName:o,roomId:c},(function(e){e?console.log(e):console.log("emitted event")}))},children:"Add friend"}):Object(n.jsx)(E.a,{className:"loginbtn",style:{display:"inline-block",position:"relative",float:"right",marginTop:"1rem",backgroundColor:we.a[500],color:"white"},variant:"contained",onClick:function(){M.cancelRequest({friendId:a,myId:r}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),m(!0)})).catch((function(e){console.log(e)}))},children:"Requested"})})}),Pa=a(335),Ta=function(e){var t=e.component,a=Object(Pa.a)(e,["component"]);return Object(n.jsx)(m.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){return x()&&0===x().role?Object(n.jsx)(t,Object(d.a)({},e)):Object(n.jsx)(m.a,{to:"/login"})}}))},La=function(){var e=Object(m.g)(),t=c.a.useRef(),a=Object(s.useContext)(R),r=a.setSocket,o=a.roomJoin,i=a.messageEvent,l=a.friendReq,d=a.frndcounter,u=x()._id,j=x().email;return window.onload=function(){l(),i();var e=JSON.parse(localStorage.getItem("user"))._id;o(e),t=y()("http://localhost:5000/"),r((function(e){return(e=t).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:j})})),e}))},Object(n.jsx)("div",{div:!0,style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(L.a,{container:!0,children:[Object(n.jsx)(Et.a,{only:["xs","sm"],children:Object(n.jsx)(L.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(Et.a,{only:["md","lg"],children:Object(n.jsx)(L.a,{item:!0,xs:12,children:Object(n.jsx)(T,{})})}),Object(n.jsxs)(L.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)($,{name:"My Contacts"}),Object(n.jsxs)(L.a,{container:!0,style:{marginTop:"1.5rem"},children:[Object(n.jsx)(L.a,{item:!0,xs:1,md:3}),Object(n.jsxs)(L.a,{item:!0,xs:10,md:6,children:[Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 40px",display:"block",backgroundColor:"#D03384",marginTop:"1.5rem"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(t){return e.push("/all-my-friends/"+u)},children:[Object(n.jsx)(B.a,{className:"chaticon",color:"white"})," My Friends"]}),d>=1?Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 20px",display:"block",backgroundColor:"#D03384",marginTop:"1.5rem"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(t){return e.push("/all-friend-requests/"+u)},children:[Object(n.jsx)(V.a,{badgeContent:d,color:"secondary",style:{marginRight:"0.5rem"},children:Object(n.jsx)(G.a,{className:"chaticon",onClick:function(t){return e.push("/all-friend-requests/"+u)},color:"white"})}),"My Friend Requests"]}):Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 50px",display:"block",backgroundColor:"#D03384",marginTop:"1.5rem"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(t){return e.push("/all-friend-requests/"+u)},children:[Object(n.jsx)(G.a,{className:"chaticon",color:"white"}),"  My Friend Requests"]}),Object(n.jsxs)(E.a,{className:"loginbtn",style:{padding:"10px 20px",display:"block",backgroundColor:"#D03384",marginTop:"1.5rem"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(t){return e.push("/all-contacts/"+u)},children:[Object(n.jsx)(W.a,{className:"chaticon",color:"white"})," Add New friend"]})]})]}),Object(n.jsx)(L.a,{item:!0,xs:1,md:3})]})]})})},Ea=function(){var e=Object(s.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(s.useState)(),o=Object(u.a)(r,2),i=o[0],l=o[1],b=Object(s.useState)(!1),g=Object(u.a)(b,2),h=g[0],O=g[1],f=Object(s.useState)([]),x=Object(u.a)(f,2),p=x[0],v=x[1];return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(Yt,{userId:a,children:Object(n.jsx)(_,{userId:a,isLogin:h,children:Object(n.jsx)(P,{id:i,email:a,isLogin:h,children:Object(n.jsxs)(lt,{children:[Object(n.jsx)(w.b,{}),Object(n.jsx)(j.a,{children:Object(n.jsxs)(m.d,{children:[Object(n.jsx)(m.b,{path:"/",exact:!0,children:Object(n.jsx)(ut,{onIdSubmit:c,setId:l,isLogin:h,setLogin:O})}),Object(n.jsx)(m.b,{exact:!0,path:"/signup",component:rt}),Object(n.jsx)(m.b,{exact:!0,path:"/login",children:Object(n.jsx)(ut,{onIdSubmit:c,setId:l,isLogin:h,setLogin:O})}),Object(n.jsx)(m.b,{exact:!0,path:"/user/activate/:token",component:xt}),Object(n.jsx)(Ta,{exact:!0,path:"/dashboard/:id",children:Object(n.jsx)(ee,{setLogin:O,setUsers:v})}),Object(n.jsx)(m.b,{exact:!0,path:"/reset-password/:token",component:kt}),Object(n.jsx)(m.b,{exact:!0,path:"/forgot-password",component:St}),Object(n.jsx)(m.b,{exact:!0,path:"/profile-setup/:token",component:Lt}),Object(n.jsx)(Ta,{path:"/update-my-profile-setup/:id",render:function(e){return Object(s.createElement)(Zt,Object(d.a)(Object(d.a)({},e),{},{key:e.location.key,setLogin:O}))},exact:!0,component:Zt}),Object(n.jsx)(Ta,{path:"/all-contacts/:id",render:function(e){return Object(s.createElement)(Jt,Object(d.a)(Object(d.a)({},e),{},{key:e.location.key,setLogin:O}))},exact:!0,component:Jt}),Object(n.jsx)(Ta,{path:"/all-friend-requests/:id",render:function(e){return Object(s.createElement)(zt,Object(d.a)(Object(d.a)({},e),{},{key:e.location.key,setLogin:O}))},exact:!0,component:zt}),Object(n.jsx)(Ta,{path:"/all-my-friends/:id",render:function(e){return Object(s.createElement)(Vt,Object(d.a)(Object(d.a)({},e),{},{key:e.location.key,setLogin:O}))},exact:!0,component:Vt}),Object(n.jsx)(Ta,{exact:!0,path:"/profile/:id/:id",component:Ra}),Object(n.jsx)(m.b,{exact:!0,path:"/notfound",component:pt}),Object(n.jsx)(Ta,{path:"/chat/:id",render:function(e){return Object(s.createElement)(Sa,Object(d.a)(Object(d.a)({},e),{},{key:e.location.key,setLogin:O}))},exact:!0,component:Sa}),Object(n.jsx)(Ta,{path:"/mychats/:id",render:function(e){return Object(s.createElement)(Ia,Object(d.a)(Object(d.a)({},e),{},{key:e.location.key,setLogin:O,users:p}))},exact:!0,component:Ia}),Object(n.jsx)(Ta,{exact:!0,path:"/my-contact-list/:id",component:La}),Object(n.jsx)(m.a,{to:"/notfound"})]})})]})})})})})},Da=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,638)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};a(551);o.a.render(Object(n.jsx)(Ea,{}),document.getElementById("root")),Da()},80:function(e,t,a){}},[[550,1,2]]]);
//# sourceMappingURL=main.a9077b43.chunk.js.map