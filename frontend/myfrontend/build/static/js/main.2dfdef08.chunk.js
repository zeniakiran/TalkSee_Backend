(this.webpackJsonpmyfrontend=this.webpackJsonpmyfrontend||[]).push([[0],{370:function(e,t,a){},371:function(e,t,a){},406:function(e,t){},421:function(e,t){},423:function(e,t){},437:function(e,t){},439:function(e,t){},467:function(e,t){},469:function(e,t){},470:function(e,t){},475:function(e,t){},477:function(e,t){},496:function(e,t){},508:function(e,t){},511:function(e,t){},550:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(0),c=a.n(s),r=a(18),i=a.n(r),o=a(38),l=a.n(o),d=(a(370),a(3)),u=a(10),j=(a(371),a(17)),m=a(37),b=a(153),g=a.n(b),h=function(e){return JSON.parse(localStorage.getItem(e))},O=function(e){localStorage.removeItem(e)},f=function(e,t){var a,n;a="token",n=e,g.a.set(a,n,{expires:1}),function(e,t){localStorage.setItem(e,JSON.stringify(t))}("user",t)},x=function(){if(e="token",g.a.get(e)&&h("user"))return h("user");var e},p=function(e){var t;t="token",g.a.remove(t),O("user"),O("friendId"),O("recName"),O("profileUrl"),O("recLang"),e()},v=Object(m.h)((function(e){var t=e.history;t=Object(m.g)();var a=x().firstName,c=x().lastName,r=x()._id,i=x().profileImg,o=function(e){p((function(){t.push("/login")}))};return Object(n.jsx)("header",{children:Object(n.jsx)("div",{children:Object(n.jsxs)("nav",{id:"nav",className:"navbar navbar-expand-lg navbar-light mt-0",children:[Object(n.jsxs)("div",{className:"navbar-brand",children:[Object(n.jsxs)(j.b,{to:{pathname:"/update-my-profile-setup/".concat(r)},style:{textDecoration:"none"},children:[Object(n.jsx)("img",{src:i,alt:"Profile",style:{height:"50px",width:"50px",borderRadius:"50%",display:"inline"},onclick:function(){return t.push("/update-my-profile-setup/"+r)}})," "]}),Object(n.jsx)("span",{className:"header_name",children:a+" "+c})]}),Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:Object(n.jsx)("ul",{className:"\r navbar-nav\r ml-auto\r mt-2\r mt-lg-0",children:x()&&0===x().role&&Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(j.b,{to:"/notFound",className:"nav-link "})}),Object(n.jsx)("li",{className:"nav-item",style:{marginRight:"1rem"},children:Object(n.jsxs)(j.b,{to:{pathname:"/dashboard/"+r},className:"nav-link",children:[Object(n.jsx)("i",{className:"fa fa-home","aria-hidden":"true",children:" "}),"  Dashboard"]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)("button",{className:"btn text-decoration-none btn-link   pl-0 nav-link",style:{textDecoration:"none"},onClick:o,children:[Object(n.jsx)("i",{className:"fas fa-sign-out-alt","aria-hidden":"true"})," Logout"]})})]})})})]})})})})),y=a(605),N=a(601),w=a(45),S=a.n(w),k=a(20),C=(a(167),a(54)),M=a(67),I=a(66);l.a.defaults.baseURL="http://localhost:5000/api/",l.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token");var P=function e(){Object(C.a)(this,e),this.get=function(e){return new Promise((function(t,a){l.a.get(e).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))},this.getMessage=function(e,t){return new Promise((function(a,n){l.a.get(e,{params:{email:t}}).then((function(e){a(e.data)})).catch((function(e){n(e)}))}))},this.post=function(e,t){return new Promise((function(a,n){l.a.post(e,t).then((function(e){a(e.data)})).catch((function(e){console.log("Errrr"),n(e)}))}))},this.put=function(e,t){return new Promise((function(a,n){l.a.put(e,t).then((function(e){a(e.data)})).catch((function(e){n(e)}))}))},this.delete=function(e){return new Promise((function(t,a){l.a.delete(e).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))}},R=new(function(e){Object(M.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(C.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).sendRequest=function(t){return e.post("friends/send-friend-request",t)},e.cancelRequest=function(t){return e.post("friends/cancel-friend-request",t)},e.acceptRequest=function(t){return e.post("friends/accept-friend-request",t)},e.rejectRequest=function(t){return e.post("friends/reject-friend-request",t)},e.deleteFriend=function(t){return e.post("friends/delete-friend",t)},e.getFriendRequest=function(t){return e.get("friends/my-friend-requests/"+t)},e.getSentFriendRequest=function(t){return e.get("friends/sent-friend-requests/"+t)},e.getAllFriends=function(t){return e.get("friends/my-friends-list/"+t)},e.getFriendRequestsCount=function(t){return e.get("friends/my-friend-requests-count/"+t)},e}return a}(P)),T=new(function(e){Object(M.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(C.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getMessages=function(){return e.get("chatapi")},e.createMessage=function(t){return e.post("chatapi",t)},e.getMessagesbyEmail=function(t,a){return e.get("chatapi/msgbyemail/"+t+" "+a)},e.getMessagesbyUserId=function(t){return e.get("chatapi/msgbyuserid/"+t)},e.getChatRecipients=function(t){return e.get("chatapi/chatrecipients/"+t)},e.getLastMsg=function(t,a){return e.get("chatapi/lastmsg/"+t+" "+a)},e.deleteMessage=function(t){return e.delete("chatapi/"+t)},e.changeMessageType=function(t,a){return e.put("chatapi/"+a,t)},e.offlinemessages=function(t){return e.get("chatapi/offlinemessages/"+t)},e}return a}(P)),E=Object(s.createContext)();function A(e){var t=e.id,a=e.children,c=Object(s.useState)({}),r=Object(u.a)(c,2),i=(r[0],r[1],Object(s.useState)(0)),o=Object(u.a)(i,2),l=o[0],d=o[1],j=Object(s.useState)(0),m=Object(u.a)(j,2),b=m[0],g=m[1],h=Object(s.useState)(),O=Object(u.a)(h,2),f=O[0],p=O[1],v=Object(s.useRef)();Object(s.useEffect)((function(){var e=S()("http://localhost:5000");return p(e),function(){return e.close()}}),[]),Object(s.useEffect)((function(){v.current="/"+t,console.log(v)}),[]);var y=function(){T.offlinemessages(x().email).then((function(e){g(e.count),localStorage.setItem("messagecount",JSON.stringify(e.count))})).catch((function(e){return console.log(e)}))};Object(s.useEffect)((function(){return y}),[b]);var w=function(){R.getFriendRequest(x()._id).then((function(e){d(e.length),localStorage.setItem("friendRequests",JSON.stringify(e.length))})).catch((function(e){console.log(e)}))};Object(s.useEffect)((function(){return w}),[l]);var C={clientSocket:f,setSocket:p,messageEvent:function(){f?f.on("newMessage",(function(e){N.a,Object(k.d)(e.RecipientName+":"+e.payload.messageBody,{onOpen:function(){return console.log("Called when I open")},position:k.d.POSITION.TOP_LEFT,toastId:"007",transition:k.a}),console.log("new message",e),y()})):console.log("no socket")},roomJoin:function(e){e="/"+e,f&&f.emit("NotificationRoom",{myNotificationRoom:e},(function(e){var t=e.error,a=e.room;t?console.log("error joining room",t):console.log("joined room with id",a)}))},friendReq:function(){f?f.on("newRequest",(function(e){k.d.info(e.sender+" has sent you a friend request!",{position:k.d.POSITION.TOP_LEFT,autoClose:7e3,transition:k.a})})):console.log("no socket")},getRequest:function(){f?(f.on("newRequest",(function(e){return w()})),f.on("rejectRequest",(function(e){return w()}))):console.log("no socket")},frndcounter:l,acceptRejectCounter:w,msgCounter:b,msgNotify:y};return Object(n.jsx)(E.Provider,{value:C,children:a})}var D=Object(s.createContext)(),_=function(e){var t=e.userId,a=(e.setMsg,e.children),c="";Object(s.useEffect)((function(){r(t)}),[t]);var r=function(e){T.offlinemessages(e).then((function(e){e.count>0&&(console.log("count",e.count),c="You have "+e.count+" new messages!",e.info.sender[0]!==t?(console.log("sender",e.info.sender),console.log("user",t),k.d.info(c,{position:k.d.POSITION.TOP_LEFT,transition:k.c})):console.log("is sender"))})).catch((function(e){return console.log(e)}))};return Object(n.jsx)(D.Provider,{value:{getUnreadMsgs:r},children:a})},F=a(202),L=a.n(F),q=a(113),W=a.n(q),B=a(146),J=a.n(B),z=a(322),U=a.n(z),H=a(103),G=a.n(H),K=a(147),Y=a.n(K),V=a(607),X=new(function(e){Object(M.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(C.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).accountActivation=function(t){return e.post("users/activation",t)},e.forgotPassword=function(t){return e.put("users/forgot-password",t)},e.resetPassword=function(t){return e.put("users/reset-password",t)},e.profileSetup=function(t){return e.post("users/profile-setup",t)},e.updateProfileSetup=function(t,a){return e.put("users/update-profile-setup/"+t,a)},e.getMyAccount=function(t){return e.get("users/my-account/"+t)},e.deleteMyAccount=function(t){return e.delete("users/delete-my-account/"+t)},e}return a}(P)),Z=(a(80),a(158)),Q=a(606),$=function(e){var t=e.name;return Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,sm:2,xm:5,md:4}),Object(n.jsxs)(y.a,{item:!0,xs:10,sm:8,xm:2,md:4,children:[Object(n.jsx)(Z.a,{variant:"headline",style:{marginTop:"0.5rem",textAlign:"center",fontSize:"4rem",color:Q.a[300],fontFamily:"Brush Script MT, Brush Script Std, cursive"},component:"h1",children:t}),Object(n.jsx)("hr",{style:{marginBottom:"1rem"}})]}),Object(n.jsx)(y.a,{item:!0,xs:1,sm:2,xm:5,md:4})]})})},ee=function(e){e.uuId;var t=x()._id,a=(Object(s.useRef)(0),Object(s.useRef)()),c=Object(m.g)();a.current=JSON.parse(localStorage.getItem("user")).email;var r=Object(s.useContext)(E),i=r.clientSocket,o=r.setSocket,l=r.messageEvent,d=r.roomJoin,u=r.friendReq,j=r.getRequest,b=r.frndcounter,g=r.msgCounter,h=Object(s.useRef)();window.onload=function(){u(),l(),j(),d(t),h=S()("http://127.0.0.1:5000"),o((function(e){return(e=h).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:a.current})})),e}))};return Object(s.useEffect)((function(){void 0!==i?(console.log(i),i.emit("adduser",{id:i.id,name:a.current})):console.log("no socket")}),[],[i]),Object(s.useEffect)((function(){l()}),[]),Object(s.useEffect)((function(){d(t)}),[]),Object(n.jsxs)("div",{style:{height:"100vh"},className:"back_divs",children:[Object(n.jsx)(v,{}),Object(n.jsx)($,{name:"Dashboard"}),Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,md:4}),Object(n.jsxs)(y.a,{item:!0,xs:10,md:4,children:[Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 20px",display:"block",backgroundColor:"#C8906A"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return c.push("/all-contacts/"+t)},children:[Object(n.jsx)(W.a,{className:"chaticon",color:"white"})," Add New friend"]}),Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 40px",marginTop:"2rem",display:"block",backgroundColor:"#C0C86A"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return c.push("/all-my-friends/"+t)},children:[Object(n.jsx)(J.a,{className:"chaticon",color:"white"})," My Friends"]}),g>=1?Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 20px",marginTop:"2rem",display:"block",backgroundColor:"#D582BD"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return c.push("/mychats/"+t)},children:[Object(n.jsx)(V.a,{badgeContent:g,color:"secondary",style:{marginRight:"0.5rem"},children:Object(n.jsx)(L.a,{className:"chaticon",onClick:function(e){return c.push("/mychats/"+t)},color:"white"})}),"My Chats"]}):Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 50px",marginTop:"2rem",display:"block",backgroundColor:"#D582BD"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return c.push("/mychats/"+t)},children:[Object(n.jsx)(L.a,{className:"chaticon",color:"white"}),"  My Chats"]}),b>=1?Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 20px",marginTop:"2rem",display:"block",backgroundColor:"#8298D5"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return c.push("/all-friend-requests/"+t)},children:[Object(n.jsx)(V.a,{badgeContent:b,color:"secondary",style:{marginRight:"0.5rem"},children:Object(n.jsx)(G.a,{className:"chaticon",onClick:function(e){return c.push("/all-friend-requests/"+t)},color:"white"})}),"My Friend Requests"]}):Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 50px",marginTop:"2rem",display:"block",backgroundColor:"#8298D5"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return c.push("/all-friend-requests/"+t)},children:[Object(n.jsx)(G.a,{className:"chaticon",color:"white"}),"  My Friend Requests"]}),Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 27px",marginTop:"2rem",display:"block",backgroundColor:"#69B6CF"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(e){return c.push("/update-my-profile-setup/"+t)},children:[Object(n.jsx)(U.a,{className:"chaticon",color:"white"}),"Update Profile"]}),Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 20px",marginTop:"2rem",display:"block",backgroundColor:"#C3767F"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(){X.deleteMyAccount(t).then((function(e){return c.push("/signup")})).catch((function(e){return console.log(e)}))},children:[Object(n.jsx)(Y.a,{className:"chaticon",color:"white"})," Delete Account"]})]}),Object(n.jsx)(y.a,{item:!0,xs:1,md:4})]})]})},te=a(36),ae=a(39),ne=a(553),se=a(629),ce=a(617),re=a(615),ie=a(616),oe=a(614),le=a(613),de=a(554),ue=a(636),je=a(620),me=a(631),be=a(98),ge=a.n(be),he=a(151),Oe=a.n(he),fe=a(203),xe=a.n(fe),pe=a(99),ve=a.n(pe),ye=a(154),Ne=a(621),we=a(97),Se=a.n(we),ke=a(46),Ce=a.n(ke),Me=a(149),Ie=a.n(Me),Pe=a(608),Re=a(609),Te=Object(Pe.a)({root:{width:"100%"}});function Ee(){var e=Te(),t=c.a.useState(0),a=Object(u.a)(t,2),s=a[0],r=a[1],i=c.a.useState(10),o=Object(u.a)(i,2),l=o[0],d=o[1],j=c.a.useRef((function(){}));return c.a.useEffect((function(){j.current=function(){if(s>100)r(0),d(10);else{var e=10*Math.random(),t=10*Math.random();r(s+e),d(s+e+t)}}})),c.a.useEffect((function(){var e=setInterval((function(){j.current()}),500);return function(){clearInterval(e)}}),[]),Object(n.jsx)("div",{className:e.root,children:Object(n.jsx)(Re.a,{variant:"buffer",value:s,valueBuffer:l})})}var Ae=a(157),De=a(610),_e=a(323),Fe=a.n(_e),Le=a(324),qe=a.n(Le),We=a(148),Be=a.n(We),Je=a(325),ze=a.n(Je),Ue=a(326),He=a.n(Ue),Ge=a(635),Ke=a(612),Ye={success:Fe.a,warning:Be.a,error:qe.a,info:ze.a},Ve=Object(Pe.a)((function(e){return{success:{backgroundColor:Ae.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:De.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}})),Xe=function(e){var t=e.type,a=e.message,s=e.autoClose,r=Ve(),i=c.a.useState(!0),o=Object(u.a)(i,2),l=o[0],d=o[1],j=function(e,t){"clickaway"!==t&&d(!1)},m=Ye[t];return Object(n.jsx)(Ge.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:l,autoHideDuration:s,onClose:j,children:Object(n.jsx)(Ke.a,{className:Object(ae.a)(r[t]),"aria-describedby":"client-snackbar",message:Object(n.jsxs)("span",{id:"client-snackbar",className:r.message,children:[Object(n.jsx)(m,{className:Object(ae.a)(r.icon,r.iconVariant)}),a]}),action:[Object(n.jsx)(le.a,{"aria-label":"close",color:"inherit",onClick:j,children:Object(n.jsx)(He.a,{className:r.icon})},"close")]})})},Ze=a(618),Qe=a(619),$e=a(40),et=a.n($e),tt=a(60);l.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token");var at=function(){var e=Object(tt.a)(et.a.mark((function e(t){var a;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{headers:{"Content-Type":"application/json"}},e.next=3,l.a.post("http://localhost:5000/api/users/signup",t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(tt.a)(et.a.mark((function e(t){var a;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{headers:{"Content-Type":"application/json"}},e.next=3,l.a.post("http://localhost:5000/api/users/login",t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(e){var t=e.name;return Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,sm:2,xm:5,md:4}),Object(n.jsx)(y.a,{item:!0,xs:10,sm:8,xm:2,md:6,children:Object(n.jsxs)(Z.a,{variant:"headline",style:{marginTop:"1rem",position:"relative",fontSize:"5rem",color:Q.a[300],marginBottom:"1rem",fontFamily:"Brush Script MT, Brush Script Std, cursive"},component:"h1",children:[Object(n.jsx)("img",{className:"loginImg",src:"/images/logo.png"}),t]})}),Object(n.jsx)(y.a,{item:!0,xs:1,sm:2,xm:5,md:2})]})},ct=Object(Pe.a)((function(e){return{textfield:{marginTop:e.spacing(2.5)},margin:{marginTop:e.spacing(2.5)}}})),rt=function(){var e=ct(),t=Object(m.g)();Object(s.useEffect)((function(){(x()&&1===x().role||x()&&0===x().role)&&t.push("/dashboard")}),[t]);var a=Object(s.useState)({firstName:"",lastName:"",email:"",gender:"",password:"",confirmPassword:"",errorMessage:"",successMsg:"",showPassword:!1,showPassword1:!1,loading:!1}),c=Object(u.a)(a,2),r=c[0],i=c[1],o=r.firstName,l=r.lastName,b=r.email,g=r.gender,h=r.password,O=r.confirmPassword,f=r.errorMessage,p=r.successMsg,v=r.loading,w=function(e){return function(t){var a;i(Object(d.a)(Object(d.a)({},r),{},(a={},Object(te.a)(a,e,t.target.value),Object(te.a)(a,"errorMessage",""),Object(te.a)(a,"successMsg",""),a)))}},S=function(){i(Object(d.a)(Object(d.a)({},r),{},{showPassword:!r.showPassword}))},k=function(){i(Object(d.a)(Object(d.a)({},r),{},{showPassword1:!r.showPassword1}))},C=function(e){e.preventDefault()},M=function(e){var t;i(Object(d.a)(Object(d.a)({},r),{},(t={},Object(te.a)(t,e.target.name,e.target.value),Object(te.a)(t,"errorMessage",""),Object(te.a)(t,"successMsg",""),t)))},I=function(e){if(e.preventDefault(),Ce()(o)||Ce()(l)||Ce()(b)||Ce()(h)||Ce()(O)||Ce()(g))i(Object(d.a)(Object(d.a)({},r),{},{errorMessage:"All fields are required"}));else if(Se()(b))if(Ie()(h,O)){var t={firstName:r.firstName,lastName:r.lastName,email:r.email,password:r.password,gender:r.gender};i(Object(d.a)(Object(d.a)({},r),{},{loading:!0})),at(t).then((function(e){i(Object(d.a)(Object(d.a)({},r),{},{firstName:"",lastName:"",email:"",password:"",confirmPassword:"",gender:"",errorMessage:!1,successMsg:e.data.successMessage,loading:!1}))})).catch((function(e){console.log(e),i(Object(d.a)(Object(d.a)({},r),{},{loading:!1,errorMessage:e.response.data.errorMessage}))}))}else i(Object(d.a)(Object(d.a)({},r),{},{errorMessage:"Password do not matched"}));else i(Object(d.a)(Object(d.a)({},r),{},{errorMessage:"Invalid Email"}))};return Object(n.jsxs)("div",{className:"signup_div",children:[v&&Object(n.jsx)(Ee,{}),f&&Object(n.jsx)(Xe,{type:"error",message:f,autoClose:4e3}),p&&Object(n.jsx)(Xe,{type:"success",message:p,autoClose:4e3}),Object(n.jsx)(st,{className:"title",name:"TalkSee"}),Object(n.jsx)("div",{className:"signup-container",children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(y.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(ne.a,{className:"Login-container",style:{padding:"30px 30px"},children:[Object(n.jsxs)(y.a,{container:!0,style:{textAlign:"center"},children:[Object(n.jsx)(y.a,{item:!0,xs:6,children:Object(n.jsx)(j.b,{className:"header",to:"/login",children:"Sign In"})}),Object(n.jsx)(y.a,{item:!0,xs:6,children:Object(n.jsx)(j.b,{className:"active-header",to:"/signup",children:"Sign Up"})})]}),Object(n.jsx)(se.a,{className:e.textfield,id:"filled-start-adornment",value:r.firstName,label:Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" firstName "}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red"},children:"*"})]}),name:"firstName",fullWidth:!0,onChange:M,InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(xe.a,{style:{color:ye.a[600]}})})}}),Object(n.jsx)(se.a,{className:e.textfield,id:"filled-start-adornment1",value:r.lastName,label:Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" lastName "}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red"},children:"*"})]}),name:"lastName",fullWidth:!0,onChange:M,InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(xe.a,{style:{color:ye.a[600]}})})}}),Object(n.jsx)(se.a,{className:e.textfield,label:Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Email Address "}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red"},children:"*"})]}),id:"filled-start-adornment1",name:"email",value:r.email,fullWidth:!0,onChange:M,InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(ge.a,{style:{color:ye.a[600]}})})}}),Object(n.jsxs)(re.a,{className:Object(ae.a)(e.margin,e.textField),fullWidth:!0,children:[Object(n.jsxs)(ie.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Password"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(oe.a,{id:"standard-adornment-password",type:r.showPassword?"text":"password",name:"password",value:r.password,onChange:w("password"),startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(Oe.a,{style:{color:ye.a[600]}})}),endAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(le.a,{"aria-label":"toggle password visibility",onClick:S,onMouseDown:C,children:r.showPassword?Object(n.jsx)(Ze.a,{}):Object(n.jsx)(Qe.a,{})})})})]}),Object(n.jsxs)(re.a,{className:Object(ae.a)(e.margin,e.textField),fullWidth:!0,children:[Object(n.jsxs)(ie.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Confirm Password"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(oe.a,{id:"standard-adornment-confirmPassword",type:r.showPassword1?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:w("confirmPassword"),startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(ve.a,{style:{color:ye.a[600]}})}),endAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(le.a,{"aria-label":"toggle password visibility",onClick:k,onMouseDown:C,children:r.showPassword1?Object(n.jsx)(Ze.a,{}):Object(n.jsx)(Qe.a,{})})})})]}),Object(n.jsxs)(re.a,{component:"fieldset",className:e.margin,children:[Object(n.jsxs)(de.a,{component:"legend",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic",fontSize:"0.9rem",marginLeft:"0.4rem"},children:" Gender"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsxs)(ue.a,{"aria-label":"gender",name:"gender1",style:{display:"initial",marginLeft:"4rem"},value:r.gender,onChange:w("gender"),children:[Object(n.jsx)(je.a,{value:"female",control:Object(n.jsx)(me.a,{style:{color:Ne.a[900]}}),label:"Female"}),Object(n.jsx)(je.a,{value:"male",control:Object(n.jsx)(me.a,{style:{color:Ne.a[900]}}),label:"Male"}),Object(n.jsx)(je.a,{value:"other",control:Object(n.jsx)(me.a,{style:{color:Ne.a[900]}}),label:"Other"})]})]}),Object(n.jsx)(N.a,{style:{color:ye.a[50],backgroundColor:Ne.a[600],fontWeight:"bold",borderRadius:"1rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:I,children:"Next"})]})}),Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4})]})})]})},it=function(e,t){switch(t.type){case"updatePermission":return{state:t.value};default:return e}},ot=Object(s.createContext)(),lt=function(e){var t=Object(s.useReducer)(it,"1",(function(){var e=localStorage.getItem("deletion");return e?JSON.parse(e):""})),a=Object(u.a)(t,2),c=a[0],r=a[1];return Object(s.useEffect)((function(){localStorage.setItem("deletion",JSON.stringify(c))}),[c]),Object(n.jsx)(ot.Provider,{value:{deletemsg:c,dispatch:r},children:e.children})},dt=Object(Pe.a)((function(e){return{textField:{marginTop:e.spacing(2)},margin:{marginBottom:e.spacing(2)}}})),ut=function(e){var t=e.onIdSubmit,a=e.setId,r=Object(m.g)(),i=Object(s.useContext)(E),o=(i.setSocket,i.roomJoin,i.messageEvent),l=i.friendReq,b=dt(),g=Object(s.useContext)(ot).dispatch;c.a.useRef();Object(s.useEffect)((function(){x()&&1===x().role?r.push("/admin/dashboard"):x()&&0===x().role&&r.push("/user/dashboard")}),[r]),window.onload=function(){l(),o()},Object(s.useEffect)((function(){l()}),[]);var h=Object(s.useState)({email:"",password:"",errorMessage:"",showPassword:!1,loading:!1}),O=Object(u.a)(h,2),p=O[0],v=O[1],w=p.email,S=p.password,k=p.errorMessage,C=p.loading,M=function(){v(Object(d.a)(Object(d.a)({},p),{},{showPassword:!p.showPassword}))},I=function(e){e.preventDefault()},P=function(e){var t;v(Object(d.a)(Object(d.a)({},p),{},(t={},Object(te.a)(t,e.target.name,e.target.value),Object(te.a)(t,"errorMessage",""),t)))},R=function(e){if(e.preventDefault(),Ce()(w)||Ce()(S))v(Object(d.a)(Object(d.a)({},p),{},{errorMessage:"Both fields are required"}));else if(Se()(w)){v(Object(d.a)(Object(d.a)({},p),{},{loading:!0}));var n=p.email,s=p.password;nt({email:n,password:s}).then((function(e){f(e.data.token,e.data.user),console.log(e),x()&&x().role,r.push("/dashboard/"+x()._id),v(Object(d.a)(Object(d.a)({},p),{},{loading:!1})),a(x()._id),""==JSON.parse(localStorage.getItem("deletion"))&&g({type:"updatePermission",value:!1})})).catch((function(e){v(Object(d.a)(Object(d.a)({},p),{},{password:"",loading:!1,errorMessage:e.response.data.errorMessage}))})),t(n),console.log("email",n)}else v(Object(d.a)(Object(d.a)({},p),{},{errorMessage:"Invalid Email"}))};return Object(n.jsxs)("div",{className:"login_div",children:[C&&Object(n.jsx)(Ee,{}),Object(n.jsx)(st,{className:"title",name:"TalkSee"}),function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(y.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(ne.a,{className:"Login-container",style:{padding:"30px 50px"},children:[Object(n.jsxs)(y.a,{container:!0,style:{textAlign:"center"},children:[Object(n.jsx)(y.a,{item:!0,xs:6,children:Object(n.jsx)(j.b,{className:"active-header",to:"/login",children:"Sign In"})}),Object(n.jsx)(y.a,{item:!0,xs:6,children:Object(n.jsx)(j.b,{className:"header",to:"/signup",children:"Sign Up"})})]}),Object(n.jsx)(se.a,{className:b.textField,style:{marginTop:"2rem"},label:Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Email Address "}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red"},children:"*"})]}),id:"email-field",name:"email",value:p.email,fullWidth:!0,onChange:P,InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(ge.a,{style:{color:ye.a[600]}})})}}),Object(n.jsxs)(re.a,{className:Object(ae.a)(b.margin,b.textField),fullWidth:!0,children:[Object(n.jsxs)(ie.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Password"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(oe.a,{id:"standard-adornment-password",type:p.showPassword?"text":"password",name:"password",value:p.password,onChange:(e="password",function(t){var a;v(Object(d.a)(Object(d.a)({},p),{},(a={},Object(te.a)(a,e,t.target.value),Object(te.a)(a,"errorMessage",""),a)))}),startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(ve.a,{style:{color:ye.a[600]}})}),endAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(le.a,{"aria-label":"toggle password visibility",onClick:M,onMouseDown:I,children:p.showPassword?Object(n.jsx)(Ze.a,{}):Object(n.jsx)(Qe.a,{})})})})]}),Object(n.jsx)(N.a,{style:{color:ye.a[50],backgroundColor:Ne.a[600],fontWeight:"bold",borderRadius:"1rem",marginBottom:"1.2rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:R,children:"Sign in"}),Object(n.jsx)(j.b,{to:"/forgot-password",style:{textDecoration:"none",marginLeft:"1rem auto"},children:"Forgot Password?"})]})}),Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4})]})});var e}(),k&&Object(n.jsx)(Xe,{type:"error",message:k,autoClose:4e3})]})},jt=a(204),mt=a.n(jt),bt=a(156),gt=a(327),ht=a.n(gt),Ot=a(328),ft=a.n(Ot),xt=function(e){var t=e.match,a=t.params.token,c=Object(s.useState)({firstName:"",lastName:"",token:"",errorMessage:"",successMsg:""}),r=Object(u.a)(c,2),i=r[0],o=r[1],l=i.firstName,j=i.lastName,b=(i.token,i.errorMessage),g=i.successMsg,h=Object(m.g)();Object(s.useEffect)((function(){var e=t.params.token,a=mt.a.decode(e).firstName,n=mt.a.decode(e).lastName;e&&(o(Object(d.a)(Object(d.a)({},i),{},{firstName:a,lastName:n,token:e})),X.accountActivation({token:e}).then((function(e){o(Object(d.a)(Object(d.a)({},i),{},{errorMessage:!1,successMsg:e.successMessage,firstName:e.firstName,lastName:e.lastName}))})).catch((function(e){o(Object(d.a)(Object(d.a)({},i),{},{successMsg:!1,errorMessage:e.response.data.errorMessage,firstName:e.response.data.firstName,lastName:e.response.data.lastName}))})))}),[t.params]);return Object(n.jsxs)("div",{children:[Object(n.jsx)($,{name:"Activation"}),b&&Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsxs)(y.a,{item:!0,xs:1,sm:3,md:4,children:[Object(n.jsx)("p",{children:Object(n.jsxs)("strong",{children:["Hi ",l+" "+j]})}),Object(n.jsxs)("div",{children:["  ",Object(n.jsx)(ft.a,{style:{color:bt.a[600]}}),Object(n.jsxs)("span",{style:{fontSize:"1.3rem"},children:[" ",Object(n.jsx)("strong",{children:b})," "]})]}),Object(n.jsx)(N.a,{style:{color:ye.a[50],backgroundColor:Ne.a[600],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},variant:"contained",className:"loginbtn",onClick:function(e){return h.push("/signup")},children:"Try  Again"})]}),Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4})]})}),g&&Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsxs)(y.a,{item:!0,xs:1,sm:3,md:4,children:[Object(n.jsx)("p",{children:Object(n.jsxs)("strong",{children:["Hi ",l+" "+j]})}),Object(n.jsxs)("div",{children:["  ",Object(n.jsx)(ht.a,{style:{color:Ae.a[600],paddingTop:"0.3rem"}}),Object(n.jsx)("span",{style:{fontSize:"1.3rem"},children:" Your account has been successfully verified. Click below to create your profile"})]}),Object(n.jsx)(N.a,{style:{color:ye.a[50],backgroundColor:Ne.a[600],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},variant:"contained",className:"loginbtn",onClick:function(e){return h.push("/profile-setup/"+a)},children:"Create Profile"})]}),Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4})]})})]})},pt=function(){return Object(n.jsx)("div",{style:{marginTop:"10rem"},children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsxs)(y.a,{item:!0,xs:10,sm:6,md:4,children:[Object(n.jsx)("h1",{children:" Error 404"}),Object(n.jsx)("h5",{style:{marginLeft:"2rem"},children:"Page Not Found"})]}),Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4})]})})},vt=a(155),yt=a(84),Nt=a.n(yt),wt=function(){var e=Object(s.useState)({email:"",errorMessage:"",successMsg:"",loading:!1}),t=Object(u.a)(e,2),a=t[0],c=t[1],r=a.email,i=a.successMsg,o=a.errorMessage,l=a.loading,j=function(e){var t;c(Object(d.a)(Object(d.a)({},a),{},(t={},Object(te.a)(t,e.target.name,e.target.value),Object(te.a)(t,"errorMessage",""),Object(te.a)(t,"successMsg",""),t)))},m=function(e){if(e.preventDefault(),Ce()(r))c(Object(d.a)(Object(d.a)({},a),{},{errorMessage:"Field is required"}));else if(Se()(r)){var t=a.email;c(Object(d.a)(Object(d.a)({},a),{},{loading:!0})),X.forgotPassword({email:t}).then((function(e){c(Object(d.a)(Object(d.a)({},a),{},{email:"",errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){c(Object(d.a)(Object(d.a)({},a),{},{loading:!1,email:"",successMsg:!1,errorMessage:e.response.data.errorMessage}))}))}else c(Object(d.a)(Object(d.a)({},a),{},{errorMessage:"Invalid Email  syntax"}))};return Object(n.jsxs)("div",{children:[l&&Object(n.jsx)(Ee,{}),Object(n.jsx)($,{name:"Forgot Password"}),o&&Object(n.jsx)(Xe,{type:"error",message:o,autoClose:4e3}),i&&Object(n.jsx)(Xe,{type:"success",message:i,autoClose:4e3}),Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(y.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(ne.a,{style:{padding:"30px 50px"},children:[Object(n.jsxs)(N.a,{className:"loginbtn",href:"/login",color:"primary",style:{marginBottom:"2rem",paddingLeft:"0rem",color:vt.a[800]},children:[Object(n.jsx)(Nt.a,{style:{fontWeight:"bold",marginRight:"0.3rem"}})," Go Back"]}),Object(n.jsx)(se.a,{label:Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Email Address "}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red"},children:"*"})]}),id:"filled-start-adornment1",variant:"outlined",name:"email",value:a.email,fullWidth:!0,onChange:j,InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(ge.a,{style:{color:ye.a[600]}})})}}),Object(n.jsx)(N.a,{style:{color:ye.a[50],backgroundColor:Ne.a[600],fontWeight:"bold",borderRadius:"12rem",marginTop:"1.5rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:m,children:"Submit"})]})}),Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4})]})})]})},St=Object(Pe.a)((function(e){return{textfield:{margin:e.spacing(1)},margin:{marginTop:"1.2rem"}}})),kt=function(e){var t=e.match,a=St(),c=Object(m.g)(),r=Object(s.useState)({token:"",password:"",confirmPassword:"",errorMessage:"",successMsg:"",showPassword:!1,showPassword1:!1,loading:!1}),i=Object(u.a)(r,2),o=i[0],l=i[1],j=o.token,b=o.password,g=o.confirmPassword,h=o.errorMessage,O=o.successMsg,f=o.loading;Object(s.useEffect)((function(){var e=t.params.token;e&&l(Object(d.a)(Object(d.a)({},o),{},{token:e}))}),[]);var x=function(e){e.preventDefault()},p=function(e){return function(t){var a;l(Object(d.a)(Object(d.a)({},o),{},(a={},Object(te.a)(a,e,t.target.value),Object(te.a)(a,"errorMessage",""),Object(te.a)(a,"successMsg",""),a)))}},v=function(){l(Object(d.a)(Object(d.a)({},o),{},{showPassword:!o.showPassword}))},w=function(){l(Object(d.a)(Object(d.a)({},o),{},{showPassword1:!o.showPassword1}))},S=function(e){e.preventDefault(),Ce()(b)||Ce()(g)?l(Object(d.a)(Object(d.a)({},o),{},{errorMessage:"All fields are required"})):Ie()(b,g)?(l(Object(d.a)(Object(d.a)({},o),{},{loading:!0})),X.resetPassword({newPassword:b,resetPasswordLink:j}).then((function(e){l(Object(d.a)(Object(d.a)({},o),{},{password:"",confirmPassword:"",errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){l(Object(d.a)(Object(d.a)({},o),{},{password:"",confirmPassword:"",loading:!1,errorMessage:e.response.data.errorMessage}))}))):l(Object(d.a)(Object(d.a)({},o),{},{errorMessage:"Passwords do not match"}))};return Object(n.jsxs)("div",{children:[f&&Object(n.jsx)(Ee,{}),h&&Object(n.jsx)(Xe,{type:"error",message:h,autoClose:4e3}),O&&Object(n.jsx)(Xe,{type:"success",message:O,autoClose:4e3}),Object(n.jsx)($,{name:"Reset Password"}),Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4}),Object(n.jsx)(y.a,{item:!0,xs:10,sm:6,md:4,children:Object(n.jsxs)(ne.a,{style:{padding:"30px 50px"},children:[Object(n.jsxs)(N.a,{className:"loginbtn",href:"https://mail.google.com/mail/u/0/#inbox",color:"primary",style:{marginBottom:"2rem",paddingLeft:"0rem",color:vt.a[800]},children:[Object(n.jsx)(Nt.a,{style:{fontWeight:"bold",marginRight:"0.3rem"}})," Go Back"]}),Object(n.jsxs)(re.a,{className:Object(ae.a)(a.textField),fullWidth:!0,children:[Object(n.jsxs)(ie.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" New Password"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(oe.a,{id:"standard-adornment-password",type:o.showPassword?"text":"password",name:"password",value:o.password,onChange:p("password"),startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(Oe.a,{style:{color:ye.a[600]}})}),endAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(le.a,{"aria-label":"toggle password visibility",onClick:v,onMouseDown:x,children:o.showPassword?Object(n.jsx)(Ze.a,{}):Object(n.jsx)(Qe.a,{})})})})]}),Object(n.jsxs)(re.a,{className:Object(ae.a)(a.margin,a.textField),fullWidth:!0,children:[Object(n.jsxs)(ie.a,{htmlFor:"standard-adornment-password",children:[Object(n.jsx)(Z.a,{variant:"headline",style:{fontWeight:"bold",fontStyle:"italic"},children:" Confirm Password"}),Object(n.jsx)(Z.a,{variant:"headline",style:{color:"red",marginLeft:"0.4rem"},children:"*"})]}),Object(n.jsx)(oe.a,{id:"standard-adornment-confirmPassword",type:o.showPassword1?"text":"password",name:"confirmPassword",value:o.confirmPassword,onChange:p("confirmPassword"),startAdornment:Object(n.jsx)(ce.a,{position:"start",children:Object(n.jsx)(ve.a,{style:{color:ye.a[600]}})}),endAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(le.a,{"aria-label":"toggle password visibility",onClick:w,onMouseDown:x,children:o.showPassword1?Object(n.jsx)(Ze.a,{}):Object(n.jsx)(Qe.a,{})})})})]}),Object(n.jsx)(N.a,{style:{color:ye.a[50],backgroundColor:Ne.a[600],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:S,children:"Reset Password"}),O&&Object(n.jsx)(N.a,{style:{backgroundColor:ye.a[500],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},className:"loginbtn",variant:"outline",fullWidth:!0,onClick:function(e){return c.push("/login")},children:"Login"})]})}),Object(n.jsx)(y.a,{item:!0,xs:1,sm:3,md:4})]})]})},Ct=a(116),Mt=a(114),It=a.n(Mt),Pt=a(115),Rt=a.n(Pt),Tt=Object(Pe.a)({textfield:{marginTop:"2rem"},Submitbtn:{marginTop:"0.6rem"}}),Et=function(e){var t=e.match,a=Tt(),r=Object(m.g)(),i=c.a.useRef(null),o=c.a.useState(!1),j=Object(u.a)(o,2),b=j[0],g=j[1],h=[{label:"Afrikaans",value:"af"},{label:"Albanian",value:"sq"},{label:"Amharic",value:"am"},{label:"Arabic",value:"ar"},{label:"Armenian",value:"hy"},{label:"Azerbaijani",value:"az"},{label:"Basque",value:"eu"},{label:"Belarusian",value:"be"},{label:"Bengali",value:"bn"},{label:"Bosnian",value:"bs"},{label:"Bulgarian",value:"bg"},{label:"Catalan",value:"ca"},{label:"Cebuano",value:"ceb"},{label:"Chichewa",value:"ny"},{label:"Chinese",value:"zh-cn"},{label:"Corsican",value:"co"},{label:"Croatian",value:"hr"},{label:"Czech",value:"cs"},{label:"Danish",value:"da"},{label:"Dutch",value:"nl"},{label:"English",value:"en"},{label:"Esperanto",value:"eo"},{label:"Estonian",value:"et"},{label:"Filipino",value:"tl"},{label:"Finnish",value:"fi"},{label:"French",value:"fr"},{label:"Danish",value:"da"},{label:"Frisian",value:"fy"},{label:"Galician",value:"gl"},{label:"Georgian",value:"ka"},{label:"German",value:"de"},{label:"Greek",value:"el"},{label:"Gujarati",value:"gu"},{label:"Haitian creole",value:"ht"},{label:"Hausa",value:"ha"},{label:"Hawaiian",value:"haw"},{label:"Hebrew",value:"iw"},{label:"Hindi",value:"hi"},{label:"Hmong",value:"hmn"},{label:"Hungarian",value:"hu"},{label:"Icelandic",value:"is"},{label:"Igbo",value:"ig"},{label:"Indonesian",value:"id"},{label:"Irish",value:"ga"},{label:"Italian",value:"it"},{label:"Japanese",value:"ja"},{label:"Javanese",value:"jw"},{label:"Kannada",value:"kn"},{label:"Kazakh",value:"kk"},{label:"Khmer",value:"km"},{label:"Korean",value:"ko"},{label:"Kurdish",value:"ku"},{label:"Kyrgyz",value:"ky"},{label:"Lao",value:"lo"},{label:"Latin",value:"la"},{label:"Latvian",value:"lv"},{label:"Lithuanian",value:"lt"},{label:"Luxembourgish",value:"lb"},{label:"Macedonian",value:"mk"},{label:"Malagasy",value:"mg"},{label:"Malay",value:"ms"},{label:"Malayalam",value:"ml"},{label:"Maltese",value:"mt"},{label:"Maori",value:"mi"},{label:"Marathi",value:"mr"},{label:"Mongolian",value:"mn"},{label:"Myanmar (burmese)",value:"my"},{label:"Nepali",value:"ne"},{label:"Norwegian",value:"no"},{label:"Odia",value:"or"},{label:"Pashto",value:"ps"},{label:"Persian",value:"fa"},{label:"Polish",value:"pl"},{label:"Portuguese",value:"pt"},{label:"Punjabi",value:"pa"},{label:"Romanian",value:"ro"},{label:"Russian",value:"ru"},{label:"Samoan",value:"sm"},{label:"Scots gaelic",value:"gd"},{label:"Serbian",value:"sr"},{label:"Sesotho",value:"st"},{label:"Shona",value:"sn"},{label:"Sindhi",value:"sd"},{label:"Sinhala",value:"si"},{label:"Slovak",value:"sk"},{label:"Slovenian",value:"sl"},{label:"Somali",value:"so"},{label:"Spanish",value:"es"},{label:"Sundanese",value:"su"},{label:"Swahili",value:"sw"},{label:"Swedish",value:"sv"},{label:"Tajik",value:"tg"},{label:"Tamil",value:"ta"},{label:"Telugu",value:"te"},{label:"Thai",value:"th"},{label:"Turkish",value:"tr"},{label:"Ukrainian",value:"uk"},{label:"Urdu",value:"ur"},{label:"Uyghur",value:"ug"},{label:"Uzbek",value:"uz"},{label:"Vietnamese",value:"vi"},{label:"Welsh",value:"cy"},{label:"Xhosa",value:"xh"},{label:"Yiddish",value:"yi"},{label:"Yoruba",value:"yo"},{label:"Zulu",value:"zu"}],O=Object(s.useState)({img:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",language:"",token:"",errorMessage:"",successMsg:"",infoMessage:"",loading:!1}),f=Object(u.a)(O,2),x=f[0],p=f[1],v=x.img,y=x.language,w=x.token,S=x.successMsg,k=x.errorMessage,C=x.infoMessage,M=x.loading;Object(s.useEffect)((function(){var e=t.params.token;e&&p(Object(d.a)(Object(d.a)({},x),{},{token:e}))}),[]);var I=function(e){return new Promise((function(t){It.a.imageFileResizer(e,300,300,"JPEG",100,0,(function(e){t(e)}),"base64")}))},P=c.a.useCallback((function(){try{var e=i.current.getScreenshot();p(Object(d.a)(Object(d.a)({},x),{},{infoMessage:"Picture Captured"}));var t=new FormData;t.append("file",e),l.a.post("http://127.0.0.1:5000/webcam-face-detection",t).then(function(){var a=Object(tt.a)(et.a.mark((function a(n){return et.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:"",successMsg:n.data.successMessage})),p(Object(d.a)(Object(d.a)({},x),{},{infoMessage:"Loading...."})),t.append("file",e),t.append("upload_preset","TalkSee"),fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){return p(Object(d.a)(Object(d.a)({},x),{},{img:e.url}))})).catch((function(e){return console.error("Error:",e)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}catch(a){p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:"error in uploading photo"}))}}),[i]),R=function(){var e=Object(tt.a)(et.a.mark((function e(t){var a,n;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.files[0],(n=new FormData).append("file",a),l.a.post("http://127.0.0.1:5000/",n).then(function(){var e=Object(tt.a)(et.a.mark((function e(t){var s,c,r;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:"",successMsg:"response.data.successMessage"})),e.next=3,I(a);case 3:return s=e.sent,p(Object(d.a)(Object(d.a)({},x),{},{infoMessage:"Loading...."})),n.append("file",s),n.append("upload_preset","TalkSee"),e.next=9,fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"POST",body:n});case 9:return c=e.sent,e.next=12,c.json();case 12:r=e.sent,p(Object(d.a)(Object(d.a)({},x),{},{img:r.secure_url}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:e.response.data.errorMessage}))}))}catch(s){p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:"error in uploading photo"}))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){X.profileSetup({profileImg:v,langPreference:y,token:w}).then((function(e){p(Object(d.a)(Object(d.a)({},x),{},{img:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",language:"",errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){p(Object(d.a)(Object(d.a)({},x),{},{errorMessage:e.response.data.errorMessage}))}))};return Object(n.jsxs)("div",{children:[M&&Object(n.jsx)(Ee,{}),Object(n.jsx)($,{name:"Profile Setup"}),k&&Object(n.jsx)(Xe,{type:"error",message:k,autoClose:3e3}),C&&Object(n.jsx)(Xe,{type:"info",message:C,autoClose:8e3}),S&&Object(n.jsx)(Xe,{type:"success",message:S,autoClose:2500}),Object(n.jsxs)("div",{className:"profile-page",children:[Object(n.jsxs)("div",{className:"profile-container",children:[Object(n.jsx)("div",{className:"img-holder",children:Object(n.jsx)("img",{src:v,className:"profile-img"})}),Object(n.jsx)("input",{type:"file",accept:"image/*",name:"image-upload",id:"input",onChange:R}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("label",{className:"image-upload",htmlFor:"input",children:[Object(n.jsx)("i",{className:"material-icons",children:"add_photo_alternate"}),"Choose Profile Photo"]})}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("button",{className:"take-photo loginbtn","data-toggle":"modal","data-target":"#exampleModalCenter",onClick:function(){return g(!1)},children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Take Photo"]})}),Object(n.jsx)(Ct.a,{style:{width:210,padding:"0.4rem"},placeholder:"Select Language ---",value:h.find((function(e){return e.label===y})),className:a.textfield,options:h,onChange:function(e){console.log(e),p(Object(d.a)(Object(d.a)({},x),{},{language:e.value}))}}),Object(n.jsx)(N.a,{style:{color:ye.a[50],backgroundColor:Ne.a[600],fontWeight:"bold",borderRadius:"0.5rem",marginTop:"1.5rem",padding:"0.5rem"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:T,children:"Set Profile"}),S&&Object(n.jsx)(N.a,{style:{backgroundColor:ye.a[500],fontWeight:"bold",borderRadius:"1rem",marginTop:"0.8rem",padding:"0.5rem"},className:"loginbtn",variant:"outline",fullWidth:!0,onClick:function(e){return r.push("/login")},children:"Login"})]}),Object(n.jsx)("div",{className:"modal fade",id:"exampleModalCenter",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h3",{className:"modal-title",id:"exampleModalLongTitle",children:"Take Photo"}),Object(n.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsx)("div",{className:"webcam-container",children:Object(n.jsx)(Rt.a,{audio:!1,height:200,width:460,ref:i,screenshotFormat:"image/jpeg"})})}),b?Object(n.jsx)("div",{className:"modal-footer",children:Object(n.jsx)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",children:"Close"})}):Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsxs)("button",{className:"take-photo loginbtn",onClick:P,children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Capture photo"]})," "]})]})})})]})]})},At=a(633),Dt=a(622),_t=function(e){var t=e.contact,a="/"+t._id,c=(Object(m.g)(),JSON.parse(localStorage.getItem("user"))),r=Object(s.useState)(!c.sentRequests.includes(t._id)),i=Object(u.a)(r,2),o=i[0],l=i[1],d=Object(s.useContext)(E).clientSocket,j=x()._id,b=x().firstName+" "+x().lastName,g=x().profileImg,h=x().email,O=x().gender,f=x().langPreference;return Object(n.jsx)("div",{children:Object(n.jsx)(ne.a,{style:{padding:"10px 20px",marginBottom:"1rem"},children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsxs)(y.a,{item:!0,xs:3,md:1,children:["  ",Object(n.jsx)("img",{src:t.profileImg,style:{height:"60px",width:"60px",borderRadius:"20%",display:"inline"},alt:"img"})," "]}),Object(n.jsx)(y.a,{item:!0,xs:9,md:9,children:Object(n.jsxs)("div",{style:{display:"inline"},children:[Object(n.jsx)("p",{className:"user_names",children:t.firstName+" "+t.lastName}),Object(n.jsx)(Z.a,{style:{color:"gray",fontStyle:"italic",fontSize:"0.9rem"},children:t.email})]})}),Object(n.jsx)(At.a,{only:["md","lg"],children:Object(n.jsx)(y.a,{item:!0,xs:3})}),Object(n.jsx)(y.a,{item:!0,xs:9,md:2,children:o?Object(n.jsx)(N.a,{className:"loginbtn",style:{marginTop:"0.7rem",backgroundColor:Dt.a[600],color:"white"},variant:"contained",onClick:function(){console.log("contact Id",t._id),R.sendRequest({friendId:t._id,myId:j,myName:b,myProfileImg:g,myEmail:h,myGender:O,myLangPreference:f}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),l(!1)})).catch((function(e){console.log(e)})),d.emit("friendRequest",{myName:b,roomId:a},(function(e){e?console.log(e):console.log("emitted event")}))},children:"Add friend"}):Object(n.jsx)(N.a,{className:"loginbtn",style:{marginTop:"0.7rem",backgroundColor:ye.a[500],color:"white"},variant:"contained",onClick:function(){R.cancelRequest({friendId:t._id,myId:j}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),l(!0)})).catch((function(e){console.log(e)})),d.emit("rejectfriendRequest",{myName:b,roomId:a},(function(e){e?console.log(e):console.log("emitted event")}))},children:"Requested"})})]})})})},Ft=new(function(e){Object(M.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(C.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getAllContact=function(){return e.get("contacts/getContact")},e.getSingleContact=function(t){return e.get("contacts/get-contact/"+t)},e}return a}(P)),Lt=a(71),qt=a.n(Lt),Wt=Object(m.h)((function(e){var t=e.history;t=Object(m.g)();var a=x()._id,c=x().profileImg,r=x().firstName,i=x().lastName,o=Object(s.useContext)(E),l=(o.clientSocket,o.setSocket,o.messageEvent,o.roomJoin),d=(o.friendReq,o.getRequest),u=o.frndcounter,b=o.msgCounter;return Object(s.useEffect)((function(){d()}),[u]),Object(s.useEffect)((function(){l(a)}),[]),Object(n.jsx)("div",{class:"wrapper",children:Object(n.jsxs)("div",{class:"sidebar",children:[Object(n.jsx)("div",{id:"profile_div",children:Object(n.jsx)("img",{src:c,alt:"Profile",style:{height:"90px",width:"90px",borderRadius:"50%",cursor:"pointer"},onClick:function(){return t.push("/update-my-profile-setup/"+a)}})}),Object(n.jsx)("h4",{children:r+" "+i}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:b>=1?Object(n.jsxs)(j.b,{to:{pathname:"/mychats/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-comments",children:Object(n.jsx)("span",{className:"friendCounter",children:b})})," My Chats"]}):Object(n.jsxs)(j.b,{to:{pathname:"/mychats/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-comments"})," My Chats"]})}),Object(n.jsx)("li",{children:Object(n.jsxs)(j.b,{to:{pathname:"/update-my-profile-setup/".concat(a)},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-user-cog"})," Profile Setting"]})}),Object(n.jsx)("li",{children:u>=1?Object(n.jsxs)(j.b,{to:{pathname:"/my-contact-list/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-address-book",children:Object(n.jsx)("span",{className:"friendCounter",children:u})})," Contacts"]}):Object(n.jsxs)(j.b,{to:{pathname:"/my-contact-list/"+a},style:{textDecoration:"none"},children:[Object(n.jsx)("i",{class:"fas fa-address-book"})," Contacts"]})})]}),Object(n.jsx)("div",{class:"social_media",children:Object(n.jsxs)("button",{className:"btn text-decoration-none btn-link",onClick:function(e){p((function(){t.push("/login")}))},children:[Object(n.jsx)("i",{className:"fas fa-sign-out-alt"})," Logout"]})})]})})})),Bt=function(e){var t=e.match,a=x()._id,r=x().email,i=(Object(m.g)(),Object(s.useState)("")),o=Object(u.a)(i,2),l=o[0],d=o[1],j=c.a.useState([]),b=Object(u.a)(j,2),g=b[0],h=b[1],O=Object(s.useRef)(),f=Object(s.useRef)();O.current="/"+t.params.id;var p=Object(s.useContext)(E),N=p.setSocket,w=p.roomJoin,k=p.messageEvent,C=p.friendReq;window.onload=function(){C(),k();var e=JSON.parse(localStorage.getItem("user"))._id;w(e),f=S()("http://127.0.0.1:5000"),N((function(e){return(e=f).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:r})})),e}))};return Object(s.useEffect)((function(){R.getSentFriendRequest(a).then((function(e){localStorage.setItem("user",JSON.stringify(e))})).catch((function(e){console.log(e)})),Ft.getSingleContact(a).then((function(e){h(e)})).catch((function(e){console.log(e)}))}),[]),Object(s.useEffect)((function(){}),[]),Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(At.a,{only:["xs","sm"],children:Object(n.jsx)(y.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(At.a,{only:["md","lg"],children:Object(n.jsx)(y.a,{item:!0,xs:12,children:Object(n.jsx)(v,{})})}),Object(n.jsxs)(y.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)($,{name:"Add Friend"}),0===g.length?Object(n.jsx)("div",{style:{textAlign:"center",height:"100vh",padding:"6rem",fontWeight:"bold"},children:"No User Found"}):Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{container:!0,style:{marginTop:"0.9rem"},children:[Object(n.jsx)(y.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsxs)(y.a,{item:!0,xs:10,md:10,children:[Object(n.jsxs)(y.a,{container:!0,style:{marginBottom:"1rem"},children:[Object(n.jsx)(y.a,{item:!0,xs:0,md:8,children:" "}),Object(n.jsx)(y.a,{item:!0,xs:12,md:4,children:Object(n.jsx)(se.a,{value:l,onChange:function(e){return d(e.currentTarget.value)},placeholder:"Search by typing name",InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(qt.a,{style:{color:"black",marginRight:"0.4rem",float:"right"}})})}})})]}),g.filter((function(e){return""===l||e.firstName.toLowerCase().startsWith(l.toLowerCase())||e.lastName.toLowerCase().startsWith(l.toLowerCase())?e:void 0})).map((function(e,t){return e._id===a?Object(n.jsx)("div",{}):Object(n.jsx)(_t,{contact:e,roomId:O.current},t)}))]}),Object(n.jsx)(y.a,{item:!0,xs:1,md:1})]})})]})]})})},Jt=function(e){var t=e.friendreq,a=e.onAcceptReject,s=x()._id,c=x().firstName+" "+x().lastName,r=x().profileImg,i=x().email,o=x().gender,l=x().langPreference;return Object(n.jsx)("div",{children:Object(n.jsx)(ne.a,{style:{padding:"20px 10px",marginBottom:"1rem"},children:Object(n.jsxs)(y.a,{container:!0,style:{display:"flex"},children:[Object(n.jsxs)(y.a,{item:!0,xs:12,sm:12,md:9,children:[Object(n.jsx)("img",{src:t.profileImg,style:{marginRight:"0.5rem",height:"60px",width:"60px",borderRadius:"50%",display:"inline",padding:"0.2rem"},alt:"img"}),Object(n.jsx)("p",{className:"user_names",children:t.name})]}),Object(n.jsxs)(y.a,{item:!0,xs:12,sm:12,md:3,children:[Object(n.jsx)(N.a,{className:"loginbtn",style:{backgroundColor:Dt.a[700],color:"white",margin:"0.4rem"},variant:"contained",size:"medium",onClick:function(){R.acceptRequest({friendId:t.id,friendName:t.name,friendProfileImg:t.profileImg,chatId:t.email+"/"+i,friendEmail:t.email,friendGender:t.gender,friendLangPreference:t.langPreference,myId:s,myName:c,myProfileImg:r,myEmail:i,myGender:o,myLangPreference:l}).then((function(e){a(),localStorage.setItem("user",JSON.stringify(e)),console.log(e)})).catch((function(e){console.log(e)}))},children:"Accept"}),Object(n.jsx)(N.a,{className:"loginbtn",style:{backgroundColor:ye.a[600],color:"white"},variant:"contained",onClick:function(){R.rejectRequest({friendId:t.id,myId:s}).then((function(e){a(),localStorage.setItem("user",JSON.stringify(e))})).catch((function(e){console.log(e)}))},children:"Reject"})]})]})})})},zt=function(e){var t=e.match,a=x()._id,r=c.a.useState([]),i=Object(u.a)(r,2),o=i[0],l=i[1],d=Object(s.useState)(""),j=Object(u.a)(d,2),b=j[0],g=j[1],h=Object(s.useRef)(),O=x().email,f=Object(s.useContext)(E),p=f.setSocket,N=f.roomJoin,w=f.messageEvent,k=f.friendReq,C=f.getRequest,M=f.acceptRejectCounter;Object(s.useRef)().current="/"+t.params.id;Object(m.g)();window.onload=function(){k(),w(),C();var e=JSON.parse(localStorage.getItem("user"))._id;N(e),h=S()("http://127.0.0.1:5000"),p((function(e){return(e=h).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:O.current})})),e}))};var I=function(){R.getFriendRequest(a).then((function(e){l(e),M()})).catch((function(e){console.log(e)}))};return Object(s.useEffect)(I,[]),Object(s.useEffect)((function(){}),[]),Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(At.a,{only:["xs","sm"],children:Object(n.jsx)(y.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(At.a,{only:["md","lg"],children:Object(n.jsx)(y.a,{item:!0,xs:12,children:Object(n.jsx)(v,{})})}),Object(n.jsxs)(y.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)($,{name:"Friend Requests"}),0===o.length?Object(n.jsx)("div",{style:{textAlign:"center",height:"100vh",padding:"6rem",fontWeight:"bold"},children:"No Friend Request"}):Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{container:!0,style:{marginTop:"0.9rem"},children:[Object(n.jsx)(y.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsxs)(y.a,{item:!0,xs:10,md:10,children:[Object(n.jsxs)(y.a,{container:!0,style:{marginBottom:"1rem"},children:[Object(n.jsx)(y.a,{item:!0,xs:0,md:7,children:" "}),Object(n.jsx)(y.a,{item:!0,xs:12,md:5,children:Object(n.jsx)(se.a,{value:b,onChange:function(e){return g(e.currentTarget.value)},placeholder:"Search by typing name",InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(qt.a,{style:{color:"black",marginRight:"0.4rem",float:"right"}})})}})})]}),o.filter((function(e){return""==b||e.name.toLowerCase().startsWith(b.toLowerCase())?e:void 0})).map((function(e,t){return Object(n.jsx)(Jt,{friendreq:e,onAcceptReject:I},t)}))]}),Object(n.jsx)(y.a,{item:!0,xs:1,md:10})]})})]})]})})},Ut=a(623),Ht=function(e){var t=e.friend,a=e.onRemove,s=e.chatRec;console.log(s);var c=x()._id,r=t.email,i=Object(m.g)();return Object(n.jsx)(ne.a,{style:{padding:"20px 10px",marginBottom:"1rem"},children:Object(n.jsxs)(y.a,{container:!0,style:{display:"flex"},children:[Object(n.jsxs)(y.a,{item:!0,xs:12,sm:12,md:9,children:[Object(n.jsx)("img",{src:t.profileImg,style:{marginRight:"0.5rem",height:"60px",width:"60px",borderRadius:"20%",display:"inline",padding:"0.2rem"},alt:"img"}),Object(n.jsx)("p",{className:"user_names",children:t.name})]}),Object(n.jsxs)(y.a,{item:!0,xs:12,sm:12,md:3,children:[Object(n.jsx)(N.a,{className:"loginbtn",style:{backgroundColor:Ut.a[700],color:"white",margin:"0.4rem"},variant:"contained",size:"medium",onClick:function(){return e=t,console.log("Fr",e),console.log("pth","/chat/"+r+"/ "+e.id),localStorage.setItem("friendId",e.id),localStorage.setItem("recName",e.name),localStorage.setItem("recLang",e.langPreference),localStorage.setItem("profileUrl",e.profileImg),void i.push("/chat/"+r+" "+e.id);var e},children:"Chat"}),Object(n.jsx)(N.a,{className:"loginbtn",style:{backgroundColor:bt.a[400],color:"white"},variant:"contained",onClick:function(){R.deleteFriend({friendId:t.id,myId:c}).then((function(e){a(),localStorage.setItem("user",JSON.stringify(e))})).catch((function(e){console.log(e)}))},children:"Remove"})]})]})})},Gt=new(function(e){Object(M.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(C.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getUsers=function(){return e.get("users")},e.getUserByEmail=function(t){return e.post("users/userbyemail",t)},e.getUserNameByEmail=function(t){return e.get("users/usernamebyemail/"+t)},e}return a}(P)),Kt=Object(s.createContext)();function Yt(e){var t=e.userId,a=e.children,c=Object(s.useState)([]),r=Object(u.a)(c,2),i=r[0],o=r[1],l=[],d=[],j=[],m=[],b=[],g=[];Object(s.useEffect)((function(){void 0!==t&&h(t,void 0),console.log("undefined")}),[t]);var h=function(e){return l=[],m=[],d=[],j=[],g=[],b=[],T.getChatRecipients(e).then((function(t){t.length>0?(t.map((function(e){return l.push(e)})),console.log("rec data",l),l=Array.from(new Set(l)),console.log("rec data updated",l),o((function(e){return e.Rname=l,e})),i.Rname.map((function(t){T.getLastMsg(e,t).then((function(e){d.push(e.lastMsg),j.push(e.type)})).catch((function(e){return console.log(e)})),Gt.getUserByEmail(t).then((function(e){b.push(e[0]._id),g.push(e[0].profileImg),m.push(e[0].firstName+" "+e[0].lastName),o((function(e){return e.lastMsg=d,e.msgType=j,e.recId=b,e.imgUrl=g,e.name=m,console.log(i),e}))})).catch((function(e){return console.log(e)}))}))):console.log("no data")})).catch((function(e){return console.log(e)})),i},O={chatRecipients:i,getRecData:h,setRecipients:o};return Object(n.jsx)(Kt.Provider,{value:O,children:a})}var Vt=function(e){var t=x()._id,a=c.a.useState([]),r=Object(u.a)(a,2),i=r[0],o=r[1],l=(Object(m.g)(),Object(s.useState)("")),d=Object(u.a)(l,2),j=d[0],b=d[1],g=Object(s.useRef)(),h=Object(s.useContext)(E),O=h.setSocket,f=h.roomJoin,p=h.messageEvent,N=h.friendReq,w=Object(s.useRef)();w.current=JSON.parse(localStorage.getItem("user")).email,window.onload=function(){N(),p();var e=JSON.parse(localStorage.getItem("user"))._id;f(e),g=S()("http://127.0.0.1:5000"),O((function(e){return(e=g).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:w.current})})),e}))};var k=function(){R.getAllFriends(t).then((function(e){o(e)})).catch((function(e){console.log(e)}))};return Object(s.useEffect)((function(){k()}),[]),Object(s.useEffect)((function(){}),[]),Object(s.useEffect)((function(){}),[]),Object(s.useEffect)((function(){}),[]),Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(At.a,{only:["xs","sm"],children:Object(n.jsx)(y.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(At.a,{only:["md","lg"],children:Object(n.jsx)(y.a,{item:!0,xs:12,children:Object(n.jsx)(v,{})})}),Object(n.jsxs)(y.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)($,{name:"My Friends"}),0===i.length?Object(n.jsx)("div",{style:{textAlign:"center",height:"100vh",padding:"6rem",fontWeight:"bold"},children:"No Friend Found"}):Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{container:!0,style:{marginTop:"0.9rem",display:"flex"},children:[Object(n.jsx)(y.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsxs)(y.a,{item:!0,xs:10,md:10,children:[Object(n.jsxs)(y.a,{container:!0,style:{marginBottom:"1rem"},children:[Object(n.jsx)(y.a,{item:!0,xs:0,md:7,children:" "}),Object(n.jsx)(y.a,{item:!0,xs:12,md:5,children:Object(n.jsx)(se.a,{value:j,onChange:function(e){return b(e.currentTarget.value)},placeholder:"Search by typing name",InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(qt.a,{style:{color:"black",marginRight:"0.4rem",float:"right"}})})}})})]}),i.filter((function(e){return""==j||e.name.toLowerCase().startsWith(j.toLowerCase())?e:void 0})).map((function(e,t){return Object(n.jsx)(Ht,{friend:e,onRemove:k},t)}))]}),Object(n.jsx)(y.a,{item:!0,xs:1,md:1})]})})]})]})})},Xt=Object(Pe.a)({textfield:{marginTop:"2rem"},Submitbtn:{marginTop:"0.6rem"}}),Zt=function(){var e=Xt(),t=x()._id,a=JSON.parse(localStorage.getItem("user")).email,r=Object(s.useContext)(E),i=r.setSocket,o=r.roomJoin,j=r.messageEvent,m=r.friendReq,b=Object(s.useRef)(),g=c.a.useRef(null),h=c.a.useState(!1),O=Object(u.a)(h,2),f=O[0],p=O[1],w=[{label:"Afrikaans",value:"af"},{label:"Albanian",value:"sq"},{label:"Amharic",value:"am"},{label:"Arabic",value:"ar"},{label:"Armenian",value:"hy"},{label:"Azerbaijani",value:"az"},{label:"Basque",value:"eu"},{label:"Belarusian",value:"be"},{label:"Bengali",value:"bn"},{label:"Bosnian",value:"bs"},{label:"Bulgarian",value:"bg"},{label:"Catalan",value:"ca"},{label:"Cebuano",value:"ceb"},{label:"Chichewa",value:"ny"},{label:"Chinese",value:"zh-cn"},{label:"Corsican",value:"co"},{label:"Croatian",value:"hr"},{label:"Czech",value:"cs"},{label:"Danish",value:"da"},{label:"Dutch",value:"nl"},{label:"English",value:"en"},{label:"Esperanto",value:"eo"},{label:"Estonian",value:"et"},{label:"Filipino",value:"tl"},{label:"Finnish",value:"fi"},{label:"French",value:"fr"},{label:"Danish",value:"da"},{label:"Frisian",value:"fy"},{label:"Galician",value:"gl"},{label:"Georgian",value:"ka"},{label:"German",value:"de"},{label:"Greek",value:"el"},{label:"Gujarati",value:"gu"},{label:"Haitian creole",value:"ht"},{label:"Hausa",value:"ha"},{label:"Hawaiian",value:"haw"},{label:"Hebrew",value:"iw"},{label:"Hindi",value:"hi"},{label:"Hmong",value:"hmn"},{label:"Hungarian",value:"hu"},{label:"Icelandic",value:"is"},{label:"Igbo",value:"ig"},{label:"Indonesian",value:"id"},{label:"Irish",value:"ga"},{label:"Italian",value:"it"},{label:"Japanese",value:"ja"},{label:"Javanese",value:"jw"},{label:"Kannada",value:"kn"},{label:"Kazakh",value:"kk"},{label:"Khmer",value:"km"},{label:"Korean",value:"ko"},{label:"Kurdish",value:"ku"},{label:"Kyrgyz",value:"ky"},{label:"Lao",value:"lo"},{label:"Latin",value:"la"},{label:"Latvian",value:"lv"},{label:"Lithuanian",value:"lt"},{label:"Luxembourgish",value:"lb"},{label:"Macedonian",value:"mk"},{label:"Malagasy",value:"mg"},{label:"Malay",value:"ms"},{label:"Malayalam",value:"ml"},{label:"Maltese",value:"mt"},{label:"Maori",value:"mi"},{label:"Marathi",value:"mr"},{label:"Mongolian",value:"mn"},{label:"Myanmar (burmese)",value:"my"},{label:"Nepali",value:"ne"},{label:"Norwegian",value:"no"},{label:"Odia",value:"or"},{label:"Pashto",value:"ps"},{label:"Persian",value:"fa"},{label:"Polish",value:"pl"},{label:"Portuguese",value:"pt"},{label:"Punjabi",value:"pa"},{label:"Romanian",value:"ro"},{label:"Russian",value:"ru"},{label:"Samoan",value:"sm"},{label:"Scots gaelic",value:"gd"},{label:"Serbian",value:"sr"},{label:"Sesotho",value:"st"},{label:"Shona",value:"sn"},{label:"Sindhi",value:"sd"},{label:"Sinhala",value:"si"},{label:"Slovak",value:"sk"},{label:"Slovenian",value:"sl"},{label:"Somali",value:"so"},{label:"Spanish",value:"es"},{label:"Sundanese",value:"su"},{label:"Swahili",value:"sw"},{label:"Swedish",value:"sv"},{label:"Tajik",value:"tg"},{label:"Tamil",value:"ta"},{label:"Telugu",value:"te"},{label:"Thai",value:"th"},{label:"Turkish",value:"tr"},{label:"Ukrainian",value:"uk"},{label:"Urdu",value:"ur"},{label:"Uyghur",value:"ug"},{label:"Uzbek",value:"uz"},{label:"Vietnamese",value:"vi"},{label:"Welsh",value:"cy"},{label:"Xhosa",value:"xh"},{label:"Yiddish",value:"yi"},{label:"Yoruba",value:"yo"},{label:"Zulu",value:"zu"}],k=Object(s.useState)({img:"",language:"",errorMessage:"",successMsg:"",infoMessage:"",loading:!1}),C=Object(u.a)(k,2),M=C[0],I=C[1],P=M.img,R=M.language,T=M.successMsg,A=M.errorMessage,D=M.infoMessage,_=M.loading;window.onload=function(){m(),j();var e=JSON.parse(localStorage.getItem("user"))._id;o(e),b=S()("http://127.0.0.1:5000"),i((function(e){return(e=b).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:a})})),e}))},Object(s.useEffect)((function(){X.getMyAccount(t).then((function(e){I(Object(d.a)(Object(d.a)({},M),{},{img:e.profileImg,language:e.langPreference}))})).catch((function(e){I(Object(d.a)(Object(d.a)({},M),{},{errorMessage:e.response.data.errorMessage}))}))}),[]);var F=function(e){return new Promise((function(t){It.a.imageFileResizer(e,300,300,"JPEG",100,0,(function(e){t(e)}),"base64")}))},L=c.a.useCallback((function(){try{var e=g.current.getScreenshot();I(Object(d.a)(Object(d.a)({},M),{},{infoMessage:"Picture Captured"})),p(!0);var t=new FormData;t.append("file",e),l.a.post("http://127.0.0.1:5000/webcam-face-detection",t).then(function(){var a=Object(tt.a)(et.a.mark((function a(n){return et.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:I(Object(d.a)(Object(d.a)({},M),{},{errorMessage:"",successMsg:n.data.successMessage})),I(Object(d.a)(Object(d.a)({},M),{},{infoMessage:"Loading.... "})),t.append("file",e),t.append("upload_preset","TalkSee"),fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"PUT",body:t}).then((function(e){return e.json()})).then((function(e){return I(Object(d.a)(Object(d.a)({},M),{},{img:e.url}))})).catch((function(e){return console.error("Error:",e)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}catch(a){I(Object(d.a)(Object(d.a)({},M),{},{errorMessage:"error in uploading photo"}))}}),[g]),q=function(){var e=Object(tt.a)(et.a.mark((function e(t){var a,n;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.files[0],(n=new FormData).append("file",a),l.a.post("http://127.0.0.1:5000/",n).then(function(){var e=Object(tt.a)(et.a.mark((function e(t){var s,c,r;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(Object(d.a)(Object(d.a)({},M),{},{errorMessage:"",successMsg:t.data.successMessage})),e.next=3,F(a);case 3:return s=e.sent,I(Object(d.a)(Object(d.a)({},M),{},{infoMessage:"Loading...."})),n.append("file",s),n.append("upload_preset","TalkSee"),e.next=9,fetch("https://api.cloudinary.com/v1_1/fariha31/image/upload",{method:"PUT",body:n});case 9:return c=e.sent,e.next=12,c.json();case 12:r=e.sent,I(Object(d.a)(Object(d.a)({},M),{},{img:r.secure_url}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){I(Object(d.a)(Object(d.a)({},M),{},{errorMessage:e.response.data.errorMessage}))}))}catch(s){I(Object(d.a)(Object(d.a)({},M),{},{errorMessage:"error in uploading photo"}))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){X.updateProfileSetup(t,{profileImg:P,langPreference:R}).then((function(e){localStorage.setItem("user",JSON.stringify(e.userData)),I(Object(d.a)(Object(d.a)({},M),{},{errorMessage:!1,successMsg:e.successMessage,loading:!1}))})).catch((function(e){I(Object(d.a)(Object(d.a)({},M),{},{errorMessage:e.response.data.errorMessage}))}))};return Object(n.jsxs)("div",{style:{height:"100vh"},className:"back_divs",children:[_&&Object(n.jsx)(Ee,{}),Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(At.a,{only:["xs","sm"],children:Object(n.jsx)(y.a,{item:!0,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(At.a,{only:["md","lg"],children:Object(n.jsx)(y.a,{item:!0,xs:12,sm:12,children:Object(n.jsx)(v,{})})}),Object(n.jsxs)(y.a,{item:!0,xs:12,sm:12,md:10,children:[Object(n.jsx)($,{name:"Update Profile "}),A&&Object(n.jsx)(Xe,{type:"error",message:A,autoClose:3e3}),D&&Object(n.jsx)(Xe,{type:"info",message:D,autoClose:8e3}),T&&Object(n.jsx)(Xe,{type:"success",message:T,autoClose:2500}),Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,sm:4,md:4}),Object(n.jsx)(y.a,{item:!0,xs:10,sm:4,md:4,children:Object(n.jsxs)("div",{className:"profile-page",children:[Object(n.jsxs)("div",{className:"profile-container",children:[Object(n.jsx)("div",{className:"img-holder",children:Object(n.jsx)("img",{src:P,className:"profile-img"})}),Object(n.jsx)("input",{type:"file",accept:"image/*",name:"image-upload",id:"input",onChange:q}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("label",{className:"image-upload",htmlFor:"input",children:[Object(n.jsx)("i",{className:"material-icons",children:"add_photo_alternate"}),"Choose Profile Photo"]})}),Object(n.jsx)("div",{className:"label",children:Object(n.jsxs)("button",{className:"take-photo loginbtn","data-toggle":"modal","data-target":"#exampleModalCenter",onClick:function(){return p(!1)},children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Take Photo"]})}),Object(n.jsx)(Ct.a,{style:{width:210,padding:"0.4rem"},placeholder:"Select Language ---",value:w.find((function(e){return e.value===R})),className:e.textfield,options:w,onChange:function(e){I(Object(d.a)(Object(d.a)({},M),{},{language:e.value}))}}),Object(n.jsx)(N.a,{style:{color:ye.a[50],backgroundColor:Ne.a[600],fontWeight:"bold",fontSize:"1rem",borderRadius:"0.5rem",marginTop:"1rem",marginBottom:"0.8rem",padding:"0.5rem",textTransform:"capitalize"},className:"loginbtn",variant:"contained",fullWidth:!0,onClick:W,children:"Update Profile"})]}),Object(n.jsx)("div",{className:"modal fade",id:"exampleModalCenter",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h3",{className:"modal-title",id:"exampleModalLongTitle",children:"Take Photo"}),Object(n.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsx)("div",{className:"modal-body",children:Object(n.jsx)("div",{className:"webcam-container",children:Object(n.jsx)(Rt.a,{audio:!1,height:200,width:460,ref:g,screenshotFormat:"image/jpeg"})})}),f?Object(n.jsx)("div",{className:"modal-footer",children:Object(n.jsx)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",children:"Close"})}):Object(n.jsxs)("div",{className:"modal-footer",children:[Object(n.jsxs)("button",{className:"take-photo loginbtn",onClick:L,children:[Object(n.jsx)("i",{className:"material-icons",style:{marginRight:"0.2rem"},children:"photo_camera"}),"Capture photo"]})," "]})]})})})]})}),Object(n.jsx)(y.a,{item:!0,xs:1,sm:4,md:3})]})]})]})]})},Qt=a(23),$t=a(205),ea=(a(318),a(634)),ta=a(627),aa=a(625),na=a(626),sa=a(624),ca=function(e){var t=JSON.parse(localStorage.getItem("deletion")),a=Object(s.useState)(!0),c=Object(u.a)(a,2),r=(c[0],c[1],Object(s.useContext)(ot).dispatch),i=Object(s.useState)(t.state),o=Object(u.a)(i,2),l=o[0],d=o[1],j=function(){e.setShow(!1)};return Object(n.jsxs)(ea.a,{open:e.open,onClose:j,"aria-labelledby":"form-dialog-title",children:[Object(n.jsxs)(sa.a,{id:"form-dialog-title",children:[Object(n.jsx)(Be.a,{style:{color:"red",marginRight:"0.3rem",paddingBottom:"0.3rem"}}),Object(n.jsx)("p",{style:{fontWeight:"bold",display:"inline"},children:"Delete Warning"})]}),Object(n.jsxs)(aa.a,{children:[Object(n.jsx)(na.a,{children:"This message will be permanently deleted. Are you sure you want to continue?"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"checkbox",value:l,defaultChecked:l,onClick:function(e){return function(e){console.log(e.target.checked),d(e.target.checked),r({type:"updatePermission",value:e.target.checked})}(e)}}),Object(n.jsx)("p",{style:{color:"black",fontSize:"16px",display:"inline",marginLeft:"0.7rem"},children:"Do not ask me again?"})]})]}),Object(n.jsxs)(ta.a,{children:[Object(n.jsx)(N.a,{onClick:j,style:{backgroundColor:"gray",color:"white"},children:"No"}),Object(n.jsx)(N.a,{onClick:function(){return t=e.msgId,console.log("mid in deleteMsg",t),void T.deleteMessage(t).then((function(t){console.log("response: ",t),e.setShow(!1),e.getData()})).catch((function(e){return console.log(e)}));var t},style:{backgroundColor:"#0e7be9",color:"white"},children:"Yes"})]})]})};function ra(e){var t=JSON.parse(localStorage.getItem("deletion")),a=c.a.useState(!1),r=Object(u.a)(a,2),i=(r[0],r[1],c.a.useState(!1)),o=Object(u.a)(i,2),l=o[0],d=o[1],j=Object(s.useState)(),m=Object(u.a)(j,2),b=m[0],g=m[1],h=null,O=function(a){!0===t.state?(console.log("mid in settingmsg1",a),d(!1),T.deleteMessage(a).then((function(t){console.log("response: ",t),e.getData()})).catch((function(e){return console.log(e)}))):(d(!0),console.log("mid in settingmsg2",a),g(a))};return e.message.to===e.user?(console.log(e.message.msgId),h=Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"incoming_msg_img"}),Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:6,md:3,children:Object(n.jsx)("div",{style:{marginLeft:"15px",marginTop:"12px",marginBottom:"8px"},children:Object(n.jsx)($t.Player,{children:Object(n.jsx)("source",{src:e.message.messageVideo})})})}),Object(n.jsxs)(y.a,{item:!0,xs:6,md:9,children:["  ",e.isDel?Object(n.jsx)(N.a,{className:"Allbtn",style:{textTransform:"capitalize",marginTop:"0.8rem",color:"#EC5454",fontSize:"1.2rem"},children:Object(n.jsx)("i",{class:"fas fa-trash-alt",onClick:function(){return O(e.message.msgId)}})}):null]})]}),Object(n.jsx)("div",{class:"chat-message is-received",children:Object(n.jsxs)("div",{class:"message-block",children:[Object(n.jsx)("div",{class:"message-text",children:e.message.messageBody}),Object(n.jsxs)("span",{className:"received_time_date",children:[" ",e.message.time]})]})})]})):e.message.from===e.user?(console.log(e.message.msgId),h=Object(n.jsxs)("div",{children:[Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsxs)(y.a,{item:!0,xs:6,md:9,children:["  ",e.isDel?Object(n.jsx)(N.a,{className:"Allbtn",style:{textTransform:"capitalize",float:"right",marginTop:"0.8rem",color:"#EC5454",fontSize:"1.2rem"},children:Object(n.jsx)("i",{class:"fas fa-trash-alt",onClick:function(){return O(e.message.msgId)}})}):null]}),Object(n.jsx)(y.a,{item:!0,xs:6,md:3,children:Object(n.jsx)("div",{style:{marginRight:"15px",marginTop:"12px",marginBottom:"8px"},children:Object(n.jsx)($t.Player,{children:Object(n.jsx)("source",{src:e.message.messageVideo})})})})]}),Object(n.jsx)("div",{class:"chat-message is-sent",children:Object(n.jsxs)("div",{class:"message-block",children:[Object(n.jsxs)("div",{class:"message-text",children:[" ",e.message.messageBody]}),Object(n.jsxs)("span",{class:"sent_time_date",children:[" ",e.message.time]})]})})]})):console.log("nothing"),Object(n.jsxs)("div",{children:[h,l?Object(n.jsx)(ca,{open:l,setShow:d,msgId:b,getData:e.getData}):null]})}var ia=a(557),oa=a(330),la=a.n(oa),da=Object(Pe.a)((function(e){return{inputInput:{paddingLeft:"calc(1em + ".concat(e.spacing(1),"px)"),transition:e.transitions.create("width"),float:"left",color:"black",borderRadius:"2rem",backgroundColor:"white",width:"100%",padding:"0.4rem",border:"1.4px solid #c4c4c4"}}}));function ua(e){var t=Object(s.useState)(""),a=Object(u.a)(t,2),r=a[0],i=a[1],o=da();return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsxs)(y.a,{container:!0,style:{display:"flex",paddingTop:"0.5rem"},children:[Object(n.jsx)(y.a,{item:!0,xs:10,sm:11,md:11,children:Object(n.jsx)(ia.a,{placeholder:"Type a message here",className:o.inputInput,inputProps:{"aria-label":"type"},value:r,onChange:function(e){return i(e.target.value)}})}),Object(n.jsxs)(y.a,{item:!0,xs:2,sm:1,md:1,children:["  ",Object(n.jsxs)(N.a,{variant:"contained",size:"small",className:"Allbtn",style:{backgroundColor:"rgb(0, 172, 193)",color:"white",float:"left",padding:"0.5rem",margin:"0.2rem",borderRadius:"0.3rem"},onClick:function(){e.sendMessage(r),i("")},children:[Object(n.jsx)(la.a,{style:{marginRight:"0.4rem",fontSize:"0.8rem"}}),"Send"]})]})]})})}var ja=a(628),ma=a(334),ba=a(637),ga=a(332),ha=a.n(ga),Oa=a(207),fa=a.n(Oa),xa=a(331),pa=a(333),va=a.n(pa);function ya(e){var t=c.a.useState(null),a=Object(u.a)(t,2),r=a[0],i=a[1],o=Object(s.useState)(!1),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(m.g)(),g=x()._id,h=Boolean(r),O=Object(s.useState)(!0),f=Object(u.a)(O,2),p=f[0],v=f[1],N=Object(s.useState)(!1),w=Object(u.a)(N,2),S=w[0],k=w[1],C=function(t){"Delete"===t?(e.setDel(!0),v(!1)):"Search"===t&&j(!d)};Object(s.useEffect)((function(){e.recipientInfo.url}));var M=null;return p&&(M=Object(n.jsxs)("div",{style:{display:"inline",float:"right",marginTop:"0.6rem"},children:[Object(n.jsx)(le.a,{className:"Allbtn","aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget),k(!0)},children:Object(n.jsx)(ha.a,{})}),S?Object(n.jsxs)(ma.a,{id:"long-menu",anchorEl:r,keepMounted:!0,open:h,onClose:function(e){i(null)},PaperProps:{style:{marginTop:"40px",maxHeight:216,width:"20ch"}},children:[Object(n.jsx)(ba.a,{className:"Menu_div",onClick:function(){return C("Search")},children:Object(n.jsxs)("div",{children:[Object(n.jsx)(qt.a,{fontSize:"small",style:{width:"2rem"}}),Object(n.jsx)("p",{style:{display:"inline"},children:"Search"})]})}),Object(n.jsx)(ba.a,{className:"Menu_div",onClick:function(){return C("Delete")},children:Object(n.jsxs)("div",{children:[Object(n.jsx)(Y.a,{fontSize:"small",style:{width:"2rem",paddingBottom:"0.1rem"}}),Object(n.jsx)("p",{style:{display:"inline"},children:"Delete"})]})})]}):null]})),e.isDel&&(M=Object(n.jsx)("div",{style:{color:"gray",cursor:"pointer",float:"right",marginTop:"1rem",marginRight:"1rem"},"data-tip":"Close delete Menu","data-for":"delete",children:Object(n.jsx)(fa.a,{onClick:function(){console.log(e.isDel),e.setDel(!1),k(!1),v(!0)}})})),d&&(M=Object(n.jsx)(se.a,{style:{float:"right",marginRight:"1rem",marginTop:"0.8rem",backgroundColor:"white",borderRadius:"1rem"},value:e.searchTerm,onChange:function(t){e.searchHandler(t.currentTarget.value)},placeholder:"Search Message",size:"medium",InputProps:{startAdornment:Object(n.jsx)(ce.a,{position:"end",children:Object(n.jsx)(qt.a,{style:{color:ye.a[600],marginRight:"0.2rem",float:"right"}})}),endAdornment:Object(n.jsx)(fa.a,{style:{color:"gray",cursor:"pointer",marginRight:"0.4rem"},onClick:function(){console.log(e.isDel),e.setTerm(""),j(!1),k(!1),v(!0)}}),disableUnderline:!0}})),Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)("div",{style:{height:"100vh"},className:"chat_div",children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(At.a,{only:["sm","xs"],children:Object(n.jsx)(y.a,{item:!0,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsxs)(y.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)(xa.a,{id:"delete"}),Object(n.jsxs)(y.a,{container:!0,spacing:0,style:{display:"flex",marginTop:"1rem"},children:[Object(n.jsx)(y.a,{xs:0,md:1}),Object(n.jsxs)(y.a,{item:!0,xs:12,md:10,children:[Object(n.jsxs)("div",{className:"profilediv",children:[Object(n.jsx)(At.a,{only:["md","lg"],children:Object(n.jsx)(va.a,{style:{marginRight:"0.1rem",marginLeft:"0.1rem",cursor:"pointer"},onClick:function(e){return b.push("/mychats/"+g)}})}),Object(n.jsx)("img",{className:"profile",src:e.recipientInfo.url,alt:"dp"}),Object(n.jsx)("span",{style:{display:"inline",fontWeight:"bold",fontSize:"21px"},children:e.recipientInfo.name}),M]}),Object(n.jsxs)("div",{className:"content_body ",children:[e.element,e.loading?Object(n.jsx)("div",{className:"load",children:Object(n.jsx)(ja.a,{color:"secondary"})}):null]}),!0===e.isFriend?Object(n.jsx)(ua,{sendMessage:e.sendMessage}):Object(n.jsx)(Xe,{type:"error",message:"This person is not your friend anymore. Add them again to start a chat.",autoClose:5e3})]}),Object(n.jsx)(y.a,{xs:0,md:1})]})]})]})})})}var Na=a(632);function wa(e){var t=Object(s.useState)([{from:"",to:"",messages:[]}]),a=Object(u.a)(t,2),r=a[0],i=a[1],o=Object(s.useState)({messages:[""]}),l=Object(u.a)(o,2),j=l[0],m=l[1],b=Object(s.useState)(""),g=Object(u.a)(b,2),h=g[0],O=g[1],f=Object(s.useState)(!1),x=Object(u.a)(f,2),p=x[0],v=x[1],y=Object(s.useState)(!0),N=Object(u.a)(y,2),w=N[0],S=N[1],C=Object(s.useRef)([]),M=Object(s.useRef)(),I=Object(s.useRef)(),P=Object(s.useRef)({uId:"",uImg:"",uName:""}),A=Object(s.useRef)(""),D=Object(s.useRef)({name:"",lang:"",url:""}),_=Object(s.useRef)(""),F=Object(s.useRef)(),L=Object(s.useRef)(),q=e.match.params.id.split(" "),W=Object(s.useContext)(E).clientSocket,B=Object(s.useState)(!1),J=Object(u.a)(B,2),z=J[0],U=J[1],H=c.a.useState(!1),G=Object(u.a)(H,2),K=G[0],Y=G[1],V=JSON.parse(localStorage.getItem("user"));Object(s.useEffect)((function(){var e;null===(e=I.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[r]),D.current.name=localStorage.getItem("recName"),D.current.lang=localStorage.getItem("recLang"),D.current.url=localStorage.getItem("profileUrl"),F.current="mychats/"+localStorage.getItem("friendId"),L.current="/"+q[1],A.current=q[0],P.current.uId=V.email,P.current.uName=V.firstName+" "+V.lastName,P.current.uImg=V.profileImg;var X=function(){console.log("in get Data",P),T.getMessagesbyEmail(P.current.uId,A.current).then((function(e){e&&(console.log("This data",e),C.current=e,i({messages:C.current}),Y(!0))})).catch((function(e){return k.d.error("Database Connection Error",{position:k.d.POSITION.TOP_LEFT,autoClose:3e3,transition:k.c})}))};Object(s.useEffect)((function(){var e=0;R.getAllFriends(V._id).then((function(t){M.current=t,M.current.forEach((function(t){t.email===A.current&&(e+=1)})),e<1&&S(!1)})).catch((function(e){return k.d.error("Database Connection Error",{position:k.d.POSITION.TOP_LEFT,autoClose:3e3,transition:k.c})}))})),Object(s.useEffect)((function(){X()}),[]);Object(s.useEffect)((function(){if(void 0!==W)return W.emit("roomJoin",{from:P.current.uId,to:A.current},(function(e){var t=e.error,a=e.room;t?console.log("error joining room",t):(_.current=a,console.log("joined room with id",a))})),W.on("messageReceived",(function(e){i((function(t){if(t.messages){var a=Object(Qt.a)(t.messages);return a=[].concat(Object(Qt.a)(a),[e]),Object(d.a)(Object(d.a)({},t),{},{messages:a})}return{messages:[e]}}))})),function(){W.off("messageReceived"),console.log("in cleanup")}}),[]);var Z=null;return Object(s.useEffect)((function(){if(r.messages){var e=r.messages.filter((function(e){return e.messageBody.toLowerCase().includes(h.toLowerCase())}));m({messages:e})}else console.log("no chat")}),[h]),void 0===r.messages?Z=Object(n.jsx)("h5",{style:{textAlign:"center"},children:"Loading..."}):(Z=""!==h&&void 0!==j.messages?j.messages.map((function(e){return Object(n.jsx)(ra,{message:e,user:P.current.uId,isDel:z,term:h})})):r.messages.map((function(e){return Object(n.jsx)("div",{ref:I,children:Object(n.jsx)(ra,{message:e,user:P.current.uId,isDel:z,getData:X,id:q[1],rec:A.current})})})),0===j.messages.length&&(console.log("no match"),Z=Object(n.jsx)("h5",{style:{textAlign:"center"},children:"No match found!"}))),Object(n.jsx)(ya,{recipientInfo:D.current,element:Z,loading:p,sendMessage:function(e){if(""==e)k.d.error("Please Type something",{position:k.d.POSITION.TOP_LEFT});else{var t=Object(Na.a)();v(!0);D.current.lang,P.current.uImg;v(!1);var a={from:P.current.uId,to:A.current,userName:P.current.uName,room:_.current,messageBody:e,messageVideo:"returndata",time:(new Date).toLocaleString(),type:"offline",msgId:t};W.emit("messageSend",a,(function(e){e?k.d.error("Error in sending message! Please try again",{position:k.d.POSITION.TOP_LEFT,autoClose:3e3,transition:k.c}):(T.createMessage(a).then((function(e){return console.log(e,t)})).catch((function(e){return k.d.error("Database Connection Error! Please try again",{position:k.d.POSITION.TOP_LEFT,autoClose:3e3,transition:k.c})})),r.messages?i({messages:[].concat(Object(Qt.a)(r.messages),[a])}):i({messages:[a]}))})),W.emit("messageSend1",{message:a,roomId:L.current,name:P.current.uName},(function(e){e?console.log(e):console.log("testing")})),W.emit("myChats",{roomId:F.current,message:a,userImg:V.profileImg},(function(e){e?console.log(e):console.log("testing")}))}},isDel:z,setDel:U,isFriend:w,isChat:K,getData:X,searchTerm:h,setTerm:O,searchHandler:function(e){O((function(t){return e}))}})}var Sa=a(120),ka=Object(Pe.a)((function(e){return{subheader:{display:"flex",alignItems:"center",cursor:"pointer"},globe:{backgroundColor:e.palette.primary.dark},subheaderText:{color:e.palette.primary.dark},list:{maxHeight:"calc(100vh - 112px)",overflowY:"auto"},listText:{fontSize:"1.5rem",fontFamily:"Roboto",marginLeft:"0.5rem",marginTop:"2rem",fontWeight:"bold",display:"inline"},listText1:{fontSize:"1.3rem",fontFamily:"Roboto",color:"gray",marginLeft:"0.5rem"},listTime:{fontSize:"0.8rem",fontFamily:"Roboto",color:"gray",marginLeft:"0.5rem",display:"inline"},listBtn:{backgroundColor:"rgb(0, 172, 193)",color:"white",fontSize:"1rem"},mygrid:{marginTop:"50px",marginLeft:"350px",width:"650px"},mygrid1:{padding:"20px"},img:{width:"4rem",height:"4rem",borderRadius:"60px"}}})),Ca=function(e){var t=ka(),a=Object(m.g)(),c=null,r=JSON.parse(localStorage.getItem("user")),i=Object(s.useRef)([]),o=Object(s.useContext)(E).msgNotify;console.log("props",e.lastMsg);var l=function(e,t){T.getMessagesbyEmail(r.email,e.email).then((function(e){i.current=e,i.current.map((function(e){"offline"===e.type&&e.from!==r.email&&T.changeMessageType({type:"read"},e._id).then((function(e){console.log("The response is here",e),o()})).catch((function(e){return console.log(e)})),console.log("user matched")}))})),localStorage.setItem("friendId",e.id),localStorage.setItem("recName",e.name),localStorage.setItem("recLang",e.lang),localStorage.setItem("profileUrl",e.img),a.push("/chat/"+e.email+" "+e.id)};return Object(n.jsx)("div",{children:e.recipients.map((function(a,s){return Object(n.jsx)(ne.a,{style:{padding:"12px 10px",marginBottom:"1rem"},children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a,{item:!0,xs:1,children:Object(n.jsx)("img",{src:a.img,alt:"img",style:{height:"50px",width:"50px",borderRadius:"50%",display:"inline"}})}),Object(n.jsxs)(y.a,{item:!0,xs:11,children:[Object(n.jsx)(Z.a,{className:t.listText,children:a.name}),e.lastMsg.emails.forEach((function(s,i){s===a.email&&("read"===e.lastMsg.types[i]?c=Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{className:t.listText1,onClick:function(){return l(a,e.lastMsg.types[i],e.lastMsg.msgId[i])},children:e.lastMsg.msgs[i]}),Object(n.jsx)(Z.a,{className:t.listTime,children:Object(Sa.a)(e.lastMsg.time[i])})]}):"unread"===e.lastMsg.types[i]?c=Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{style:{fontWeight:"bold",color:"black"},className:t.listText1,onClick:function(){return l(a,e.lastMsg.types[i],e.lastMsg.msgId[i])},children:e.lastMsg.msgs[i]}),Object(n.jsx)(Z.a,{className:t.listTime,children:Object(Sa.a)(e.lastMsg.time[i])})]}):"offline"===e.lastMsg.types[i]&&e.lastMsg.senders[i]!==r.email?c=Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{style:{fontWeight:"bold",color:"black"},className:t.listText1,onClick:function(){return l(a,e.lastMsg.types[i])},children:e.lastMsg.msgs[i]}),Object(n.jsx)(Z.a,{className:t.listTime,children:Object(Sa.a)(e.lastMsg.time[i])})]}):(console.log("in nothing",e.lastMsg.types[i]),console.log("in nothing1",e.lastMsg.senders[i]),c=Object(n.jsxs)("div",{children:[Object(n.jsx)(Z.a,{className:t.listText1,onClick:function(){return l(a,e.lastMsg.types[i])},children:e.lastMsg.msgs[i]}),Object(n.jsx)(Z.a,{className:t.listTime,children:Object(Sa.a)(e.lastMsg.time[i])})]})))})),c]}),Object(n.jsx)("div",{})]})})}))})},Ma=Object(Pe.a)((function(e){return{mygrid:{marginTop:"50px",marginLeft:"350px",width:"650px"}}})),Ia=function(e){Ma(),Object(m.g)();var t=Object(s.useContext)(E).clientSocket,a=JSON.parse(localStorage.getItem("user")).email,c=Object(s.useContext)(E),r=c.setSocket,i=c.roomJoin,o=c.messageEvent,l=c.friendReq,j=Object(s.useRef)([]),b=Object(s.useState)({uData:[]}),g=Object(u.a)(b,2),h=g[0],O=g[1],f=Object(s.useState)({msgs:[],msgId:[],emails:[],types:[],senders:[],time:[]}),x=Object(u.a)(f,2),p=x[0],N=x[1],w=Object(s.useState)(),k=Object(u.a)(w,2),C=k[0],M=k[1],I=Object(s.useRef)(),P=Object(s.useRef)(0);Object(s.useRef)(0);I.current="mychats/"+e.match.params.id;var R=[],A=Object(s.useRef)();window.onload=function(){l(),o();var e=JSON.parse(localStorage.getItem("user"))._id;i(e),A=S()("http://127.0.0.1:5000"),r((function(e){return(e=A).on("connect",(function(){console.log("connected",e.id),e.emit("adduser",{id:e.id,name:a})})),e}))};Object(s.useEffect)((function(){P.current=0,t&&t.emit("myChatsRoom",{myChatsRoom:I.current},(function(e){var t=e.error,a=e.room;t?console.log("error joining room",t):console.log("joined room with id",a)})),function(e){j.current=[],p.msgs=[],p.msgId=[],p.emails=[],p.types=[],p.senders=[],p.time=[],T.getChatRecipients(e).then((function(t){t.length>0?(j.current=t.sort(),j.current=Array.from(new Set(j.current)),console.log("emails after sorting",j.current),Gt.getUserByEmail({userArray:j.current}).then((function(e){R=e,O((function(e){return e.uData=R,e}))})),j.current.forEach((function(t,a){T.getLastMsg(e,t).then((function(e){e&&N((function(a){if(a.msgs.length>=1&&a.emails.length>=1&&a.types.length>=1&&a.msgId.length>=1&&a.senders.length>=1){var n=Object(Qt.a)(a.msgs),s=Object(Qt.a)(a.emails),c=Object(Qt.a)(a.types),r=Object(Qt.a)(a.msgId),i=Object(Qt.a)(a.senders),o=Object(Qt.a)(a.time);return n=[].concat(Object(Qt.a)(n),[e.lastMsg]),s=[].concat(Object(Qt.a)(s),[t]),c=[].concat(Object(Qt.a)(c),[e.type]),r=[].concat(Object(Qt.a)(r),[e.msgId]),i=[].concat(Object(Qt.a)(i),[e.sender]),o=[].concat(Object(Qt.a)(o),[e.time]),Object(d.a)(Object(d.a)({},a),{},{msgs:n,msgId:r,emails:s,types:c,senders:i,time:o})}console.log("first: ",e.lastMsg,t);var l={msgs:[e.lastMsg],msgId:[e.msgId],emails:[t],types:[e.type],senders:[e.sender],time:[e.time]};return console.log("MY MSG: ",l),l}))})).catch((function(e){return console.log(e)}))}))):console.log("no data")})).catch((function(e){return console.log(e)}))}(a)}),[]),Object(s.useEffect)((function(){t&&t.on("newRecipient",(function(e){M((function(t){return e}))}))}),[]),Object(s.useEffect)((function(){var e;(console.log("IN PAYLOAD"),C)&&(console.log("payload",C),0!==h.uData.length&&0!==p.msgs.length?(console.log("check:",h),P.current=0,h.uData.forEach((function(t,a){C.message.from===t.email?(e=a,console.log("index: ",e),P.current=P.current+1,console.log("count: ",P.current)):console.log("false")})),0!==P.current?(console.log("before setRecArray",p.msgs),console.log("in setRecArray",P.current),D(e,C.message)):0===P.current?(_(C.message),console.log("in setNewArray",P.current)):console.log("nothing ",P.current)):console.log("usersData 1",p))}),[C]);var D=function(e,t){console.log("Last msg array and index",p.msgs,e);var a=[];a=Object(Qt.a)(p.msgs);var n=Object(Qt.a)(p.types),s=Object(Qt.a)(p.time);console.log("items before change",a),a[e]=t.messageBody,n[e]=t.type,s[e]=t.time,console.log("items",a),N((function(e){return Object(d.a)(Object(d.a)({},e),{},{msgs:a,types:n,time:s})}))},_=function(e){console.log("in new chattt",e.type),Gt.getUserByEmail({userEmail:e.from}).then((function(t){console.log("data",t),O((function(a){var n={email:e.from,gender:t[0].gender,id:t[0]._id,name:t[0].firstName+" "+t[0].lastName,img:t[0].profileImg},s=Object(Qt.a)(a.uData);return s=[].concat(Object(Qt.a)(s),[n]),console.log("u",s),Object(d.a)(Object(d.a)({},a),{},{uData:s})}))})),0!==h.uData.length?(console.log("not first recipient"),N({msgs:[].concat(Object(Qt.a)(p.msgs),[e.messageBody]),emails:[].concat(Object(Qt.a)(p.emails),[e.from]),types:[].concat(Object(Qt.a)(p.types),[e.type]),senders:[].concat(Object(Qt.a)(p.senders),[e.from]),time:[].concat(Object(Qt.a)(p.time),[e.time])})):(console.log("first recipient"),N({msgs:[e.messageBody],emails:[e.from],types:[e.type],senders:[e.from],time:[e.time]}))};return Object(n.jsx)("div",{style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(At.a,{only:["xs","sm"],children:Object(n.jsx)(y.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(At.a,{only:["md","lg"],children:Object(n.jsx)(y.a,{item:!0,xs:12,children:Object(n.jsx)(v,{})})}),Object(n.jsxs)(y.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)($,{name:"My Chats"}),0!==h.uData.length&&0!==p.msgs.length?Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{container:!0,style:{marginTop:"0.9rem"},children:[Object(n.jsx)(y.a,{item:!0,xs:1,md:1,children:" "}),Object(n.jsx)(y.a,{item:!0,xs:10,md:10,children:Object(n.jsx)(Ca,{recipients:h.uData,lastMsg:p})}),Object(n.jsx)(y.a,{item:!0,xs:1,md:1,children:" "})]})}):Object(n.jsx)("h5",{style:{textAlign:"center"},children:"No Chats Yet!"})]})]})})},Pa=(a(549),Object(Pe.a)({textfield:{marginTop:"2rem"},Submitbtn:{marginTop:"0.6rem"}}),function(e){var t=e.match;console.log(t.params.id);var a=t.params.id,c="/"+a,r=x()._id,i=x().firstName+" "+x().lastName,o=JSON.parse(localStorage.getItem("user")),l=Object(s.useState)(!o.sentRequests.includes(a)),d=Object(u.a)(l,2),j=d[0],m=d[1],b=x().profileImg,g=x().email,h=x().gender,O=x().langPreference,f=Object(s.useContext)(E).clientSocket;return Object(n.jsx)("div",{children:j?Object(n.jsx)(N.a,{className:"loginbtn",style:{display:"inline-block",position:"relative",float:"right",marginTop:"1rem",backgroundColor:Dt.a[600],color:"white"},variant:"contained",onClick:function(){console.log("contact Id",a),R.sendRequest({friendId:a,myId:r,myName:i,myProfileImg:b,myEmail:g,myGender:h,myLangPreference:O}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),m(!1)})).catch((function(e){console.log(e)})),f.emit("friendRequest",{myName:i,roomId:c},(function(e){e?console.log(e):console.log("emitted event")}))},children:"Add friend"}):Object(n.jsx)(N.a,{className:"loginbtn",style:{display:"inline-block",position:"relative",float:"right",marginTop:"1rem",backgroundColor:ye.a[500],color:"white"},variant:"contained",onClick:function(){R.cancelRequest({friendId:a,myId:r}).then((function(e){localStorage.setItem("user",JSON.stringify(e)),m(!0)})).catch((function(e){console.log(e)}))},children:"Requested"})})}),Ra=a(335),Ta=function(e){var t=e.component,a=Object(Ra.a)(e,["component"]);return Object(n.jsx)(m.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){return x()&&0===x().role?Object(n.jsx)(t,Object(d.a)({},e)):Object(n.jsx)(m.a,{to:"/login"})}}))},Ea=function(){var e=Object(m.g)(),t=Object(s.useContext)(E).frndcounter,a=x()._id;return Object(n.jsx)("div",{div:!0,style:{height:"100vh"},className:"back_divs",children:Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(At.a,{only:["xs","sm"],children:Object(n.jsx)(y.a,{item:!0,xs:5,md:2,children:Object(n.jsx)(Wt,{})})}),Object(n.jsx)(At.a,{only:["md","lg"],children:Object(n.jsx)(y.a,{item:!0,xs:12,children:Object(n.jsx)(v,{})})}),Object(n.jsxs)(y.a,{item:!0,xs:12,md:10,children:[Object(n.jsx)($,{name:"My Contacts"}),Object(n.jsxs)(y.a,{container:!0,style:{marginTop:"1.5rem"},children:[Object(n.jsx)(y.a,{item:!0,xs:1,md:3}),Object(n.jsxs)(y.a,{item:!0,xs:10,md:6,children:[Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 40px",display:"block",backgroundColor:"#D03384",marginTop:"1.5rem"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(t){return e.push("/all-my-friends/"+a)},children:[Object(n.jsx)(J.a,{className:"chaticon",color:"white"})," My Friends"]}),t>=1?Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 20px",display:"block",backgroundColor:"#D03384",marginTop:"1.5rem"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(t){return e.push("/all-friend-requests/"+a)},children:[Object(n.jsx)(V.a,{badgeContent:t,color:"secondary",style:{marginRight:"0.5rem"},children:Object(n.jsx)(G.a,{className:"chaticon",onClick:function(t){return e.push("/all-friend-requests/"+a)},color:"white"})}),"My Friend Requests"]}):Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 50px",display:"block",backgroundColor:"#D03384",marginTop:"1.5rem"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(t){return e.push("/all-friend-requests/"+a)},children:[Object(n.jsx)(G.a,{className:"chaticon",color:"white"}),"  My Friend Requests"]}),Object(n.jsxs)(N.a,{className:"loginbtn",style:{padding:"10px 20px",display:"block",backgroundColor:"#D03384",marginTop:"1.5rem"},variant:"contained",color:"Secondary",fullWidth:!0,onClick:function(t){return e.push("/all-contacts/"+a)},children:[Object(n.jsx)(W.a,{className:"chaticon",color:"white"})," Add New friend"]})]})]}),Object(n.jsx)(y.a,{item:!0,xs:1,md:3})]})]})})},Aa=function(){var e=Object(s.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(s.useState)(),i=Object(u.a)(r,2),o=i[0],l=i[1];return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(Yt,{userId:a,children:Object(n.jsx)(_,{userId:a,children:Object(n.jsx)(A,{id:o,children:Object(n.jsxs)(lt,{children:[Object(n.jsx)(k.b,{}),Object(n.jsx)(j.a,{children:Object(n.jsxs)(m.d,{children:[Object(n.jsx)(m.b,{path:"/",exact:!0,children:Object(n.jsx)(ut,{onIdSubmit:c,setId:l})}),Object(n.jsx)(m.b,{exact:!0,path:"/signup",component:rt}),Object(n.jsx)(m.b,{exact:!0,path:"/login",children:Object(n.jsx)(ut,{onIdSubmit:c,setId:l})}),Object(n.jsx)(m.b,{exact:!0,path:"/user/activate/:token",component:xt}),Object(n.jsx)(Ta,{exact:!0,path:"/dashboard/:id",component:ee}),Object(n.jsx)(m.b,{exact:!0,path:"/reset-password/:token",component:kt}),Object(n.jsx)(m.b,{exact:!0,path:"/forgot-password",component:wt}),Object(n.jsx)(m.b,{exact:!0,path:"/profile-setup/:token",component:Et}),Object(n.jsx)(Ta,{exact:!0,path:"/update-my-profile-setup/:id",component:Zt}),Object(n.jsx)(Ta,{exact:!0,path:"/all-contacts/:id",component:Bt}),Object(n.jsx)(Ta,{exact:!0,path:"/all-friend-requests/:id",component:zt}),Object(n.jsx)(Ta,{exact:!0,path:"/all-my-friends/:id",component:Vt}),Object(n.jsx)(Ta,{exact:!0,path:"/profile/:id/:id",component:Pa}),Object(n.jsx)(Ta,{exact:!0,path:"/my-contact-list/:id",component:Ea}),Object(n.jsx)(m.b,{exact:!0,path:"/notfound",component:pt}),Object(n.jsx)(Ta,{path:"/chat/:id",render:function(e){return Object(s.createElement)(wa,Object(d.a)(Object(d.a)({},e),{},{key:e.location.key}))},exact:!0,component:wa}),Object(n.jsx)(Ta,{path:"/mychats/:id",render:function(e){return Object(s.createElement)(Ia,Object(d.a)(Object(d.a)({},e),{},{key:e.location.key}))},exact:!0,component:Ia}),Object(n.jsx)(m.a,{to:"/notfound"})]})})]})})})})})},Da=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,638)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};a(551);i.a.render(Object(n.jsx)(Aa,{}),document.getElementById("root")),Da()},80:function(e,t,a){}},[[550,1,2]]]);
//# sourceMappingURL=main.2dfdef08.chunk.js.map